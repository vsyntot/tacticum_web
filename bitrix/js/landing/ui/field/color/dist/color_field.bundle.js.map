{"version":3,"file":"color_field.bundle.js","sources":["../src/internal/is-rgb-string.js","../src/internal/is-hex.js","../src/internal/is-hsl-string.js","../src/internal/hex-to-rgb.js","../src/internal/rgb-to-hsl.js","../src/internal/hex-to-hsl.js","../src/internal/rgb-to-hex.js","../src/internal/hsl-to-rgb.js","../src/internal/hsl-to-hex.js","../src/internal/rgb-string-to-hsl.js","../src/internal/hsl-string-to-hsl.js","../src/internal/css-var.js","../src/types/color_value_options.js","../src/color_value.js","../src/control/base_control/base_control.js","../src/control/hex/hex.js","../src/control/spectrum/spectrum.js","../src/layout/primary/primary.js","../src/internal/regexp.js","../src/internal/is-gradient-string.js","../src/gradient_value.js","../src/layout/preset/types/preset-options.js","../src/layout/preset/generator.js","../src/layout/preset/preset.js","../src/layout/preset/preset_collection.js","../src/layout/recent/recent.js","../src/layout/favourite/favourite.js","../src/control/color_popup/color_popup.js","../src/processor/base_processor.js","../src/control/colorpicker/colorpicker.js","../src/control/color_set/color_set.js","../src/control/opacity/opacity.js","../src/layout/tabs/tabs.js","../src/layout/zeroing/zeroing.js","../src/processor/color.js","../src/processor/color_hover.js","../src/control/gradient/gradient.js","../src/processor/bg_color.js","../src/internal/is-bg-image-string.js","../src/bg_image_value.js","../src/control/image/image.js","../src/internal/rgba-string-to-rgb-string.js","../src/processor/bg.js","../src/processor/border_color.js","../src/processor/border_color_hover.js","../src/processor/bg_color_hover.js","../src/processor/bg_color_after.js","../src/processor/bg_color_before.js","../src/processor/navbar_color.js","../src/processor/navbar_color_hover.js","../src/processor/navbar_color_fix_moment.js","../src/processor/navbar_color_fix_moment_hover.js","../src/processor/navbar_bg.js","../src/processor/navbar_bg_hover.js","../src/processor/border_color-top.js","../src/processor/fill_color.js","../src/processor/fill_color_second.js","../src/processor/button_color.js","../src/processor/navbar_collapse_bg.js","../src/color_field.js"],"sourcesContent":["export const matcher = /^rgba? ?\\((\\d{1,3})[, ]+(\\d{1,3})[, ]+(\\d{1,3})([, ]+([\\d\\.]{1,5}))?\\)$/i;\n\nexport default function isRgbString(rgbString: string): boolean\n{\n\treturn !!rgbString.match(matcher);\n}\n","export const matcherHex = /^#([\\da-f]{3}){1,2}$/i;\n\nexport default function isHex(hex: string)\n{\n\treturn !!hex.trim().match(matcherHex);\n}","export const matcherHsl = /^hsla?\\((\\d{1,3}), ?(\\d{1,3})%, ?(\\d{1,3})%(, ?([\\d .]+))?\\)/i;\n\nexport default function isHslString(hsla: string)\n{\n\treturn !!hsla.trim().match(matcherHsl);\n}","export default function hexToRgb(hex: string)\n{\n\tif (hex.length === 4)\n\t{\n\t\tconst r = parseInt(`0x${hex[1]}${hex[1]}`, 16);\n\t\tconst g = parseInt(`0x${hex[2]}${hex[2]}`, 16);\n\t\tconst b = parseInt(`0x${hex[3]}${hex[3]}`, 16);\n\n\t\treturn {r, g, b};\n\t}\n\n\tif (hex.length === 7)\n\t{\n\t\tconst r = parseInt(`0x${hex[1]}${hex[2]}`, 16);\n\t\tconst g = parseInt(`0x${hex[3]}${hex[4]}`, 16);\n\t\tconst b = parseInt(`0x${hex[5]}${hex[6]}`, 16);\n\n\t\treturn {r, g, b};\n\t}\n\n\treturn {r: 255, g: 255, b: 255};\n}","export default function rgbToHsla(\n\trgb: {r: number, g: number, b: number, a?: number}\n): {h: number, s: number, l: number, a: number}\n{\n\tconst r = rgb.r / 255;\n\tconst g = rgb.g / 255;\n\tconst b = rgb.b / 255;\n\n\tconst max = Math.max(r, g, b);\n\tconst min = Math.min(r, g, b);\n\tlet h, s, l = (max + min) / 2;\n\t// let l = h;\n\t// let s;\n\n\tif (max === min)\n\t{\n\t\th = s = 0;\n\t}\n\telse\n\t{\n\t\tconst d = max - min;\n\t\ts = l > 0.5\n\t\t\t? d / (2 - max - min)\n\t\t\t: d / (max + min);\n\n\t\tswitch (max)\n\t\t{\n\t\t\tcase r:\n\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\tbreak;\n\t\t\tcase g:\n\t\t\t\th = (b - r) / d + 2;\n\t\t\t\tbreak;\n\t\t\tcase b:\n\t\t\t\th = (r - g) / d + 4;\n\t\t\t\tbreak;\n\t\t}\n\n\t\th *= 0.6;\n\t}\n\n\treturn {\n\t\th: Math.round(h * 100),\n\t\ts: Math.round(s * 100),\n\t\tl: Math.round(l * 100),\n\t\ta: ('a' in rgb) ? rgb.a : 1,\n\t};\n}\n\n// \tconst v = Math.max(r, g, b);\n// \tconst diff = v - Math.min(r, g, b);\n// \tconst diffc = (c) => {\n// \t\treturn (v - c) / 6 / diff + 1 / 2;\n// \t};\n//\n// \tif (diff === 0)\n// \t{\n// \t\th = 0;\n// \t\ts = 0;\n// \t}\n// \telse\n// \t{\n// \t\ts = diff / v;\n// \t\trdif = diffc(r);\n// \t\tgdif = diffc(g);\n// \t\tbdif = diffc(b);\n//\n// \t\tif (r === v)\n// \t\t{\n// \t\t\th = bdif - gdif;\n// \t\t}\n// \t\telse if (g === v)\n// \t\t{\n// \t\t\th = (1 / 3) + rdif - bdif;\n// \t\t}\n// \t\telse if (b === v)\n// \t\t{\n// \t\t\th = (2 / 3) + gdif - rdif;\n// \t\t}\n//\n// \t\tif (h < 0)\n// \t\t{\n// \t\t\th += 1;\n// \t\t}\n// \t\telse if (h > 1)\n// \t\t{\n// \t\t\th -= 1;\n// \t\t}\n// \t}\n//\n// \treturn {\n// \t\th: h * 360,\n// \t\ts: s * 100,\n// \t\tl: v * 100,\n// \t\ta: rgb.a || 1,\n// \t};\n// }","import hexToRgb from './hex-to-rgb';\nimport rgbToHsla from './rgb-to-hsl';\n\nexport default function hexToHsl(hex: string): {h: number, s: number, l: number, a: number}\n{\n\tconst rgb = hexToRgb(hex.trim());\n\n\treturn rgbToHsla(rgb);\n}","export default function rgbToHex(rgb: {r: number, g: number, b: number}): string\n{\n\tlet r = rgb.r.toString(16);\n\tlet g = rgb.g.toString(16);\n\tlet b = rgb.b.toString(16);\n\n\tif (r.length === 1)\n\t{\n\t\tr = \"0\" + r;\n\t}\n\tif (g.length === 1)\n\t{\n\t\tg = \"0\" + g;\n\t}\n\tif (b.length === 1)\n\t{\n\t\tb = \"0\" + b;\n\t}\n\n\treturn \"#\" + r + g + b;\n}","export default function hslToRgb(hsl: {h: number, s: number, l: number}): {r: number, g: number, b: number}\n{\n\t// todo: a little not equal with reverce conversion :-/\n\t// todo: f.e. hsl(73.53.50) it 166,195,60 and #a5c33c,\n\t// todo: but in reverse #a5c33c => 165,195,60\n\t// todo: because we save ColorValue in hsl can be some differences\n\tconst h = hsl.h;\n\tconst s = hsl.s / 100;\n\tconst l = hsl.l / 100;\n\n\tlet c = (1 - Math.abs(2 * l - 1)) * s;\n\tlet x = c * (1 - Math.abs((h / 60) % 2 - 1));\n\tlet m = l - c / 2;\n\tlet r = 0;\n\tlet g = 0;\n\tlet b = 0;\n\n\tif (0 <= h && h < 60)\n\t{\n\t\tr = c;\n\t\tg = x;\n\t\tb = 0;\n\t}\n\telse if (60 <= h && h < 120)\n\t{\n\t\tr = x;\n\t\tg = c;\n\t\tb = 0;\n\t}\n\telse if (120 <= h && h < 180)\n\t{\n\t\tr = 0;\n\t\tg = c;\n\t\tb = x;\n\t}\n\telse if (180 <= h && h < 240)\n\t{\n\t\tr = 0;\n\t\tg = x;\n\t\tb = c;\n\t}\n\telse if (240 <= h && h < 300)\n\t{\n\t\tr = x;\n\t\tg = 0;\n\t\tb = c;\n\t}\n\telse if (300 <= h && h < 360)\n\t{\n\t\tr = c;\n\t\tg = 0;\n\t\tb = x;\n\t}\n\tr = Math.round((r + m) * 255);\n\tg = Math.round((g + m) * 255);\n\tb = Math.round((b + m) * 255);\n\n\treturn {r: r, g: g, b: b};\n}","import rgbToHex from './rgb-to-hex';\nimport hslToRgb from './hsl-to-rgb';\n\nexport default function hslToHex(hsl: {h: number, s: number, l: number}): string\n{\n\tconst rgb = hslToRgb(hsl);\n\n\treturn rgbToHex(rgb);\n}","import {Text} from 'main.core';\nimport rgbToHsla from '../internal/rgb-to-hsl';\nimport {matcher} from './is-rgb-string';\n\nexport default function rgbStringToHsla(rgbString: string): { h: number, s: number, l: number, a: number}\n{\n\tlet matches = rgbString.trim().match(matcher);\n\tif (matches.length > 0)\n\t{\n\t\treturn rgbToHsla({\n\t\t\tr: Text.toNumber(matches[1]),\n\t\t\tg: Text.toNumber(matches[2]),\n\t\t\tb: Text.toNumber(matches[3]),\n\t\t\ta: matches[5] ? Text.toNumber(matches[5]) : 1,\n\t\t});\n\t}\n}","import {Text} from 'main.core';\nimport {matcherHsl} from './is-hsl-string';\n\nexport default function hslStringToHsl(hslString: string): { h: number, s: number, l: number, a: number}\n{\n\tlet matches = hslString.trim().match(matcherHsl);\n\tif (matches && matches.length > 0)\n\t{\n\t\treturn {\n\t\t\th: Text.toNumber(matches[1]),\n\t\t\ts: Text.toNumber(matches[2]),\n\t\t\tl: Text.toNumber(matches[3]),\n\t\t\ta: matches[5] ? Text.toNumber(matches[5]) : 1,\n\t\t};\n\t}\n}","const matcher = /^(var\\()?((--[\\w\\d-]*?)(-opacity_([\\d_]+)?)?)\\)?$/i;\n\nexport function isCssVar(css: string): boolean\n{\n\treturn !!css.trim().match(matcher);\n}\n\ntype cssVar = {\n\tfull: string,\n\tname: string,\n\topacity: number,\n};\n\nexport function parseCssVar(css: string): ?cssVar\n{\n\tconst matches = css.trim().match(matcher);\n\tif (!!matches)\n\t{\n\t\tconst cssVar = {\n\t\t\tfull: matches[2],\n\t\t\tname: matches[3],\n\t\t};\n\n\t\tif (matches[3])\n\t\t{\n\t\t\tconst cssVarWithOpacity = '--primary-opacity-0_';\n\t\t\tconst cssVarWithOpacity0 = '--primary-opacity-0';\n\t\t\tif (matches[3].startsWith(cssVarWithOpacity0) && !matches[3].startsWith(cssVarWithOpacity))\n\t\t\t{\n\t\t\t\tcssVar.opacity = 0;\n\t\t\t}\n\t\t\tif (matches[3].startsWith(cssVarWithOpacity))\n\t\t\t{\n\t\t\t\tlet newOpacity = matches[3].substr(cssVarWithOpacity.length);\n\t\t\t\tif (newOpacity.length === 1 && newOpacity !== 0)\n\t\t\t\t{\n\t\t\t\t\tnewOpacity = newOpacity / 10;\n\t\t\t\t}\n\t\t\t\tif (newOpacity.length === 2)\n\t\t\t\t{\n\t\t\t\t\tnewOpacity = newOpacity / 100;\n\t\t\t\t}\n\t\t\t\tcssVar.opacity = newOpacity;\n\t\t\t}\n\t\t}\n\t\tif(matches[5])\n\t\t{\n\t\t\tcssVar.opacity = +parseFloat(matches[5].replace('_', '.')).toFixed(1);\n\t\t}\n\n\t\treturn cssVar;\n\t}\n\n\treturn null;\n}\n","import ColorValue from \"../color_value\";\n\nexport type ColorValueOptions = {\n\th?: number,\n\ts?: number,\n\tl?: number,\n\ta?: number,\n};\nexport const defaultColorValueOptions: ColorValueOptions = {\n\th: 205,\n\ts: 1,\n\tl: 50,\n\ta: 1,\n};\n\nexport type GradientValueOptions = {\n\tfrom: ColorValue,\n\tto: ColorValue,\n\tangle: number,\n\ttype: 'linear' | 'radial'\n};\n\nexport type BgImageValueOptions = {\n\turl: ?string,\n\turl2x: ?string,\n\tfileId: ?number,\n\tfileId2x: ?number,\n\tsize: 'cover' | 'auto',\n\tattachment: 'scroll' | 'fixed',\n\toverlay: ?ColorValue,\n};\nexport const defaultBgImageSize = 'cover';\nexport const defaultBgImageAttachment = 'scroll';\nexport const defaultOverlay = null;\nexport const defaultBgImageValueOptions: BgImageValueOptions = {\n\turl: null,\n\tsize: defaultBgImageSize,\n\tattachment: defaultBgImageAttachment,\n\toverlay: defaultOverlay,\n};\n","import {Dom, Type} from 'main.core';\n\nimport isRgbString from './internal/is-rgb-string';\nimport isHex from './internal/is-hex';\nimport isHslString from './internal/is-hsl-string';\nimport hexToHsl from './internal/hex-to-hsl';\nimport hslToHex from './internal/hsl-to-hex';\nimport rgbStringToHsla from './internal/rgb-string-to-hsl';\nimport hslStringToHsl from './internal/hsl-string-to-hsl';\nimport {isCssVar, parseCssVar} from \"./internal/css-var\";\nimport {ColorValueOptions, defaultColorValueOptions} from \"./types/color_value_options\";\nimport {IColorValue} from './types/i_color_value';\n\nexport default class ColorValue implements IColorValue\n{\n\tvalue: ColorValueOptions;\n\t/**\n\t * For preserve differences between hsl->rgb and rgb->hsl conversions we can save hex\n\t * @type {?string}\n\t */\n\thex: ?string;\n\t/**\n\t * if set css variable value - save them in '--var-name' format\n\t * @type {?string}\n\t */\n\tcssVar: ?string;\n\n\tconstructor(value: ColorValueOptions | ColorValue | string)\n\t{\n\t\tthis.value = defaultColorValueOptions;\n\t\tthis.hex = null;\n\t\tthis.cssVar = null;\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\tif (this.hex)\n\t\t{\n\t\t\treturn this.getHex() + '_' + this.getOpacity();\n\t\t}\n\t\tconst {h, s, l} = this.getHsl();\n\t\treturn `${h}-${s}-${l}-${this.getOpacity()}`;\n\t}\n\n\tsetValue(value: ColorValueOptions | ColorValue | string): ColorValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof ColorValue)\n\t\t\t{\n\t\t\t\tthis.value = value.getHsla();\n\t\t\t\tthis.cssVar = value.getCssVar();\n\t\t\t\tthis.hex = value.getHexOriginal();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.value = {...this.value, ...value};\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isString(value))\n\t\t{\n\t\t\tif (isHslString(value))\n\t\t\t{\n\t\t\t\tthis.value = hslStringToHsl(value);\n\t\t\t}\n\t\t\telse if (isHex(value))\n\t\t\t{\n\t\t\t\tthis.value = {...hexToHsl(value), a: defaultColorValueOptions.a};\n\t\t\t\tthis.hex = value;\n\t\t\t}\n\t\t\telse if (isRgbString(value))\n\t\t\t{\n\t\t\t\tthis.value = rgbStringToHsla(value);\n\t\t\t}\n\t\t\telse if (isCssVar(value))\n\t\t\t{\n\t\t\t\tconst cssVar = parseCssVar(value);\n\t\t\t\tconst cssPrimaryVarName = '--primary';\n\t\t\t\tif (cssVar !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.cssVar = cssVar.name;\n\t\t\t\t\tif ('opacity' in cssVar)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.cssVar = cssPrimaryVarName;\n\t\t\t\t\t\tthis.setValue(Dom.style(document.documentElement, this.cssVar));\n\t\t\t\t\t\tthis.setOpacity(cssVar.opacity);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setValue(Dom.style(document.documentElement, this.cssVar));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.value.h = Math.round(this.value.h);\n\t\tthis.value.s = Math.round(this.value.s);\n\t\tthis.value.l = Math.round(this.value.l);\n\t\tthis.value.a = this.value.a.toFixed(2);\n\t\tconst offsetFromCorrectValue = Math.round((this.value.a * 100) % 5);\n\t\tif (offsetFromCorrectValue < 3)\n\t\t{\n\t\t\tthis.value.a = (this.value.a * 100 - offsetFromCorrectValue) / 100;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.value.a = (this.value.a * 100 - offsetFromCorrectValue + 5) / 100;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsetOpacity(opacity: number): ColorValue\n\t{\n\t\tthis.setValue({a: opacity});\n\n\t\treturn this;\n\t}\n\n\tlighten(percent: number): ColorValue\n\t{\n\t\tthis.value.l = Math.min(this.value.l + percent, 100);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tdarken(percent: number): ColorValue\n\t{\n\t\tthis.value.l = Math.max(this.value.l - percent, 0);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tsaturate(percent: number): ColorValue\n\t{\n\t\tthis.value.s = Math.min(this.value.s + percent, 100);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tdesaturate(percent: number): ColorValue\n\t{\n\t\tthis.value.s = Math.max(this.value.s - percent, 0);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tadjustHue(degree: number): ColorValue\n\t{\n\t\tthis.value.h = (this.value.h + degree) % 360;\n\n\t\treturn this;\n\t}\n\n\tgetHsl(): {h: number, s: number, l: number}\n\t{\n\t\treturn {\n\t\t\th: this.value.h,\n\t\t\ts: this.value.s,\n\t\t\tl: this.value.l,\n\t\t};\n\t}\n\n\tgetHsla(): ColorValueOptions\n\t{\n\t\tconst a = this.value.a || 1;\n\t\treturn {\n\t\t\th: this.value.h,\n\t\t\ts: this.value.s,\n\t\t\tl: this.value.l,\n\t\t\ta,\n\t\t};\n\t}\n\n\t/**\n\t * Return original hex-string or convert value to hex (w.o. alpha)\n\t * @returns {string}\n\t */\n\tgetHex(): string\n\t{\n\t\treturn this.hex || hslToHex(this.value);\n\t}\n\n\t/**\n\t * Return hex only if value created from hex-string\n\t */\n\tgetHexOriginal(): string\n\t{\n\t\treturn this.hex;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\treturn this.value.a ?? defaultColorValueOptions.a;\n\t}\n\n\tgetCssVar(): ?string\n\t{\n\t\treturn this.cssVar;\n\t}\n\n\t/**\n\t * Get style string for set inline css var.\n\t * Set hsla value or primary css var with opacity in format --var-name-opacity_12_3\n\t * @returns {string}\n\t */\n\tgetStyleString(): string\n\t{\n\t\tif (this.cssVar === null)\n\t\t{\n\t\t\tif (this.hex && this.getOpacity() === defaultColorValueOptions.a)\n\t\t\t{\n\t\t\t\treturn this.hex\n\t\t\t}\n\n\t\t\tconst {h, s, l, a} = this.value;\n\n\t\t\treturn `hsla(${h}, ${s}%, ${l}%, ${a})`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet fullCssVar = this.cssVar;\n\t\t\tif (this.value.a !== defaultColorValueOptions.a)\n\t\t\t{\n\t\t\t\tfullCssVar = fullCssVar + '-opacity-' + String(this.value.a).replace('.', '_');\n\t\t\t}\n\t\t\treturn `var(${fullCssVar})`;\n\t\t}\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\tconst {h, s, l} = this.value;\n\n\t\treturn `linear-gradient(to right, hsla(${h}, ${s}%, ${l}%, 0) 0%, hsla(${h}, ${s}%, ${l}%, 1) 100%)`;\n\t}\n\n\tstatic compare(color1: ColorValue, color2: ColorValue): boolean\n\t{\n\t\treturn color1.getHsla().h === color2.getHsla().h\n\t\t\t&& color1.getHsla().s === color2.getHsla().s\n\t\t\t&& color1.getHsla().l === color2.getHsla().l\n\t\t\t&& color1.getHsla().a === color2.getHsla().a\n\t\t\t&& color1.cssVar === color2.cssVar;\n\t}\n\n\tstatic getMedian(color1: ColorValue, color2: ColorValue): ColorValue\n\t{\n\t\treturn new ColorValue({\n\t\t\th: (color1.getHsla().h + color2.getHsla().h) / 2,\n\t\t\ts: (color1.getHsla().s + color2.getHsla().s) / 2,\n\t\t\tl: (color1.getHsla().l + color2.getHsla().l) / 2,\n\t\t\ta: (color1.getHsla().a + color2.getHsla().a) / 2,\n\t\t});\n\t}\n\n\t/**\n\t * Special formula for contrast. Not only color invert!\n\t * @returns {string}\n\t */\n\tgetContrast(): ColorValue\n\t{\n\t\tlet k = 60;\n\t\t// math h range to 0-2pi radian and add modifier by sinus\n\t\tlet rad = this.getHsl().h * Math.PI / 180;\n\t\tk += (Math.sin(rad) * 10) + 5;\t// 10 & 5 is approximate coefficients\n\t\t// lighten by started light\n\t\tlet deltaL = k - (45 * this.getHsl().l / 100);\n\n\t\treturn new ColorValue(this.value).setValue({l: (this.getHsl().l + deltaL) % 100});\n\t}\n\n\t/**\n\t * Special formula for lighten, good for dark and light colors\n\t */\n\tgetLighten(): ColorValue\n\t{\n\t\tlet {h, s, l} = this.getHsl();\n\n\t\tif (s > 0)\n\t\t{\n\t\t\ts += (l - 50) / 100 * 60;\n\t\t\ts = Math.min(100, Math.max(0, l));\n\t\t}\n\n\t\tl += 10 + 20 * l / 100;\n\t\tl = Math.min(100, l);\n\n\t\treturn new ColorValue({h, s, l});\n\t}\n}\n","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Cache, Dom, Tag} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\nimport {IColorValue} from '../../types/i_color_value';\n\nimport './css/base_control.css';\n\nexport default class BaseControl extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options: ?{})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn this.buildLayout();\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-base-control\">\n\t\t\t\tBase control\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn new ColorValue();\n\t\t});\n\t}\n\n\tisNeedSetValue(value): boolean\n\t{\n\t\treturn value !== this.getValue();\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.cache.set('value', value);\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {color: this.getValue()});\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n}\n","import { Dom, Event, Runtime, Tag } from 'main.core';\nimport isHex from '../../internal/is-hex';\nimport ColorValue from '../../color_value';\n\nimport './css/hex.css';\nimport BaseControl from '../base_control/base_control';\nimport { BaseEvent } from 'main.core.events';\nimport { PageObject } from 'landing.pageobject';\n\nexport default class Hex extends BaseControl\n{\n\tstatic DEFAULT_TEXT: string = '#hex';\n\tstatic DEFAULT_COLOR: string = '#000000';\n\tstatic DEFAULT_BG: string = '#eeeeee';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Hex');\n\n\t\tthis.onInput = Runtime.debounce(this.onInput.bind(this), 300);\n\n\t\tthis.previewMode = false;\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\tEvent.bind(this.getInput(), 'input', this.onInput);\n\n\t\tthis.adjustColors(Hex.DEFAULT_COLOR, Hex.DEFAULT_BG);\n\n\t\tconst modeClass = this.previewMode ? '--preview' : '--base';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-hex ${modeClass}\">\n\t\t\t\t${this.getPreview()}\n\t\t\t\t${this.getInput()}\n\t\t\t\t${this.previewMode ? this.getButton() : ''}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetPreview(): HTMLInputElement\n\t{\n\t\treturn this.cache.remember('preview', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-hex-preview\"></div>`;\n\t\t});\n\t}\n\n\tgetInput(): HTMLInputElement\n\t{\n\t\treturn this.cache.remember('input', () => {\n\t\t\treturn Tag.render`<input type=\"text\" name=\"hexInput\" value=\"${Hex.DEFAULT_TEXT}\" class=\"landing-ui-field-color-hex-input\">`;\n\t\t});\n\t}\n\n\tonInput(): void\n\t{\n\t\tlet value = this.getInput().value.replaceAll(/[^\\da-f]/gi, '');\n\t\tvalue = value.slice(0, 6);\n\t\tthis.getInput().value = `#${value.toLowerCase()}`;\n\n\t\tif (this.getInput().value.length === 7)\n\t\t{\n\t\t\tthis.emit('onValidInput', { value });\n\t\t}\n\n\t\tthis.onChange();\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tconst color = (this.getInput().value.length === 7 && isHex(this.getInput().value))\n\t\t\t? new ColorValue(this.getInput().value)\n\t\t\t: null;\n\t\tthis.setValue(color);\n\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', { color });\n\t}\n\n\tadjustColors(textColor: string, bgColor: string)\n\t{\n\t\tif (this.previewMode === true)\n\t\t{\n\t\t\tDom.style(this.getInput(), 'color', textColor);\n\t\t\tDom.style(this.getButton(), 'fill', textColor);\n\t\t\tDom.style(this.getInput(), 'background', 'transparent');\n\t\t\tDom.style(this.getPreview(), 'display', 'none');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.getPreview(), 'background-color', bgColor);\n\t\t}\n\t}\n\n\tfocus(): void\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\tthis.getInput().value = '#';\n\t\t}\n\t\tthis.getInput().focus();\n\t}\n\n\tunFocus(): void\n\t{\n\t\tthis.getInput().blur();\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn (this.getInput().value === Hex.DEFAULT_TEXT)\n\t\t\t\t? null\n\t\t\t\t: new ColorValue(this.getInput().value);\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\t// todo: set checking in always controls?\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tif (value === null)\n\t\t\t{\n\t\t\t\tthis.adjustColors(Hex.DEFAULT_COLOR, Hex.DEFAULT_BG);\n\t\t\t\tthis.unsetActive();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.adjustColors(value.getContrast().getHex(), value.getHex());\n\t\t\t\tthis.setActive();\n\t\t\t}\n\n\t\t\tif (PageObject.getRootWindow().document.activeElement !== this.getInput())\n\t\t\t{\n\t\t\t\tthis.getInput().value = (value === null) ? Hex.DEFAULT_TEXT : value.getHex();\n\t\t\t}\n\n\t\t\tthis.emit('onSetValue', { color: value === null ? Hex.DEFAULT_BG : value.getHex() });\n\t\t}\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n\n\tsetPreviewMode(preview: boolean)\n\t{\n\t\tthis.previewMode = preview;\n\t}\n\n\tisPreviewMode()\n\t{\n\t\treturn Boolean(this.previewMode);\n\t}\n\n\tgetButton(): SVGElement\n\t{\n\t\treturn this.cache.remember('editButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<svg class=\"landing-ui-field-color-hex-preview-btn\" width=\"9\" height=\"9\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M7.108 0l1.588 1.604L2.486 7.8.896 6.194 7.108 0zM.006 8.49a.166.166 0 00.041.158.161.161 0 00.16.042l1.774-.478L.484 6.715.006 8.49z\"\n\t\t\t\t\t\tfill-rule=\"evenodd\"/>\n\t\t\t\t</svg>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Dom, Event, Tag, Text } from 'main.core';\nimport ColorValue from '../../color_value';\nimport BaseControl from '../base_control/base_control';\nimport { PageObject } from 'landing.pageobject';\nimport './css/spectrum.css';\n\nexport default class Spectrum extends BaseControl\n{\n\tstatic DEFAULT_SATURATION: number = 100;\n\tstatic HUE_RANGE: number = 375;\n\tstatic HUE_RANGE_GRAY_THRESHOLD: number = 360;\n\tstatic HUE_RANGE_GRAY_MIDDLE: number = 367;\n\tstatic HIDE_CLASS: string = 'hidden';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Spectrum');\n\n\t\tthis.onPickerDragStart = this.onPickerDragStart.bind(this);\n\t\tthis.onPickerDragMove = this.onPickerDragMove.bind(this);\n\t\tthis.onPickerDragEnd = this.onPickerDragEnd.bind(this);\n\t\tthis.onScroll = this.onScroll.bind(this);\n\n\t\tthis.scrollContext = options.contentRoot;\n\n\t\tEvent.bind(this.getLayout(), 'mousedown', this.onPickerDragStart);\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-spectrum\">\n\t\t\t\t${this.getPicker()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetPicker(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('picker', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-spectrum-picker\"></div>`;\n\t\t});\n\t}\n\n\tgetPickerPos(): {x: number, y: number}\n\t{\n\t\treturn {\n\t\t\tx: Text.toNumber(Dom.style(this.getPicker(), 'left')),\n\t\t\ty: Text.toNumber(Dom.style(this.getPicker(), 'top')),\n\t\t};\n\t}\n\n\tonPickerDragStart(event: MouseEvent)\n\t{\n\t\tif (event.ctrlKey || event.metaKey || event.button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst documentBody = this.getLayout().ownerDocument.body;\n\t\tEvent.bind(this.scrollContext, 'scroll', this.onScroll);\n\t\tEvent.bind(this.getLayout(), 'mousemove', this.onPickerDragMove);\n\t\tEvent.bind(this.getLayout(), 'mouseup', this.onPickerDragEnd);\n\t\tDom.addClass(documentBody, 'landing-ui-field-color-draggable');\n\t\tthis.onScroll();\n\t\tthis.showPicker();\n\t\tthis.emit('onPickerDragStart', { color: this.getValue() });\n\t\tthis.onPickerDragMove(event);\n\t}\n\n\tonPickerDragMove(event: MouseEvent)\n\t{\n\t\tif (event.target === this.getPicker())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setPickerPos(event.pageX, event.pageY);\n\t\tthis.onChange();\n\t}\n\n\tonPickerDragEnd()\n\t{\n\t\tconst documentBody = this.getLayout().ownerDocument.body;\n\t\tEvent.unbind(this.scrollContext, 'scroll', this.onScroll);\n\t\tEvent.unbind(this.getLayout(), 'mousemove', this.onPickerDragMove);\n\t\tEvent.unbind(this.getLayout(), 'mouseup', this.onPickerDragEnd);\n\t\tDom.removeClass(documentBody, 'landing-ui-field-color-draggable');\n\t\tthis.emit('onPickerDragEnd', { color: this.getValue() });\n\t}\n\n\tonScroll()\n\t{\n\t\tthis.cache.delete('layoutSize');\n\t}\n\n\tgetLayoutRect(): {}\n\t{\n\t\tconst ownerDocument = this.getLayout().ownerDocument;\n\n\t\treturn this.cache.remember('layoutSize', () => {\n\t\t\tconst layoutRect = this.getLayout().getBoundingClientRect();\n\t\t\tconst scrollTop = ownerDocument.documentElement.scrollTop || 0;\n\n\t\t\treturn {\n\t\t\t\twidth: layoutRect.width,\n\t\t\t\theight: layoutRect.height,\n\t\t\t\tleft: layoutRect.left,\n\t\t\t\ttop: layoutRect.top + scrollTop,\n\t\t\t};\n\t\t});\n\t}\n\n\t/**\n\t * Set picker by absolut page coords\n\t * @param x\n\t * @param y\n\t */\n\tsetPickerPos(x: number, y: number)\n\t{\n\t\tconst { width, height, top, left } = this.getLayoutRect();\n\n\t\tlet leftToSet = Math.min(Math.max((x - left), 0), width);\n\t\tleftToSet = (leftToSet > width / Spectrum.HUE_RANGE * Spectrum.HUE_RANGE_GRAY_THRESHOLD)\n\t\t\t? width / Spectrum.HUE_RANGE * Spectrum.HUE_RANGE_GRAY_MIDDLE\n\t\t\t: leftToSet\n\t\t;\n\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftToSet}px`,\n\t\t\ttop: `${Math.min(Math.max((y - top), 0), height)}px`,\n\t\t});\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (Dom.hasClass(this.getPicker(), Spectrum.HIDE_CLASS))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst layoutWidth = this.getLayout().getBoundingClientRect().width;\n\t\t\tconst h = (this.getPickerPos().x / layoutWidth) * Spectrum.HUE_RANGE;\n\t\t\tconst layoutHeight = this.getLayout().getBoundingClientRect().height;\n\t\t\tconst l = (1 - this.getPickerPos().y / layoutHeight) * 100;\n\n\t\t\tif (isNaN(h) || isNaN(l))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn new ColorValue({\n\t\t\t\th: Math.min(h, Spectrum.HUE_RANGE_GRAY_THRESHOLD),\n\t\t\t\ts: (h >= Spectrum.HUE_RANGE_GRAY_THRESHOLD) ? 0 : Spectrum.DEFAULT_SATURATION,\n\t\t\t\tl,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tif ((value !== null) && Spectrum.isSpectrumValue(value))\n\t\t{\n\t\t\t// in first set value we can't match bounding client rect (layout not render). Then, use percents\n\t\t\tconst { h, s, l } = value.getHsl();\n\n\t\t\tconst left = (s === 0)\n\t\t\t\t? Spectrum.HUE_RANGE_GRAY_MIDDLE / Spectrum.HUE_RANGE * 100\n\t\t\t\t: h / Spectrum.HUE_RANGE * 100;\n\t\t\tDom.style(this.getPicker(), 'left', `${left}%`);\n\n\t\t\tconst top = 100 - l;\n\t\t\tDom.style(this.getPicker(), 'top', `${top}%`);\n\n\t\t\tthis.showPicker();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hidePicker();\n\t\t}\n\t}\n\n\thidePicker()\n\t{\n\t\tDom.addClass(this.getPicker(), Spectrum.HIDE_CLASS);\n\t}\n\n\tshowPicker()\n\t{\n\t\tDom.removeClass(this.getPicker(), Spectrum.HIDE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn (this.getValue() !== null) && Spectrum.isSpectrumValue(this.getValue());\n\t}\n\n\tstatic isSpectrumValue(value: ColorValue): boolean\n\t{\n\t\treturn (value !== null)\n\t\t\t&& (\n\t\t\t\tvalue.getHsl().s === Spectrum.DEFAULT_SATURATION\n\t\t\t\t|| value.getHsl().s === 0\n\t\t\t);\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Dom, Loc} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\n\nimport 'ui.fonts.opensans';\nimport './css/primary.css';\n\nexport default class Primary extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\tstatic CSS_VAR: string = '--primary';\n\n\t// todo: layout or control?\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Primary');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\n\t\tif (options.content && options.content === 'var(--primary)')\n\t\t{\n\t\t\tthis.setActive();\n\t\t}\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-primary\">\n\t\t\t\t\t<i class=\"landing-ui-field-color-primary-preview\"></i>\n\t\t\t\t\t<span class=\"landing-ui-field-color-primary-text\">\n\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRIMARY_TITLE')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn new ColorValue(Primary.CSS_VAR);\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.setActive();\n\t\tthis.emit('onChange', {color: this.getValue()});\n\t}\n\n\tsetActive()\n\t{\n\t\tDom.addClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tunsetActive()\n\t{\n\t\tDom.removeClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tisPrimaryValue(value: ColorValue): boolean\n\t{\n\t\treturn (value !== null) && (this.getValue().getCssVar() === value.getCssVar());\n\t}\n}\n","export function regexpWoStartEnd(regexp: RegExp): RegExp\n{\n\treturn new RegExp(regexpToString(regexp));\n}\n\nexport function regexpToString(regexp: RegExp): string\n{\n\treturn regexp.source.replace(/(^\\^)|(\\$$)/g, '');\n}","import {matcherHex} from \"./is-hex\";\nimport {regexpToString} from \"./regexp\";\n\nexport const matcherGradient = /^(linear|radial)-gradient\\(.*\\)$/i;\nexport const matcherGradientAngle = /^(linear|radial)-gradient\\(.*?((\\d)+deg).*?\\)$/ig;\nconst hexMatcher = regexpToString(matcherHex);\nexport const matcherGradientColors = new RegExp(\n\t'((rgba|hsla)?\\\\([\\\\d% .,]+\\\\)|transparent|' + hexMatcher + ')+', 'ig'\n);\n// todo: whooooouuuu, is so not-good\n\n// todo: add hex greaident match\n\n// todo: for tests\n// \"linear-gradient(45deg, rgb(71, 155, 255) 0%, rgb(0, 207, 78) 100%)\"\n// \"linear-gradient(45deg, #123321 0%, #543asdbd 100%)\"\n// \"linear-gradient(rgb(71, 155, 255) 0%, rgb(0, 207, 78) 100%)\"\n// \"radial-gradient(circle farthest-side, rgb(34, 148, 215), rgb(39, 82, 150))\"\n\nexport default function isGradientString(rgbString: string): boolean\n{\n\treturn !!rgbString.trim().match(matcherGradient);\n}","import {Type, Text} from 'main.core';\n\nimport {GradientValueOptions, defaultColorValueOptions} from \"./types/color_value_options\";\nimport ColorValue from \"./color_value\";\nimport {IColorValue} from './types/i_color_value';\nimport Primary from './layout/primary/primary';\n\nimport isGradientString, {\n\tmatcherGradient,\n\tmatcherGradientAngle,\n\tmatcherGradientColors,\n} from './internal/is-gradient-string';\n\nexport default class GradientValue implements IColorValue\n{\n\tstatic TYPE_RADIAL = 'radial';\n\tstatic TYPE_LINEAR = 'linear';\n\tstatic DEFAULT_ANGLE = 180;\n\tstatic DEFAULT_TYPE = 'linear';\n\n\tvalue: GradientValueOptions;\n\n\tconstructor(value: GradientValueOptions | GradientValue | string)\n\t{\n\t\tthis.value = {\n\t\t\tfrom: new ColorValue('#ffffff'),\n\t\t\tto: new ColorValue(Primary.CSS_VAR),\n\t\t\tangle: GradientValue.DEFAULT_ANGLE,\n\t\t\ttype: GradientValue.DEFAULT_TYPE,\n\t\t};\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.value.from.getName() + '_' + this.value.to.getName() + '_' + this.getAngle() + '_' + this.getType();\n\t}\n\n\t// todo: parse grad string?\n\tsetValue(value: GradientValueOptions | GradientValue | string): GradientValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tthis.value.from = new ColorValue(value.getFrom());\n\t\t\t\tthis.value.to = new ColorValue(value.getTo());\n\t\t\t\tthis.value.angle = value.getAngle();\n\t\t\t\tthis.value.type = value.getType();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif ('from' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.from = new ColorValue(value.from);\n\t\t\t\t}\n\t\t\t\tif ('to' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.to = new ColorValue(value.to);\n\t\t\t\t}\n\t\t\t\tif ('angle' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.angle = Text.toNumber(value.angle);\n\t\t\t\t}\n\t\t\t\tif ('type' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.type = value.type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telse if (Type.isString(value) && isGradientString(value))\n\t\t{\n\t\t\tthis.parseGradientString(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsetOpacity(opacity: number): GradientValue\n\t{\n\t\tthis.value.from.setOpacity(opacity);\n\t\tthis.value.to.setOpacity(opacity);\n\n\t\treturn this;\n\t}\n\n\tparseGradientString(value: string): viod\n\t{\n\t\tconst typeMatches = value.trim().match(matcherGradient);\n\t\tif (!!typeMatches)\n\t\t{\n\t\t\tthis.setValue({type: typeMatches[1]});\n\t\t}\n\n\t\tconst angleMatches = value.trim().match(matcherGradientAngle);\n\t\tif (!!angleMatches)\n\t\t{\n\t\t\tthis.setValue({angle: angleMatches[2]});\n\t\t}\n\n\n\t\tconst colorMatches = value.trim().match(matcherGradientColors);\n\t\tif (colorMatches && colorMatches.length > 0)\n\t\t{\n\t\t\tthis.setValue({from: new ColorValue(colorMatches[0])});\n\t\t\tthis.setValue({to: new ColorValue(colorMatches[colorMatches.length - 1])});\n\t\t}\n\t}\n\n\tgetFrom(): ColorValue\n\t{\n\t\treturn this.value.from;\n\t}\n\n\tgetTo(): ColorValue\n\t{\n\t\treturn this.value.to;\n\t}\n\n\tgetAngle(): number\n\t{\n\t\treturn this.value.angle;\n\t}\n\n\tsetAngle(angle: number)\n\t{\n\t\tif (Type.isNumber(angle))\n\t\t{\n\t\t\tthis.value.angle = Math.min(Math.max(angle, 0), 360);\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.value.type;\n\t}\n\n\tsetType(type: string)\n\t{\n\t\tif (type === GradientValue.TYPE_RADIAL || type === GradientValue.TYPE_LINEAR)\n\t\t{\n\t\t\tthis.value.type = type;\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\treturn (this.value.from.getOpacity() + this.value.to.getOpacity()) / 2 ?? defaultColorValueOptions.a;\n\t}\n\n\tgetStyleString(): string\n\t{\n\t\tconst angle = this.value.angle;\n\t\tconst type = this.value.type;\n\t\tconst fromString = this.value.from.getStyleString();\n\t\tconst toString = this.value.to.getStyleString();\n\n\t\treturn type === 'linear'\n\t\t\t? `linear-gradient(${angle}deg, ${fromString} 0%, ${toString} 100%)`\n\t\t\t: `radial-gradient(circle farthest-side at 50% 50%, ${fromString} 0%, ${toString} 100%)`;\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\treturn `radial-gradient(at top left, ${this.value.from.getHex()}, transparent)`\n\t\t\t+ `, radial-gradient(at bottom left, ${this.value.to.getHex()}, transparent)`\n\t}\n\n\tstatic compare(value1: GradientValue, value2: GradientValue, full:boolean = true): boolean\n\t{\n\t\tconst base = (\n\t\t\t\tColorValue.compare(value1.getFrom(), value2.getFrom())\n\t\t\t\t&& ColorValue.compare(value1.getTo(), value2.getTo())\n\t\t\t) || (\n\t\t\t\tColorValue.compare(value1.getTo(), value2.getFrom())\n\t\t\t\t&& ColorValue.compare(value1.getFrom(), value2.getTo())\n\t\t\t);\n\t\tconst ext = full\n\t\t\t? (value1.getAngle() === value2.getAngle() && value1.getType() === value2.getType())\n\t\t\t: true;\n\n\t\treturn  base && ext;\n\t}\n}\n","import ColorValue from '../../../color_value';\nimport GradientValue from '../../../gradient_value';\n\nexport type PresetOptions = {\n\tid?: string,\n\ttype?: 'color' | 'gradient',\n\titems: [ColorValue | GradientValue],\n};\n\nexport const defaultType = 'color';\nexport const gradientType = 'gradient';","import {Cache, Dom} from 'main.core';\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport {PresetOptions, gradientType} from './types/preset-options';\nimport hexToHsl from '../../internal/hex-to-hsl';\n\nexport default class Generator\n{\n\tstatic BITRIX_COLOR: string = '#2fc6f6';\n\n\tstatic cache = new Cache.MemoryCache();\n\tstatic defaultPresets: [] = [\n\t\t{\n\t\t\tid: 'blackAndWhite',\n\t\t\titems: [\n\t\t\t\t'#ffffff', '#f2f2f2', '#dbdbdb', '#b5b5b5', '#919191', '#808080',\n\t\t\t\t'#6e6e6e', '#5c5c5c', '#4a4a4a', '#242424', '#171717', '#000000',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'agency',\n\t\t\titems: [\n\t\t\t\t'#ff6366', '#40191a', '#803233', '#bf4b4d', '#e65a5c', '#ffc1c2',\n\t\t\t\t'#363643', '#57dca3', '#ee76ba', '#ffa864', '#eaeaec', '#fadbdc',\n\t\t\t\t// '#ff6366', '#2b2b2b', '#595959', '#858585', '#ff4245', '#ffc1c2',\n\t\t\t\t// '#3d3d3d', '#33ffa7', '#ff66bd', '#ffa864', '#ebebeb', '#ffd6d8',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'accounting',\n\t\t\titems: [\n\t\t\t\t'#a5c33c', '#384215', '#6f8228', '#8fa834', '#b0cf40', '#dae6ae',\n\t\t\t\t'#4c4c4c', '#5d84e6', '#cd506b', '#fe6466', '#dfdfdf', '#e9f0cf',\n\t\t\t\t// '#c8ff00', '#445700', '#84a800', '#acdb00', '#cbff0f', '#e8ff94',\n\t\t\t\t// '#4c4c4c', '#4278ff', '#ff1f4f', '#ff6164', '#dfdfdf', '#f2ffc2',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'app',\n\t\t\titems: [\n\t\t\t\t'#4fd2c2', '#1f524c', '#379187', '#46b8aa', '#54dece', '#c8f1ec',\n\t\t\t\t'#6639b6', '#e81c62', '#9a69ca', '#6279d8', '#ffc337', '#e9faf8',\n\t\t\t\t// '#24ffe5', '#383838', '#636363', '#808080', '#33ffe7', '#b8fff7',\n\t\t\t\t// '#5800f0', '#ff055d', '#999999', '#3d64ff', '#ffc337', '#e5fffc',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'architecture',\n\t\t\titems: [\n\t\t\t\t'#c94645', '#4a1919', '#8a2f2f', '#b03c3c', '#d64949', '#eec3c3',\n\t\t\t\t'#363643', '#446d90', '#a13773', '#c98145', '#eaeaec', '#f9e8e7',\n\t\t\t\t// '#ff0f0f', '#303030', '#5c5c5c', '#757575', '#ff1f1f', '#ffb3b3',\n\t\t\t\t// '#3d3d3d', '#6b6b6b', '#6b6b6b', '#ff7b0f', '#ebebeb', '#ffe2e0',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'business',\n\t\t\titems: [\n\t\t\t\t'#3949a0', '#232c61', '#313e87', '#3e4fad', '#556ced', '#d8d7dc',\n\t\t\t\t'#14122c', '#1d1937', '#a03949', '#2f295a', '#c87014', '#f4f4f5',\n\t\t\t\t// '#6e6e6e', '#424242', '#5c5c5c', '#757575', '#425fff', '#d9d9d9',\n\t\t\t\t// '#1f1f1f', '#292929', '#6e6e6e', '#424242', '#db7100', '#f5f5f5',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'charity',\n\t\t\titems: [\n\t\t\t\t'#f5f219', '#f58419', '#f5cc19', '#a8e32a', '#f9f76a', '#fcfbb6',\n\t\t\t\t'#000000', '#262e37', '#74797f', '#e569b1', '#edeef0', '#fefedf',\n\t\t\t\t// '#fffb0f', '#ff830f', '#ffd30f', '#b3ff0f', '#fffc66', '#fffeb3',\n\t\t\t\t// '#000000', '#2e2e2e', '#7a7a7a', '#ff4db5', '#f0f0f0', '#ffffe0',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'construction',\n\t\t\titems: [\n\t\t\t\t'#f7b70b', '#382a02', '#785905', '#b88907', '#dea509', '#fdf1d1',\n\t\t\t\t'#111111', '#a3a3a3', '#f7410b', '#f70b4b', '#d6dde9', '#fef9ea',\n\t\t\t\t// '#ffbc05', '#382900', '#805e00', '#bd8a00', '#e6a800', '#fff3d1',\n\t\t\t\t// '#111111', '#a3a3a3', '#ff3f05', '#ff0548', '#e0e0e0', '#fffaeb',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'consulting',\n\t\t\titems: [\n\t\t\t\t'#21a79b', '#38afa5', '#14665f', '#1c8c83', '#30f2e2', '#a9ddd9',\n\t\t\t\t'#ec4672', '#58d400', '#f0ac00', '#2d6faf', '#2da721', '#e6f5f4',\n\t\t\t\t// '#00c7b6', '#00e6d2', '#007a70', '#00a89a', '#24ffed', '#c2c2c2',\n\t\t\t\t// '#ff3369', '#58d400', '#f0ac00', '#006edb', '#11c700', '#ededed',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'corporate',\n\t\t\titems: [\n\t\t\t\t'#6ab8ee', '#31556e', '#4e86ad', '#5fa3d4', '#70c1fa', '#d2e9f8',\n\t\t\t\t'#36e2c0', '#ffaa3c', '#ee6a76', '#ffa468', '#5feb99', '#ebf4fb',\n\t\t\t\t// '#57b9ff', '#4f4f4f', '#7d7d7d', '#33aaff', '#6bc1ff', '#ccebff',\n\t\t\t\t// '#1affd1', '#ffaa3c', '#ff5765', '#ffa468', '#4dff97', '#e5f4ff',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'courses',\n\t\t\titems: [\n\t\t\t\t'#6bda95', '#2c593d', '#4b9969', '#5ebf83', '#70e69d', '#c2f0d3',\n\t\t\t\t'#31556e', '#ff947d', '#738ed3', '#f791ab', '#ffb67d', '#e2f8eb',\n\t\t\t\t// '#47ff8e', '#424242', '#737373', '#8f8f8f', '#57ff97', '#b3ffcf',\n\t\t\t\t// '#4f4f4f', '#ff947d', '#477bff', '#ff8aa7', '#ffb67d', '#dbffea',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'event',\n\t\t\titems: [\n\t\t\t\t'#f73859', '#380d14', '#781c2b', '#b82a42', '#de334f', '#fdbbc6',\n\t\t\t\t'#151726', '#ffb553', '#30d59b', '#b265e0', '#edeef0', '#ffeaed',\n\t\t\t\t// '#ff2e51', '#47000c', '#940019', '#e00025', '#ff143c', '#ffb8c4',\n\t\t\t\t// '#1f1f1f', '#ffb553', '#05ffa8', '#bc47ff', '#f0f0f0', '#ffeaed',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'gym',\n\t\t\titems: [\n\t\t\t\t'#6b7de0', '#2f3661', '#4d5aa1', '#5f6fc7', '#7284ed', '#e4e8fa',\n\t\t\t\t'#333333', '#ffd367', '#a37fe8', '#e06b7d', '#6dc1e0', '#f4f6fd',\n\t\t\t\t// '#4d67ff', '#474747', '#787878', '#949494', '#6179ff', '#e0e6ff',\n\t\t\t\t// '#333333', '#ffd367', '#9c66ff', '#ff4d67', '#4dcfff', '#f0f3ff',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'lawyer',\n\t\t\titems: [\n\t\t\t\t'#e74c3c', '#69231b', '#a8382c', '#cf4536', '#f55240', '#f9d0cb',\n\t\t\t\t'#4e4353', '#5a505e', '#e7863c', '#38a27f', '#e2e1e3', '#fdeeec',\n\t\t\t\t// '#ff3a24', '#850d00', '#d61500', '#ff1e05', '#ff4c38', '#ffcdc7',\n\t\t\t\t// '#4a4a4a', '#575757', '#ff8324', '#6e6e6e', '#e3e3e3', '#ffedeb',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'photography',\n\t\t\titems: [\n\t\t\t\t'#f7a700', '#382600', '#785200', '#b87d00', '#de9800', '#fde8ba',\n\t\t\t\t'#333333', '#0b5aa0', '#e93d18', '#06c4ed', '#3672a8', '#fff6e3',\n\t\t\t\t// '#f7a700', '#382600', '#785200', '#b87d00', '#de9800', '#ffe8b8',\n\t\t\t\t// '#333333', '#005cad', '#ff2f00', '#00c8f5', '#0078e0', '#fff6e3',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'restaurant',\n\t\t\titems: [\n\t\t\t\t'#e6125d', '#660829', '#a60d43', '#cc1052', '#f21361', '#facfde',\n\t\t\t\t'#0eb88e', '#00946f', '#e04292', '#9b12e6', '#bfde00', '#fef2f6',\n\t\t\t\t// '#fa0057', '#700027', '#b3003e', '#db004d', '#ff055d', '#ffccde',\n\t\t\t\t// '#00c795', '#00946f', '#ff2491', '#a200fa', '#bfde00', '#fff0f5',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'shipping',\n\t\t\titems: [\n\t\t\t\t'#ff0000', '#400000', '#800000', '#bf0000', '#e60000', '#ffb4b4',\n\t\t\t\t'#333333', '#ff822a', '#d63986', '#00ac6b', '#ffb800', '#fff3f3',\n\t\t\t\t// '#ff0000', '#400000', '#800000', '#bf0000', '#e60000', '#ffb4b4',\n\t\t\t\t// '#333333', '#ff822a', '#ff0f83', '#00ac6b', '#ffb800', '#fff3f3',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'spa',\n\t\t\titems: [\n\t\t\t\t'#9dba04', '#313b01', '#667a02', '#86a103', '#a6c704', '#e4ecb9',\n\t\t\t\t'#ba7c04', '#cf54bb', '#049dba', '#1d7094', '#eead2f', '#f2f6dd',\n\t\t\t\t// '#9dbd00', '#333d00', '#667a00', '#88a300', '#aacc00', '#f2ffa8',\n\t\t\t\t// '#bd7e00', '#ff24da', '#009dbd', '#007db3', '#ffb41f', '#f8ffd6',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'travel',\n\t\t\titems: [\n\t\t\t\t'#ee4136', '#6e1f19', '#ad3128', '#d43c31', '#fa4639', '#fef1f0',\n\t\t\t\t'#31353e', '#3e434d', '#ee8036', '#428abc', '#eaebec', '#c3c4c7',\n\t\t\t\t// '#ff3224', '#850900', '#d60e00', '#ff1605', '#ff4133', '#fff1f0',\n\t\t\t\t// '#383838', '#454545', '#ff7b24', '#808080', '#ebebeb', '#c4c4c4',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'wedding',\n\t\t\titems: [\n\t\t\t\t'#d65779', '#572431', '#963e55', '#bd4d6b', '#e35d81', '#f7dfe5',\n\t\t\t\t'#af58a7', '#6bc34b', '#ec8c60', '#50a098', '#57b9d6', '#fdf4f6',\n\t\t\t\t// '#ff2e66', '#3d3d3d', '#6b6b6b', '#858585', '#ff4275', '#ffd6e0',\n\t\t\t\t// '#858585', '#4fff0f', '#ff854d', '#787878', '#2eceff', '#fff0f3',\n\t\t\t],\n\t\t},\n\t];\n\n\tstatic getDefaultPresets(): PresetOptions[]\n\t{\n\t\treturn Generator.cache.remember('default', () => {\n\t\t\tconst presets = [];\n\t\t\tGenerator.defaultPresets.forEach(preset => {\n\t\t\t\tpresets.push({\n\t\t\t\t\tid: preset.id,\n\t\t\t\t\ttype: 'color',\n\t\t\t\t\titems: preset.items.map(item => new ColorValue(hexToHsl(item))),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn presets;\n\t\t});\n\t}\n\n\tstatic getPrimaryColorPreset(): PresetOptions\n\t{\n\t\treturn this.cache.remember('primary', () => {\n\t\t\tconst preset = {\n\t\t\t\tid: 'defaultPrimary',\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tconst primary = new ColorValue(Dom.style(document.documentElement, '--primary').trim());\n\t\t\tpreset.items.push(new ColorValue(primary));\n\n\t\t\tif (primary.getHsl().s <= 10)\n\t\t\t{\n\t\t\t\tconst lBeforeCount = (primary.getHsl().l > 50)\n\t\t\t\t\t? Math.ceil(primary.getHsl().l / 100 * 5)\n\t\t\t\t\t: Math.floor(primary.getHsl().l / 100 * 5);\n\t\t\t\tconst lAfterCount = 5 - lBeforeCount;\n\t\t\t\tconst deltaLBefore = primary.getHsl().l / (lBeforeCount + 1);\n\t\t\t\tconst deltaLAfter = (100 - primary.getHsl().l) / (lAfterCount + 1);\n\t\t\t\tfor (let i = 1; i <= lBeforeCount; i++)\n\t\t\t\t{\n\t\t\t\t\tpreset.items.push(new ColorValue(primary).darken(deltaLBefore * i));\n\t\t\t\t}\n\t\t\t\tfor (let ii = 1; ii <= lAfterCount; ii++)\n\t\t\t\t{\n\t\t\t\t\tpreset.items.push(new ColorValue(primary).lighten(deltaLAfter * ii));\n\t\t\t\t}\n\n\t\t\t\tconst deltaBitrixL = 15;\n\t\t\t\tconst deltaBitrixS = 15;\n\t\t\t\tconst bitrixColor = new ColorValue(Generator.BITRIX_COLOR);\n\t\t\t\tpreset.items[6] = new ColorValue(bitrixColor);\n\n\t\t\t\tpreset.items[7] = new ColorValue(bitrixColor.darken(deltaBitrixL).saturate(deltaBitrixS));\n\t\t\t\tpreset.items[8] = new ColorValue(bitrixColor.darken(deltaBitrixL).saturate(deltaBitrixS));\n\t\t\t\tbitrixColor.lighten(deltaBitrixL * 2).desaturate(deltaBitrixS * 2);\n\n\t\t\t\tpreset.items[9] = new ColorValue(bitrixColor.lighten(deltaBitrixL).desaturate(deltaBitrixS));\n\t\t\t\tpreset.items[10] = new ColorValue(bitrixColor.lighten(deltaBitrixL).desaturate(deltaBitrixS));\n\t\t\t\tbitrixColor.darken(deltaBitrixL * 2).saturate(deltaBitrixS * 2);\n\n\t\t\t\tpreset.items[11] = new ColorValue(bitrixColor).adjustHue(180);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst deltaL = (90 - primary.getHsl().l) / 3;\n\t\t\t\tconst deltaL2 = (primary.getHsl().l - 10) / 3;\n\t\t\t\tconst deltaS = (90 - primary.getHsl().s) / 3;\n\t\t\t\tconst deltaS2 = (primary.getHsl().s - 10) / 3;\n\n\t\t\t\tpreset.items[1] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tpreset.items[2] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tpreset.items[3] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tprimary.lighten(deltaL2 * 3).desaturate(deltaS * 3);\n\n\t\t\t\tpreset.items[4] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tpreset.items[5] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tpreset.items[11] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tprimary.saturate(deltaS2 * 3).darken(deltaL * 3);\n\n\t\t\t\tpreset.items[7] = new ColorValue(primary.adjustHue(40));\n\t\t\t\tpreset.items[8] = new ColorValue(primary.adjustHue(-80));\n\t\t\t\tpreset.items[9] = new ColorValue(primary.adjustHue(180));\n\t\t\t\tpreset.items[6] = new ColorValue(primary.adjustHue(40));\n\t\t\t\tpreset.items[10] = new ColorValue(primary.adjustHue(40));\n\t\t\t}\n\t\t\treturn preset;\n\t\t});\n\t}\n\n\tstatic getGradientByColorOptions(options: PresetOptions): PresetOptions\n\t{\n\t\tconst items = [];\n\t\tconst pairs = [\n\t\t\t[1, 2],\n\t\t\t[1, 4],\n\t\t\t[5, 12],\n\t\t\t[1, 8],\n\t\t\t[8, 9],\n\t\t\t[1, 9],\n\t\t\t[10, 7],\n\t\t\t[7, 11],\n\t\t];\n\t\tpairs.forEach(pair => {\n\t\t\titems.push(new GradientValue({\n\t\t\t\tfrom: new ColorValue(options.items[pair[0] - 1]),\n\t\t\t\tto: new ColorValue(options.items[pair[1] - 1]),\n\t\t\t\tangle: GradientValue.DEFAULT_ANGLE,\n\t\t\t\ttype: GradientValue.DEFAULT_TYPE,\n\t\t\t}));\n\t\t});\n\n\t\treturn {\n\t\t\ttype: gradientType,\n\t\t\titems: items,\n\t\t};\n\t}\n}\n","import {Tag, Dom, Event, Type, Cache} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {IColorValue} from '../../types/i_color_value';\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport {PresetOptions, defaultType, gradientType} from './types/preset-options';\nimport Generator from './generator';\n\nimport './css/preset.css';\n\nexport default class Preset extends EventEmitter\n{\n\tid: string;\n\ttype: 'color' | 'gradient';\n\titems: [ColorValue | GradientValue];\n\tactiveItem: string | IColorValue | null;\n\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options: PresetOptions)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Preset');\n\n\t\tthis.id = options.id;\n\t\tthis.type = options.type || defaultType;\n\t\tthis.items = options.items;\n\t\tthis.activeItem = null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetGradientPreset(): Preset\n\t{\n\t\tconst options = (this.type === gradientType)\n\t\t\t? {type: gradientType, items: this.items}\n\t\t\t: Generator.getGradientByColorOptions({items: this.items});\n\n\t\treturn new Preset(options);\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-preset\">\n\t\t\t\t\t${this.items.map((item) => {\n\t\t\t\t\t\treturn this.getItemLayout(item.getName());\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetItemLayout(name: string): HTMLDivElement\n\t{\n\t\treturn this.cache.remember(name, () => {\n\t\t\tconst color = this.getItemByName(name);\n\t\t\tconst style = Type.isString(color) ? color : color.getStyleString();\n\t\t\tconst item = Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"landing-ui-field-color-preset-item\"\n\t\t\t\t\tstyle=\"background: ${style}\"\n\t\t\t\t\tdata-name=\"${name}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t\tEvent.bind(item, 'click', this.onItemClick.bind(this));\n\n\t\t\treturn item;\n\t\t});\n\t}\n\n\tgetItemByName(name: string): string | IColorValue | null\n\t{\n\t\treturn this.items.find(item => name === item.getName()) || null;\n\t}\n\n\tisPresetValue(value: ColorValue | GradientValue | null): boolean\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn this.items.some(item => {\n\t\t\tif (item instanceof ColorValue && value instanceof ColorValue)\n\t\t\t{\n\t\t\t\treturn ColorValue.compare(item, new ColorValue(value).setOpacity(1));\n\t\t\t}\n\t\t\telse if (item instanceof GradientValue && value instanceof GradientValue)\n\t\t\t{\n\t\t\t\treturn GradientValue.compare(item, value, false);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tonItemClick(event: MouseEvent)\n\t{\n\t\tthis.setActiveItem(event.currentTarget.dataset.name);\n\n\t\tlet value = null;\n\t\tif (this.activeItem !== null)\n\t\t{\n\t\t\tvalue = this.activeItem instanceof GradientValue\n\t\t\t\t? new GradientValue(this.activeItem)\n\t\t\t\t: new ColorValue(this.activeItem);\n\t\t}\n\n\t\tthis.emit('onChange', {color: value});\n\t}\n\n\tsetActiveItem(name: string)\n\t{\n\t\tthis.activeItem = this.getItemByName(name);\n\n\t\tthis.items.forEach((item) => {\n\t\t\tconst itemName = item.getName();\n\t\t\tif (name === itemName)\n\t\t\t{\n\t\t\t\tDom.addClass(this.getItemLayout(itemName), Preset.ACTIVE_CLASS);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getItemLayout(itemName), Preset.ACTIVE_CLASS);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetActiveValue(value: ColorValue | GradientValue | null)\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tthis.setActiveItem(\n\t\t\t\t\tnew GradientValue(value)\n\t\t\t\t\t\t.setAngle(GradientValue.DEFAULT_ANGLE)\n\t\t\t\t\t\t.setType(GradientValue.DEFAULT_TYPE)\n\t\t\t\t\t\t.getName()\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setActiveItem(\n\t\t\t\t\tnew ColorValue(value)\n\t\t\t\t\t\t.setOpacity(1)\n\t\t\t\t\t\t.getName()\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetActiveHex(hexValue)\n\t{\n\t\tthis.items.forEach((item) => {\n\t\t\tconst hexItem = item.getHex();\n\t\t\tif (hexValue === hexItem)\n\t\t\t{\n\t\t\t\tthis.setActiveItem(item.getName());\n\t\t\t}\n\t\t});\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.items.forEach(item => {\n\t\t\tDom.removeClass(this.getItemLayout(item.getName()), Preset.ACTIVE_CLASS);\n\t\t});\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.items.some(item => {\n\t\t\treturn Dom.hasClass(this.getItemLayout(item.getName()), Preset.ACTIVE_CLASS);\n\t\t});\n\t}\n}","import 'ui.design-tokens';\nimport 'ui.fonts.opensans';\n\nimport {Tag, Text, Dom, Event, Type, Cache, Loc} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Popup, PopupManager} from 'main.popup';\n\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport Generator from \"./generator\";\n\nimport './css/preset_collection.css';\nimport {PresetOptions} from \"./types/preset-options\";\nimport Preset from \"./preset\";\n\nexport default class PresetCollection extends EventEmitter\n{\n\tstatic globalActiveId: number | string | null = null;\n\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\tpresets: {\n\t\t[id: string]: PresetOptions\n\t} = {};\n\tactiveId: number | string | null = null;\n\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.PresetCollection');\n\t\tthis.popupId = 'presets-popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.onPresetClick = this.onPresetClick.bind(this);\n\t\tEvent.bind(this.getOpenButton(), 'click', () => {\n\t\t\tthis.getPopup().toggle();\n\t\t});\n\t\tthis.onPresetChangeGlobal = this.onPresetChangeGlobal.bind(this);\n\t\tEventEmitter.subscribe('BX.Landing.UI.Field.Color.PresetCollection:onChange', this.onPresetChangeGlobal);\n\t}\n\n\taddDefaultPresets()\n\t{\n\t\tthis.addPreset(Generator.getPrimaryColorPreset());\n\t\tGenerator.getDefaultPresets().map((item) => {\n\t\t\tthis.addPreset(item);\n\t\t});\n\t}\n\n\taddPreset(options: PresetOptions)\n\t{\n\t\tthis.cache.delete('popupLayout');\n\t\tif (!Object.keys(this.presets).length || !(options.id in this.presets))\n\t\t{\n\t\t\tthis.presets[options.id] = options;\n\t\t}\n\t}\n\n\tgetGlobalActiveId(): number | string | null\n\t{\n\t\treturn PresetCollection.globalActiveId;\n\t}\n\n\tgetActiveId(): number | string\n\t{\n\t\treturn this.getGlobalActiveId() || this.getDefaultPreset().getId();\n\t}\n\n\tgetActivePreset(): Preset\n\t{\n\t\treturn this.getPresetById(this.getActiveId());\n\t}\n\n\tgetDefaultPreset(): ?Preset\n\t{\n\t\treturn Object.keys(this.presets).length\n\t\t\t? this.getPresetById(Object.keys(this.presets)[0])\n\t\t\t: null;\n\t}\n\n\tgetPresetById(id: number | string): ?Preset\n\t{\n\t\tif (id in this.presets)\n\t\t{\n\t\t\treturn this.cache.remember(id, () => new Preset(this.presets[id]));\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetAllPresets(): Array<Preset>\n\t{\n\t\treturn Object.keys(this.presets)\n\t\t\t.map((id) => this.getPresetById(id))\n\t\t\t.filter(Boolean);\n\t}\n\n\tgetPresetByItemValue(value: ColorValue | GradientValue | null): ?Preset\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (let id in this.presets)\n\t\t{\n\t\t\tconst preset = this.getPresetById(id);\n\t\t\tif (preset && value instanceof ColorValue)\n\t\t\t{\n\t\t\t\tif (preset.isPresetValue(value))\n\t\t\t\t{\n\t\t\t\t\treturn preset;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (preset && value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tif (preset.getGradientPreset().isPresetValue(value))\n\t\t\t\t{\n\t\t\t\t\treturn preset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-presets\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-presets-left\">\n\t\t\t\t\t\t<span class=\"landing-ui-field-color-presets-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_TITLE')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"landing-ui-field-color-presets-right\">${this.getOpenButton()}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetOpenButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('openButton', () => {\n\t\t\treturn Tag.render`<span class=\"landing-ui-field-color-presets-open\">\n\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_MORE')}\n\t\t\t</span>`;\n\t\t});\n\t}\n\n\tgetTitleContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleContainer', () => {\n\t\t\treturn this.getLayout().querySelector('.landing-ui-field-color-presets-left');\n\t\t});\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\t// todo: bind to event target? or need button\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'presets-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.getOpenButton(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\twidth: 280,\n\t\t\t\toffsetLeft: -200,\n\t\t\t\tcontent: this.getPopupLayout(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopupLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupLayout', () => {\n\t\t\tconst layouts = Tag.render`<div class=\"landing-ui-field-color-presets-popup\">\n\t\t\t\t<div class=\"landing-ui-field-color-presets-popup-title\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_MORE_COLORS')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-presets-popup-inner\"></div>\n\t\t\t</div>`;\n\t\t\tconst innerLayouts = layouts.querySelector('.landing-ui-field-color-presets-popup-inner');\n\t\t\tfor (const presetId in this.presets)\n\t\t\t{\n\t\t\t\tconst layout = this.getPresetLayout(presetId);\n\t\t\t\tif (presetId === this.getActiveId())\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(layout, PresetCollection.ACTIVE_CLASS);\n\t\t\t\t\tthis.activeId = presetId;\n\t\t\t\t}\n\t\t\t\tEvent.bind(layout, 'click', this.onPresetClick);\n\t\t\t\tDom.append(layout, innerLayouts);\n\t\t\t}\n\n\t\t\treturn layouts;\n\t\t});\n\t}\n\n\tgetPresetLayout(presetId: string | number): HTMLDivElement\n\t{\n\t\treturn this.cache.remember(presetId + 'layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-presets-preset\" data-id=\"${presetId}\">\n\t\t\t\t\t${\n\t\t\t\t\t\tthis.presets[presetId].items.map((item) => {\n\t\t\t\t\t\t\treturn Tag.render`<div\n\t\t\t\t\t\t\t\tclass=\"landing-ui-field-color-presets-preset-item\"\n\t\t\t\t\t\t\t\tstyle=\"background: ${Type.isString(item) ? item : item.getStyleString()}\"\n\t\t\t\t\t\t\t></div>`;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonPresetClick(event: MouseEvent)\n\t{\n\t\tthis.getPopup().close();\n\t\tthis.setActiveItem(event.currentTarget.dataset.id);\n\t\tthis.emit('onChange', {presetId: this.getActiveId()});\n\t}\n\n\tonPresetChangeGlobal(event: BaseEvent)\n\t{\n\t\tif (event.getData().presetId !== this.activeId)\n\t\t{\n\t\t\tthis.setActiveItem(event.getData().presetId);\n\t\t\tthis.emit('onChange', event);\n\t\t}\n\t}\n\n\tsetActiveItem(presetId: string)\n\n\t{\n\t\tif (\n\t\t\tpresetId !== null\n\t\t\t&& presetId !== this.activeId\n\t\t)\n\t\t{\n\t\t\tPresetCollection.globalActiveId = presetId;\n\t\t\tthis.activeId = presetId;\n\t\t\tfor (const id in this.presets)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getPresetLayout(id), PresetCollection.ACTIVE_CLASS);\n\t\t\t\tif (id === presetId)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.getPresetLayout(id), PresetCollection.ACTIVE_CLASS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive()\n\t{\n\t\tfor (const presetId in this.presets)\n\t\t{\n\t\t\tDom.removeClass(this.getPresetLayout(presetId), PresetCollection.ACTIVE_CLASS);\n\t\t}\n\t}\n}\n","import { Cache, Event, Tag, Dom, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport { Backend } from 'landing.backend';\n\nimport isHex from '../../internal/is-hex';\nimport './css/recent.css';\n\nexport default class Recent extends EventEmitter\n{\n\tstatic USER_OPTION_NAME = 'color_field_recent_colors';\n\tstatic MAX_ITEMS = 24;\n\n\tstatic items: [] = [];\n\tstatic itemsLoaded: boolean = false;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Recent');\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.getLayoutContainer();\n\t}\n\n\tgetLayoutContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-recent\"></div>`;\n\t\t});\n\t}\n\n\tstatic initItems()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tif (Recent.itemsLoaded)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBackend.getInstance()\n\t\t\t\t\t.action('Utils::getUserOption', { name: Recent.USER_OPTION_NAME })\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tif (result && Type.isString(result.items))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tRecent.items = [];\n\t\t\t\t\t\t\tresult.items.split(',').forEach((item) => {\n\t\t\t\t\t\t\t\tif (isHex((item)) && Recent.items.length < Recent.MAX_ITEMS)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tRecent.items.push(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tRecent.itemsLoaded = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tbuildItemsLayout(activeHex = null): Recent\n\t{\n\t\tif (activeHex)\n\t\t{\n\t\t\tthis.activeHex = activeHex;\n\t\t}\n\t\tDom.clean(this.getLayoutContainer());\n\t\tthis.itemElements = [];\n\n\t\tRecent.items.forEach((item) => {\n\t\t\tif (isHex(item))\n\t\t\t{\n\t\t\t\tconst isActive = this.activeHex === item;\n\t\t\t\tconst itemLayout = Tag.render`\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"landing-ui-field-color-recent-item${isActive ? ' active' : ''}\"\n\t\t\t\t\t\tstyle=\"background:${item}\"\n\t\t\t\t\t\tdata-value=\"${item}\"\n\t\t\t\t\t></div>\n\t\t\t\t`;\n\t\t\t\tthis.itemElements.push(itemLayout);\n\t\t\t\tEvent.bind(itemLayout, 'click', () => this.onItemClick(event, itemLayout));\n\t\t\t\tDom.append(itemLayout, this.getLayoutContainer());\n\t\t\t}\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tonItemClick(event: MouseEvent, clickedElement: HTMLElement)\n\t{\n\t\tthis.itemElements.forEach((el) => BX.Dom.removeClass(el, 'active'));\n\t\tBX.Dom.addClass(clickedElement, 'active');\n\t\tthis.activeHex = clickedElement.dataset.value;\n\n\t\tthis.emit('onChange', { hex: event.currentTarget.dataset.value });\n\t}\n\n\taddItem(hex: string): Recent\n\t{\n\t\tif (isHex(hex))\n\t\t{\n\t\t\tconst pos = Recent.items.indexOf(hex);\n\t\t\tif (pos !== -1)\n\t\t\t{\n\t\t\t\tRecent.items.splice(pos, 1);\n\t\t\t}\n\t\t\tRecent.items.unshift(hex);\n\t\t\tif (Recent.items.length > Recent.MAX_ITEMS)\n\t\t\t{\n\t\t\t\tRecent.items.splice(Recent.MAX_ITEMS);\n\t\t\t}\n\n\t\t\tthis.buildItemsLayout();\n\t\t\tthis.saveItems();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsaveItems(): Recent\n\t{\n\t\tif (Recent.items.length > 0)\n\t\t{\n\t\t\tBX.userOptions.save('landing', Recent.USER_OPTION_NAME, 'items', Recent.items);\n\t\t}\n\n\t\treturn this;\n\t}\n}\n","import { Cache, Event, Tag, Dom, Type, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Backend } from 'landing.backend';\nimport isHex from '../../internal/is-hex';\nimport './css/favourite.css';\n\nexport default class Favourite extends EventEmitter\n{\n\tstatic USER_OPTION_NAME: string = 'color_field_favourite_colors';\n\tstatic MAX_ITEMS: number = 80;\n\n\tstatic items: string[] = [];\n\tstatic itemsLoaded: boolean = false;\n\n\tstatic MODE_CLASSES = {\n\t\tVIEW: 'view-mode',\n\t\tEDIT: 'edit-mode',\n\t};\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Favourite');\n\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.itemsContainer = null;\n\t\tthis.isEditMode = false;\n\t\tthis.activeHex = null;\n\t\tthis.itemElements = [];\n\t\tthis.buttonChange = null;\n\t\tthis.buttonSave = null;\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.getLayoutContainer();\n\t}\n\n\tgetLayoutContainer(): HTMLDivElement\n\t{\n\t\tthis.buttonChange = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-favourite-head-button-change\">\n\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR_FAVOURITES_BUTTON_CHANGE')}\n\t\t\t</div>\n\t\t`;\n\t\tthis.buttonSave = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-favourite-head-button-save\" hidden>\n\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR_FAVOURITES_BUTTON_SAVE')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.buttonChange, 'click', () => this.onChangeButtonClick());\n\t\tEvent.bind(this.buttonSave, 'click', () => this.onSaveButtonClick());\n\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tthis.itemsContainer = Tag.render`<div class=\"landing-ui-field-color-favourite-colors view-mode\"></div>`;\n\t\t\tDom.append(this.getItemsLayout(), this.itemsContainer);\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"landing-ui-field-color-favourite-head\">\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-favourite-head-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR_FAVOURITES_TITLE')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-favourite-head-buttons\">\n\t\t\t\t\t\t\t${this.buttonChange}\n\t\t\t\t\t\t\t${this.buttonSave}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.itemsContainer}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tstatic initItems(): Promise<void>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tif (Favourite.itemsLoaded)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBackend.getInstance()\n\t\t\t\t\t.action('Utils::getUserOption', { name: Favourite.USER_OPTION_NAME })\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tif (result && Type.isString(result.items))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tFavourite.items = [];\n\t\t\t\t\t\t\tresult.items.split(',').forEach((item) => {\n\t\t\t\t\t\t\t\tif (isHex((item)) && Favourite.items.length < Favourite.MAX_ITEMS)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tFavourite.items.push(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tFavourite.itemsLoaded = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tgetItemsLayout(activeHex: string | null = null): HTMLElement\n\t{\n\t\tconst itemLayoutButtonAdd = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-favourite-item-container\">\n\t\t\t\t<div class=\"landing-ui-field-color-favourite-item-add\"></div>\n\t\t\t</div>\n\t\t`;\n\t\tEvent.bind(itemLayoutButtonAdd, 'click', () => this.onAddButtonClick());\n\n\t\tif (activeHex)\n\t\t{\n\t\t\tthis.setActiveHex(activeHex);\n\t\t}\n\n\t\tthis.itemElements = [];\n\n\t\tconst itemsContainer = Tag.render`<div class=\"landing-ui-field-color-favourite-items-container\"></div>`;\n\t\tDom.append(itemLayoutButtonAdd, itemsContainer);\n\n\t\tFavourite.items.forEach((item) => {\n\t\t\tif (isHex(item))\n\t\t\t{\n\t\t\t\tconst isActive = this.activeHex === item;\n\t\t\t\tconst removeButton = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-favourite-item-remove-button\"${this.isEditMode ? '' : ' hidden'}></div>\n\t\t\t\t`;\n\t\t\t\tconst itemLayout = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-favourite-item-container ${isActive ? ' active' : ''}\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"landing-ui-field-color-favourite-item\"\n\t\t\t\t\t\t\tstyle=\"background:${item}\"\n\t\t\t\t\t\t\tdata-value=\"${item}\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t${removeButton}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\tthis.itemElements.push(itemLayout);\n\n\t\t\t\tconst colorItem = itemLayout.querySelector('.landing-ui-field-color-favourite-item');\n\t\t\t\tif (colorItem)\n\t\t\t\t{\n\t\t\t\t\tEvent.bind(colorItem, 'click', (event) => this.onItemClick(event, itemLayout));\n\t\t\t\t}\n\n\t\t\t\tif (removeButton)\n\t\t\t\t{\n\t\t\t\t\tEvent.bind(removeButton, 'click', (event) => this.onRemoveButtonClick(event, item, itemLayout));\n\t\t\t\t}\n\n\t\t\t\tDom.append(itemLayout, itemsContainer);\n\t\t\t}\n\t\t});\n\n\t\treturn itemsContainer;\n\t}\n\n\tbuildItemsLayout(activeHex: string | null = null)\n\t{\n\t\tif (activeHex)\n\t\t{\n\t\t\tthis.setActiveHex(activeHex);\n\t\t}\n\n\t\tif (this.itemsContainer)\n\t\t{\n\t\t\tDom.clean(this.itemsContainer);\n\t\t\tDom.append(this.getItemsLayout(), this.itemsContainer);\n\t\t}\n\t}\n\n\tonItemClick(event: MouseEvent, clickedElement: HTMLElement)\n\t{\n\t\tthis.itemElements.forEach((el) => BX.Dom.removeClass(el, 'active'));\n\t\tBX.Dom.addClass(clickedElement, 'active');\n\t\tthis.setActiveHex(clickedElement.dataset.value);\n\n\t\tthis.emit('onSelectColor', { hex: event.currentTarget.dataset.value });\n\t}\n\n\tonAddButtonClick(): void\n\t{\n\t\tif (this.activeHex !== null)\n\t\t{\n\t\t\tthis.addItem(this.activeHex);\n\t\t}\n\n\t\tthis.emit('onAddColor', { hex: this.activeHex });\n\t}\n\n\tonRemoveButtonClick(event, hex): void\n\t{\n\t\tevent.stopPropagation();\n\t\tthis.removeItem(hex);\n\n\t\tthis.emit('onRemoveColor', { hex });\n\t}\n\n\tonChangeButtonClick(): void\n\t{\n\t\tthis.emit('onEditColors');\n\n\t\tthis.isEditMode = true;\n\n\t\tBX.Dom.removeClass(this.itemsContainer, Favourite.MODE_CLASSES.VIEW);\n\t\tBX.Dom.addClass(this.itemsContainer, Favourite.MODE_CLASSES.EDIT);\n\n\t\tif (this.buttonChange && this.buttonSave)\n\t\t{\n\t\t\tthis.buttonChange.setAttribute('hidden', 'true');\n\t\t\tthis.buttonSave.removeAttribute('hidden');\n\t\t}\n\n\t\tconst removeButtons = this.itemsContainer\n\t\t\t? this.itemsContainer.querySelectorAll('.landing-ui-field-color-favourite-item-remove-button')\n\t\t\t: [];\n\t\tremoveButtons.forEach((btn) => btn.removeAttribute('hidden'));\n\t}\n\n\tonSaveButtonClick(): void\n\t{\n\t\tthis.emit('onSaveColors');\n\n\t\tthis.isEditMode = false;\n\n\t\tBX.Dom.addClass(this.itemsContainer, Favourite.MODE_CLASSES.VIEW);\n\t\tBX.Dom.removeClass(this.itemsContainer, Favourite.MODE_CLASSES.EDIT);\n\n\t\tif (this.buttonChange && this.buttonSave)\n\t\t{\n\t\t\tthis.buttonSave.setAttribute('hidden', 'true');\n\t\t\tthis.buttonChange.removeAttribute('hidden');\n\t\t}\n\n\t\tconst removeButtons = this.itemsContainer\n\t\t\t? this.itemsContainer.querySelectorAll('.landing-ui-field-color-favourite-item-remove-button')\n\t\t\t: [];\n\t\tremoveButtons.forEach((btn) => btn.setAttribute('hidden', ''));\n\t}\n\n\taddItem(hex: string): Favourite\n\t{\n\t\tif (isHex(hex))\n\t\t{\n\t\t\tconst pos = Favourite.items.indexOf(hex);\n\t\t\tif (pos !== -1)\n\t\t\t{\n\t\t\t\tFavourite.items.splice(pos, 1);\n\t\t\t}\n\t\t\tFavourite.items.unshift(hex);\n\t\t\tif (Favourite.items.length > Favourite.MAX_ITEMS)\n\t\t\t{\n\t\t\t\tFavourite.items.splice(Favourite.MAX_ITEMS);\n\t\t\t}\n\n\t\t\tthis.buildItemsLayout(hex);\n\t\t\tthis.saveItems();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tremoveItem(hex: string): Favourite\n\t{\n\t\tif (isHex(hex))\n\t\t{\n\t\t\tconst index = Favourite.items.indexOf(hex);\n\t\t\tif (index !== -1)\n\t\t\t{\n\t\t\t\tFavourite.items.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.buildItemsLayout();\n\t\t\tthis.saveItems();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsaveItems(): Favourite\n\t{\n\t\tif (Favourite.items.length > 0)\n\t\t{\n\t\t\tBX.userOptions.save('landing', Favourite.USER_OPTION_NAME, 'items', Favourite.items);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsetActiveHex(hex: string): void\n\t{\n\t\tthis.activeHex = hex;\n\t}\n}\n","import { Event, Tag, Text, Type, Loc } from 'main.core';\nimport { Popup, PopupManager } from 'main.popup';\nimport { BaseEvent } from 'main.core.events';\nimport BaseControl from '../base_control/base_control';\nimport { PageObject } from 'landing.pageobject';\n\nimport Hex from '../hex/hex';\nimport ColorValue from '../../color_value';\nimport Spectrum from '../spectrum/spectrum';\nimport PresetCollection from '../../layout/preset/preset_collection';\nimport Recent from '../../layout/recent/recent';\nimport Favourite from '../../layout/favourite/favourite';\nimport isHex from '../../internal/is-hex';\n\nimport './css/color_popup.css';\n\nexport default class ColorPopup extends BaseControl\n{\n\tstatic TABS = {\n\t\tRECENT: 'recent',\n\t\tSPECTRUM: 'spectrum',\n\t\tPRESET: 'preset',\n\t};\n\n\tstatic ANALYTICS = {\n\t\tCATEGORY_DESIGN: 'design_slider',\n\t\tCOLOR_TYPE_GRADIENT: 'gradient',\n\t\tCOLOR_TYPE_SOLID: 'solid',\n\t\tEVENTS: {\n\t\t\tOPEN_POPUP: 'open_color_popup',\n\t\t\tCHANGE_TAB: 'change_color_tab',\n\t\t\tSELECT_COLOR: 'select_color',\n\t\t\tADD_MY_COLOR: 'add_my_color',\n\t\t},\n\t\tTYPE_COLORS: {\n\t\t\tRECENT: 'recent',\n\t\t\tSPECTRUM: 'spectrum',\n\t\t\tPRESET: 'preset',\n\t\t\tMY: 'my',\n\t\t\tHEX: 'hex',\n\t\t},\n\t};\n\n\tstatic HEX_DEFAULT_TEXT: string = '#hex';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\n\t\t//todo: check for inline twice call\n\n\t\tthis.options = options;\n\t\tthis.hexPreview = options.hexPreview;\n\t\tthis.isHexPreviewMode = options.hexPreviewMode;\n\n\t\tthis.isNeedCalcPopupOffset = options.isNeedCalcPopupOffset;\n\t\tthis.isNeedResetPopupWhenOpen = options.isNeedResetPopupWhenOpen;\n\n\t\tthis.popupId = `colorpopup_${Text.getRandom()}`;\n\t\tthis.popupTargetContainer = options.contentRoot;\n\t\tthis.activeTab = ColorPopup.TABS.RECENT;\n\n\t\tif (this.hexPreview)\n\t\t{\n\t\t\tthis.bindElement = this.hexPreview.getLayout();\n\t\t\tthis.hexPreview.subscribe('onValidInput', this.onHexPreviewValidInput.bind(this));\n\t\t}\n\n\t\tif (this.options.bindElement)\n\t\t{\n\t\t\tthis.bindElement = this.options.bindElement;\n\t\t}\n\n\t\tif (this.options.bindElement)\n\t\t{\n\t\t\tthis.targetContainer = this.options.targetContainer;\n\t\t}\n\n\t\tthis.tabButtons = {};\n\t\tthis.tabContents = {};\n\n\t\tthis.init();\n\t\tthis.initAnalytics(options.analytics);\n\t}\n\n\tinit()\n\t{\n\t\tthis.hex = new Hex();\n\t\tthis.hex.subscribe('onChange', this.onHexChange.bind(this));\n\n\t\tthis.recent = new Recent();\n\t\tthis.recent.subscribe('onChange', this.onRecentChange.bind(this));\n\n\t\tthis.spectrum = new Spectrum(this.options);\n\t\tthis.spectrum.subscribe('onChange', this.onSpectrumChange.bind(this));\n\t\tthis.spectrum.subscribe('onPickerDragStart', this.onSpectrumDragStart.bind(this));\n\t\tthis.spectrum.subscribe('onPickerDragEnd', this.onSpectrumDragEnd.bind(this));\n\n\t\tthis.presetCollection = new PresetCollection(this.options);\n\t\tthis.presetCollection.addDefaultPresets();\n\t\tthis.presets = this.presetCollection.getAllPresets();\n\t\tthis.presets.forEach((preset) => {\n\t\t\tpreset.subscribe('onChange', this.onPresetChange.bind(this));\n\t\t});\n\n\t\tthis.favourite = new Favourite();\n\t\tthis.favourite.subscribe('onSelectColor', this.onFavouriteSelect.bind(this));\n\t\tthis.favourite.subscribe('onAddColor', this.onAddFavouriteColor.bind(this));\n\t\tthis.favourite.subscribe('onRemoveColor', this.onRemoveFavouriteColor.bind(this));\n\t\tthis.favourite.subscribe('onEditColors', this.onEditFavouriteColors.bind(this));\n\t\tthis.favourite.subscribe('onSaveColors', this.onSaveFavouriteColors.bind(this));\n\t}\n\n\tinitAnalytics(options)\n\t{\n\t\tthis.analyticsCategory = ColorPopup.ANALYTICS.CATEGORY_DESIGN;\n\t\tif (this.hexPreview)\n\t\t{\n\t\t\tthis.analyticsCElement = this.isHexPreviewMode\n\t\t\t\t? ColorPopup.ANALYTICS.COLOR_TYPE_GRADIENT\n\t\t\t\t: ColorPopup.ANALYTICS.COLOR_TYPE_SOLID;\n\t\t}\n\t\tthis.analyticsCSubSection = this.options.style;\n\t\tif (options)\n\t\t{\n\t\t\tif (options.category)\n\t\t\t{\n\t\t\t\tthis.analyticsCategory = options.category;\n\t\t\t}\n\n\t\t\tif (options.c_sub_section)\n\t\t\t{\n\t\t\t\tthis.analyticsCSubSection = options.c_sub_section;\n\t\t\t}\n\n\t\t\tif (options.p1)\n\t\t\t{\n\t\t\t\tthis.analyticsP1 = options.p1;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tlet offsetLeft = 0;\n\t\tlet offsetTop = 3;\n\t\tconst popupWidth = 287;\n\n\t\tconst editorPanelCurrentElement = BX.Landing.UI.Panel.EditorPanel.getInstance().currentElement;\n\t\tif (\n\t\t\teditorPanelCurrentElement !== null\n\t\t\t&& editorPanelCurrentElement.ownerDocument !== BX.Landing.PageObject.getRootWindow().document\n\t\t\t&& !this.hexPreview\n\t\t)\n\t\t{\n\t\t\toffsetTop -= 66;\n\t\t}\n\n\t\tif (this.bindElement && this.isNeedCalcPopupOffset !== false)\n\t\t{\n\t\t\tconst layoutClientRect = this.bindElement.getBoundingClientRect();\n\t\t\tconst panelWidth = 320;\n\t\t\tconst panelPaddingRight = 12;\n\t\t\toffsetLeft = ((panelWidth - popupWidth) - panelPaddingRight) - layoutClientRect.x;\n\t\t}\n\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'landing-ui-field-color-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tautoHideHandler: (event: PointerEvent) => {\n\t\t\t\t\tconst target = event.target;\n\t\t\t\t\tif (!this.hexPreview)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn !(target && target.closest('.popup-window-content'));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn target !== this.hexPreview.getInput()\n\t\t\t\t\t\t&& !this.getPopup().contentContainer.contains(target);\n\t\t\t\t},\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 16,\n\t\t\t\twidth: popupWidth,\n\t\t\t\toffsetTop,\n\t\t\t\toffsetLeft,\n\t\t\t\tcontent: this.getPopupContent(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer ?? null,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.favourite.onSaveButtonClick();\n\t\t\t\t\t\tthis.emit('onPopupClose');\n\t\t\t\t\t},\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\tthis.emit('onPopupShow');\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopupContent(): HTMLDivElement\n\t{\n\t\tconst tabNames = [\n\t\t\t{ key: ColorPopup.TABS.RECENT, label: Loc.getMessage('LANDING_FIELD_COLOR_TAB_RECENT') },\n\t\t\t{ key: ColorPopup.TABS.SPECTRUM, label: Loc.getMessage('LANDING_FIELD_COLOR_TAB_SPECTRUM') },\n\t\t\t{ key: ColorPopup.TABS.PRESET, label: Loc.getMessage('LANDING_FIELD_COLOR_TAB_PRESETS') },\n\t\t];\n\n\t\tconst tabButtonsRow = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-tabs\"></div>\n\t\t`;\n\n\t\ttabNames.forEach((tab) => {\n\t\t\tconst btn = Tag.render`\n\t\t\t\t<button \n\t\t\t\t\tclass=\"landing-ui-field-color-popup-tab-btn\"\n\t\t\t\t\tdata-tab=\"${tab.key}\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>${tab.label}</button>\n\t\t\t`;\n\t\t\tBX.Dom.append(btn, tabButtonsRow);\n\t\t\tthis.tabButtons[tab.key] = btn;\n\t\t\tEvent.bind(btn, 'click', () => this.setActiveTab(tab.key, true));\n\t\t});\n\n\t\tconst recentTab = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-container-recent\">\n\t\t\t\t${this.recent.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t\tconst spectrumTab = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-container-spectrum\" hidden>\n\t\t\t\t${this.spectrum.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t\tconst presetsTab = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-container-presets\" hidden>\n\t\t\t\t${this.getPresetsLayout()}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.tabContents = {\n\t\t\trecent: recentTab,\n\t\t\tspectrum: spectrumTab,\n\t\t\tpreset: presetsTab,\n\t\t};\n\n\t\tconst favouriteColors = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-favourite-colors\">\n\t\t\t\t${this.favourite.getLayout()}\n\t\t\t</div>\n\t\t`;\n\n\t\tif (!this.hexPreview)\n\t\t{\n\t\t\tthis.colorPickerPopup = this.getColorPickerPopupLayout();\n\t\t\tEvent.bind(this.colorPickerPopup, 'input', this.onColorPopupInput.bind(this));\n\t\t}\n\n\t\tconst content = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-container\">\n\t\t\t\t${this.colorPickerPopup ?? null}\n\t\t\t\t${tabButtonsRow}\n\t\t\t\t${recentTab}\n\t\t\t\t${spectrumTab}\n\t\t\t\t${presetsTab}\n\t\t\t\t${favouriteColors}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(content, 'click', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t});\n\n\t\tthis.setActiveTab(this.activeTab);\n\n\t\treturn content;\n\t}\n\n\tonPopupOpenClick(event, bindElement = null)\n\t{\n\t\tif (bindElement !== null)\n\t\t{\n\t\t\tthis.bindElement = bindElement;\n\t\t}\n\n\t\tif (!this.hexPreview && this.isNeedResetPopupWhenOpen !== false)\n\t\t{\n\t\t\tthis.resetPopupValue();\n\t\t}\n\n\t\tPromise.all([Recent.initItems(), Favourite.initItems()]).then(() => {\n\t\t\tconst popup = this.getPopup();\n\n\t\t\tif (this.hexPreview && !popup.isShown())\n\t\t\t{\n\t\t\t\tif (event.target === this.hexPreview.getLayout())\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveTab(ColorPopup.TABS.RECENT);\n\t\t\t\t}\n\n\t\t\t\tif (event.target === this.hexPreview.getInput())\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveTab(ColorPopup.TABS.SPECTRUM);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Recent.items.length === 0)\n\t\t\t{\n\t\t\t\tthis.setActiveTab(ColorPopup.TABS.PRESET);\n\t\t\t}\n\n\t\t\tif (!popup.isShown())\n\t\t\t{\n\t\t\t\tthis.sendAnalytics(ColorPopup.ANALYTICS.EVENTS.OPEN_POPUP);\n\n\t\t\t\tpopup.show();\n\t\t\t\tthis.hex.focus();\n\t\t\t}\n\n\t\t\tthis.recent.buildItemsLayout();\n\t\t\tthis.favourite.buildItemsLayout();\n\t\t});\n\t}\n\n\tresetPopupValue()\n\t{\n\t\tthis.resetColorPickerPopupValue();\n\t\tthis.unsetActivePresets();\n\t\tthis.recent.buildItemsLayout(ColorPopup.HEX_DEFAULT_TEXT);\n\t\tthis.favourite.buildItemsLayout(ColorPopup.HEX_DEFAULT_TEXT);\n\t\tthis.spectrum.hidePicker();\n\t}\n\n\tonChangeColor(color)\n\t{\n\t\tthis.emit('onColorPopupChange', color);\n\n\t\tif (!this.hexPreview)\n\t\t{\n\t\t\tconst hex = (Type.isString(color) && isHex(color))\n\t\t\t\t? color\n\t\t\t\t: (color && Type.isFunction(color.getHex) ? color.getHex() : null);\n\t\t\tthis.updateColorPickerPopup(hex);\n\t\t\tthis.emit('onHexColorPopupChange', hex);\n\t\t}\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (!value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.spectrum.setValue(value);\n\t\tthis.hex.setValue(value);\n\n\t\tconst hexValue = value.getHex();\n\t\tthis.currentHexValue = hexValue;\n\t\tthis.presets.forEach((preset) => {\n\t\t\tpreset.setActiveHex(hexValue);\n\t\t});\n\t\tthis.recent.buildItemsLayout(hexValue);\n\t\tthis.favourite.buildItemsLayout(hexValue);\n\t\tthis.updateColorPickerPopup(hexValue);\n\t}\n\n\tsetHexValue(hexValue)\n\t{\n\t\tthis.setValue(new ColorValue(hexValue));\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.spectrum.getValue();\n\t}\n\n\tgetPresetsLayout()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-presets-list\">\n\t\t\t\t${this.presets.map((preset) => preset.getLayout())}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetColorPickerPopupLayout()\n\t{\n\t\tthis.colorPickerPopupId = `colorpicket_${Text.getRandom()}`;\n\n\t\tlet value = ColorPopup.HEX_DEFAULT_TEXT;\n\t\tlet bgValue = '#eeeeee';\n\t\tif (this.currentHexValue)\n\t\t{\n\t\t\tvalue = this.currentHexValue;\n\t\t\tbgValue = this.currentHexValue;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-picker\">\n\t\t\t\t<div class=\"landing-ui-field-color-popup-picker-preview\" style=\"background-color: ${bgValue};\"></div>\n\t\t\t\t<input id=\"${this.colorPickerPopupId}\" type=\"text\" value=\"${value}\" class=\"landing-ui-field-color-popup-picker-input\">\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tupdateColorPickerPopup(hex)\n\t{\n\t\tif (!this.colorPickerPopup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst preview = this.colorPickerPopup.querySelector('.landing-ui-field-color-popup-picker-preview');\n\t\tif (preview)\n\t\t{\n\t\t\tBX.Dom.style(preview, 'background-color', hex);\n\t\t}\n\n\t\tconst input = this.colorPickerPopup.querySelector('.landing-ui-field-color-popup-picker-input');\n\t\tif (input)\n\t\t{\n\t\t\tinput.value = hex;\n\t\t}\n\t}\n\n\tresetColorPickerPopupValue()\n\t{\n\t\tif (!this.colorPickerPopup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst preview = this.colorPickerPopup.querySelector('.landing-ui-field-color-popup-picker-preview');\n\t\tif (preview)\n\t\t{\n\t\t\tBX.Dom.style(preview, 'background-color', '#eeeeee');\n\t\t}\n\n\t\tconst input = this.colorPickerPopup.querySelector('.landing-ui-field-color-popup-picker-input');\n\t\tif (input)\n\t\t{\n\t\t\tinput.value = ColorPopup.HEX_DEFAULT_TEXT;\n\t\t}\n\t}\n\n\tonColorPopupInput()\n\t{\n\t\tconst input = this.colorPickerPopup.querySelector('.landing-ui-field-color-popup-picker-input');\n\n\t\tif (this.colorPopupInputTimeout)\n\t\t{\n\t\t\tclearTimeout(this.colorPopupInputTimeout);\n\t\t}\n\n\t\tthis.colorPopupInputTimeout = setTimeout(() => {\n\t\t\tlet value = input.value.replaceAll(/[^\\da-f]/gi, '');\n\t\t\tvalue = value.slice(0, 6);\n\t\t\tconst hex = `#${value.toLowerCase()}`;\n\t\t\tinput.value = hex;\n\n\t\t\tconst hexRegex = /^#([\\da-f]{6})$/;\n\t\t\tif (hexRegex.test(hex))\n\t\t\t{\n\t\t\t\tthis.sendAnalytics(ColorPopup.ANALYTICS.EVENTS.SELECT_COLOR, {\n\t\t\t\t\ttype: ColorPopup.ANALYTICS.TYPE_COLORS.HEX,\n\t\t\t\t});\n\t\t\t\tconst color = new ColorValue(hex);\n\t\t\t\tthis.recent.addItem(hex);\n\t\t\t\tthis.recent.buildItemsLayout();\n\t\t\t\tthis.setValue(color);\n\t\t\t\tthis.onChangeColor(hex);\n\t\t\t\tinput.focus();\n\t\t\t}\n\t\t}, 333);\n\t}\n\n\tsetActiveTab(tabKey, isUserClick = false)\n\t{\n\t\tif (isUserClick === true && tabKey !== this.activeTab)\n\t\t{\n\t\t\tthis.sendAnalytics(ColorPopup.ANALYTICS.EVENTS.CHANGE_TAB, {\n\t\t\t\ttype: tabKey,\n\t\t\t});\n\t\t}\n\n\t\tthis.activeTab = tabKey;\n\n\t\tif (this.activeTab === ColorPopup.TABS.RECENT)\n\t\t{\n\t\t\tthis.recent.buildItemsLayout();\n\t\t}\n\n\t\tObject.entries(this.tabContents).forEach(([key, node]) => {\n\t\t\tnode.hidden = (key !== tabKey);\n\t\t});\n\n\t\tObject.entries(this.tabButtons).forEach(([key, btn]) => {\n\t\t\tif (key === tabKey)\n\t\t\t{\n\t\t\t\tBX.Dom.addClass(btn, 'active');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.Dom.removeClass(btn, 'active');\n\t\t\t}\n\t\t});\n\t}\n\n\tonHexChange(event)\n\t{\n\t\tthis.unsetActivePresets();\n\t\tconst color = event.getData().color;\n\t\tif (color)\n\t\t{\n\t\t\tthis.recent.addItem(color.getHex());\n\t\t}\n\t\tthis.setValue(color);\n\t\tthis.onChange(event);\n\t}\n\n\tonSpectrumChange(event)\n\t{\n\t\tconst color = event.getData().color;\n\t\tthis.unsetActivePresets();\n\t\tthis.hex.unFocus();\n\t\tthis.setValue(color);\n\t\tthis.onChangeColor(color);\n\t}\n\n\tonSpectrumDragStart(event: BaseEvent)\n\t{\n\t\tPageObject.getRootWindow().document.activeElement.blur();\n\t}\n\n\tonSpectrumDragEnd(event: BaseEvent)\n\t{\n\t\tthis.sendAnalytics(ColorPopup.ANALYTICS.EVENTS.SELECT_COLOR, {\n\t\t\ttype: ColorPopup.ANALYTICS.TYPE_COLORS.SPECTRUM,\n\t\t});\n\n\t\tconst color = event.getData().color;\n\t\tthis.recent.addItem(color.getHex());\n\t}\n\n\tonPresetChange(event)\n\t{\n\t\tthis.sendAnalytics(ColorPopup.ANALYTICS.EVENTS.SELECT_COLOR, {\n\t\t\ttype: ColorPopup.ANALYTICS.TYPE_COLORS.PRESET,\n\t\t});\n\n\t\tconst presetId = event.target.id;\n\t\tthis.unsetActivePresets(presetId);\n\t\tconst color = event.getData().color;\n\t\tthis.recent.addItem(color.getHex());\n\t\tthis.setValue(color);\n\t\tthis.onChangeColor(color);\n\t}\n\n\tonRecentChange(event: BaseEvent)\n\t{\n\t\tthis.sendAnalytics(ColorPopup.ANALYTICS.EVENTS.SELECT_COLOR, {\n\t\t\ttype: ColorPopup.ANALYTICS.TYPE_COLORS.RECENT,\n\t\t});\n\n\t\tthis.unsetActivePresets();\n\t\tconst color = new ColorValue(event.getData().hex);\n\t\tthis.setValue(color);\n\t\tthis.onChangeColor(color);\n\t}\n\n\tunsetActivePresets(presetId = null)\n\t{\n\t\tthis.presets.forEach((preset) => {\n\t\t\tif (presetId !== preset.id)\n\t\t\t{\n\t\t\t\tpreset.unsetActive();\n\t\t\t}\n\t\t});\n\t}\n\n\tonFavouriteSelect(event: BaseEvent)\n\t{\n\t\tthis.sendAnalytics(ColorPopup.ANALYTICS.EVENTS.SELECT_COLOR, {\n\t\t\ttype: ColorPopup.ANALYTICS.TYPE_COLORS.MY,\n\t\t});\n\n\t\tthis.unsetActivePresets();\n\t\tconst favouriteColor = new ColorValue(event.getData().hex);\n\t\tconst color = event.getData().hex;\n\t\tthis.recent.addItem(color);\n\t\tthis.setValue(favouriteColor);\n\t\tthis.onChangeColor(favouriteColor);\n\t}\n\n\tonAddFavouriteColor(event: BaseEvent)\n\t{\n\t\tthis.sendAnalytics(ColorPopup.ANALYTICS.EVENTS.ADD_MY_COLOR);\n\t}\n\n\tonHexPreviewValidInput(event)\n\t{\n\t\tconst color = event.getData().value;\n\t\tif (color)\n\t\t{\n\t\t\tthis.recent.addItem(`#${color}`);\n\t\t\tthis.recent.buildItemsLayout();\n\t\t\tthis.sendAnalytics(ColorPopup.ANALYTICS.EVENTS.SELECT_COLOR, {\n\t\t\t\ttype: ColorPopup.ANALYTICS.TYPE_COLORS.HEX,\n\t\t\t});\n\t\t}\n\t}\n\n\tonRemoveFavouriteColor(event: BaseEvent) {}\n\n\tonEditFavouriteColors(event: BaseEvent) {}\n\n\tonSaveFavouriteColors(event: BaseEvent) {}\n\n\tgetAnalyticsCategory(): string\n\t{\n\t\treturn this.analyticsCategory;\n\t}\n\n\tgetAnalyticsCSubSection(): string\n\t{\n\t\treturn this.analyticsCSubSection;\n\t}\n\n\tgetAnalyticsCElement(): ?string\n\t{\n\t\treturn this.analyticsCElement ?? null;\n\t}\n\n\tgetAnalyticsP1(): ?string\n\t{\n\t\treturn this.analyticsP1 ?? null;\n\t}\n\n\tsendAnalytics(event: string, params: object = {}): void\n\t{\n\t\tconst analyticsData = {\n\t\t\tevent,\n\t\t\ttool: BX.Landing.Main.getAnalyticsCategoryByType(),\n\t\t\tcategory: params?.category || this.getAnalyticsCategory(),\n\t\t\tc_sub_section: params?.c_sub_section || this.getAnalyticsCSubSection(),\n\t\t\tp1: params?.p1 || this.getAnalyticsP1(),\n\t\t};\n\n\t\tif (params && params.type)\n\t\t{\n\t\t\tanalyticsData.type = params.type;\n\t\t}\n\n\t\tconst cElement = this.getAnalyticsCElement();\n\t\tif (cElement !== null)\n\t\t{\n\t\t\tanalyticsData.c_element = cElement;\n\t\t}\n\n\t\tBX.UI.Analytics.sendData(analyticsData);\n\t}\n}\n","import {Tag, Cache, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport ColorValue from '../color_value';\nimport {IColorValue} from '../types/i_color_value';\n\nexport default class BaseProcessor extends EventEmitter\n{\n\tvariableName: string | [string];\n\tclassName: string;\n\tproperty: string | [string];\n\toptions: [];\n\tpseudoClass: ?string;\n\n\tconstructor(options: {})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.property = 'color';\n\t\tthis.options = options;\n\t\tthis.pseudoClass = null;\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BaseProcessor');\n\t}\n\n\tgetProperty(): [string]\n\t{\n\t\treturn Type.isArray(this.property)\n\t\t\t? this.property\n\t\t\t: [this.property];\n\t}\n\n\tgetVariableName(): [string]\n\t{\n\t\treturn Type.isArray(this.variableName)\n\t\t\t? this.variableName\n\t\t\t: [this.variableName];\n\t}\n\n\tisNullValue(value: ?string): boolean\n\t{\n\t\treturn Type.isNull(value);\n\t}\n\n\tgetNullValue(): IColorValue\n\t{\n\t\treturn new ColorValue;\n\t}\n\n\tgetPseudoClass(): ?string\n\t{\n\t\treturn this.pseudoClass;\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn this.buildLayout();\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`<div>Base processor</div>`;\n\t}\n\n\tgetClassName(): [string]\n\t{\n\t\treturn [this.className];\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t}\n\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (Type.isNull(this.getValue()))\n\t\t{\n\t\t\treturn {[this.getVariableName()]: null};\n\t\t}\n\n\t\treturn {[this.getVariableName()]: this.getValue().getStyleString()};\n\t}\n\n\t/**\n\t * Set value by new format\n\t * @param value {string: string}\n\t */\n\tsetProcessorValue(value: {string: string})\n\t{\n\t\t// Just get last css variable\n\t\tconst processorProperty = this.getVariableName()[this.getVariableName().length - 1];\n\t\tthis.cache.delete('value');\n\t\tthis.setValue(value[processorProperty]);\n\t}\n\n\t/**\n\t * Set old-type value by computedStyle\n\t * @param value {string: string} | null\n\t */\n\tsetDefaultValue(value: {string: string} | null)\n\t{\n\t\tif (!Type.isNull(value))\n\t\t{\n\t\t\tconst inlineProperty = this.getProperty()[this.getProperty().length - 1];\n\t\t\tif (inlineProperty in value)\n\t\t\t{\n\t\t\t\tthis.setValue(value[inlineProperty]);\n\t\t\t\tthis.cache.delete('value');\n\t\t\t\tthis.unsetActive();\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.setValue(null);\n\t\tthis.cache.set('value', null);\n\t}\n\n\tsetValue(value: string | {string: string} | null)\n\t{\n\t}\n\n\tunsetActive()\n\t{\n\t}\n\n\tonChange()\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange');\n\t}\n\n\tdefineActiveControl(items, currentNode)\n\t{\n\t}\n\n\tsetActiveControl(controlName)\n\t{\n\t}\n\n\tprepareProcessorValue(processorValue, defaultValue, data)\n\t{\n\t\treturn processorValue;\n\t}\n}","import { Event, Tag, Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\n\nimport Hex from '../hex/hex';\nimport ColorValue from '../../color_value';\nimport BaseControl from '../base_control/base_control';\nimport Spectrum from '../spectrum/spectrum';\nimport PresetCollection from '../../layout/preset/preset_collection';\nimport ColorPopup from '../color_popup/color_popup';\n\nimport './css/colorpicker.css';\n\nexport default class Colorpicker extends BaseControl\n{\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\n\tstatic TABS = {\n\t\tRECENT: 'recent',\n\t\tSPECTRUM: 'spectrum',\n\t\tPRESET: 'preset',\n\t};\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.options = options;\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Colorpicker');\n\t\tthis.popupId = `colorpicker_popup_${Text.getRandom()}`;\n\t\tthis.popupTargetContainer = options.contentRoot;\n\t\tthis.isHexPreviewMode = options.hexPreviewMode;\n\n\t\tthis.hexPreview = new Hex();\n\t\tif (options.hexPreviewMode === true)\n\t\t{\n\t\t\tthis.hexPreview.setPreviewMode(true);\n\t\t}\n\n\t\tthis.options.hexPreview = this.hexPreview;\n\n\t\t// popup\n\t\tthis.colorPopup = new ColorPopup(this.options);\n\t\tthis.colorPopup.subscribe('onColorPopupChange', this.onColorPopupChange.bind(this));\n\n\t\tthis.hex = new Hex();\n\t\tthis.spectrum = new Spectrum(options);\n\n\t\tthis.presetCollection = new PresetCollection(options);\n\t\tthis.presetCollection.addDefaultPresets();\n\t\tthis.presets = this.presetCollection.getAllPresets();\n\n\t\t// end popup\n\n\t\tthis.initLoader();\n\n\t\tEvent.bind(this.hexPreview.getLayout(), 'click', (event) => {\n\t\t\tif (!this.colorPopup.getPopup().isShown())\n\t\t\t{\n\t\t\t\tBX.Dom.style(this.hexPreview.getButton(), 'opacity', '.5');\n\t\t\t\tthis.loader.show();\n\t\t\t}\n\t\t\tthis.colorPopup.onPopupOpenClick(event);\n\t\t});\n\t\tthis.colorPopup.subscribe('onPopupShow', (e) => {\n\t\t\tthis.loader.hide();\n\t\t\tBX.Dom.style(this.hexPreview.getButton(), 'opacity', '1');\n\t\t});\n\t\tthis.hexPreview.subscribe('onValidInput', this.onValidInput.bind(this));\n\t\tthis.hexPreview.subscribe('onChange', this.onHexChange.bind(this));\n\n\t\tthis.tabButtons = {};\n\t\tthis.tabContents = {};\n\t}\n\n\tinitLoader()\n\t{\n\t\tthis.loader = new BX.Loader({\n\t\t\ttarget: this.hexPreview.getLayout(),\n\t\t});\n\t\tconst loaderNode = this.loader.layout;\n\t\tif (loaderNode)\n\t\t{\n\t\t\tBX.Dom.style(loaderNode, 'width', '28px');\n\t\t\tBX.Dom.style(loaderNode, 'height', '28px');\n\t\t\tBX.Dom.style(loaderNode, 'left', 'unset');\n\t\t\tBX.Dom.style(loaderNode, 'right', '0');\n\t\t\tBX.Dom.style(loaderNode, 'transform', 'translate(0, -50%)');\n\t\t}\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-colorpicker\">\n\t\t\t\t${this.hexPreview.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHexPreviewObject(): Hex\n\t{\n\t\treturn this.hexPreview;\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn this.spectrum.getValue();\n\t\t});\n\t}\n\n\tonColorPopupChange(event)\n\t{\n\t\tconst color = event.getData();\n\t\tif (color)\n\t\t{\n\t\t\tthis.setValue(color);\n\t\t}\n\t\tthis.onChange(new BaseEvent({ data: { color } }));\n\t}\n\n\tonHexChange(event: BaseEvent)\n\t{\n\t\tconst color = event.getData().color;\n\t\tthis.setValue(color);\n\t\tthis.onChange(event);\n\t}\n\n\tonValidInput(event: BaseEvent)\n\t{\n\t\tconst color = `#${event.getData().value}`;\n\t\tif (color)\n\t\t{\n\t\t\tthis.emit('onValidInput', { color });\n\t\t}\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tthis.spectrum.setValue(value);\n\t\t\tthis.hex.setValue(value);\n\t\t\tthis.hexPreview.setValue(value);\n\t\t\tthis.colorPopup.setValue(value);\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tconst hexValue = value.getHex();\n\t\t\t\tthis.presets.forEach((preset) => {\n\t\t\t\t\tpreset.setActiveHex(hexValue);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tthis.setActivity(value);\n\t}\n\n\tsetActivity(value: ?ColorValue)\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (this.spectrum.isActive())\n\t\t\t{\n\t\t\t\tthis.hex.unsetActive();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hex.setActive();\n\t\t\t}\n\t\t\tthis.hexPreview.setActive();\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.hex.unsetActive();\n\t\tthis.hexPreview.unsetActive();\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.hex.isActive() || this.hexPreview.isActive();\n\t}\n}\n","import { Dom, Tag, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\n\nimport BaseControl from '../base_control/base_control';\nimport ColorValue from '../../color_value';\nimport Colorpicker from '../colorpicker/colorpicker';\nimport Preset from '../../layout/preset/preset';\nimport PresetCollection from '../../layout/preset/preset_collection';\nimport hexToHsl from '../../internal/hex-to-hsl';\nimport hslStringToHsl from '../../internal/hsl-string-to-hsl';\n\nimport './css/color_set.css';\n\nexport default class ColorSet extends BaseControl\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.options = options;\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.ColorSet');\n\n\t\tthis.colorpicker = new Colorpicker(options);\n\t\tthis.colorpicker.subscribe('onChange', (event) => {\n\t\t\tthis.preset.unsetActive();\n\n\t\t\tconst color = event.getData().color;\n\t\t\tif (this.preset.isPresetValue(color))\n\t\t\t{\n\t\t\t\tthis.preset.setActiveValue(color);\n\t\t\t\tthis.colorpicker.unsetActive();\n\t\t\t}\n\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tthis.presets = new PresetCollection(options);\n\t\tthis.presets.subscribe('onChange', (event) => {\n\t\t\tthis.setPreset(this.presets.getPresetById(event.getData().presetId));\n\t\t});\n\t\tthis.presets.addDefaultPresets();\n\t\tconst preset = this.presets.getActivePreset();\n\t\tif (preset)\n\t\t{\n\t\t\tthis.setPreset(preset);\n\t\t}\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-colorset\">\n\t\t\t\t<div class=\"landing-ui-field-color-colorset-bottom\">\n\t\t\t\t\t${this.colorpicker.getLayout()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitleLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleLayout', () => {\n\t\t\treturn this.getLayout().querySelector('.landing-ui-field-color-colorset-title');\n\t\t});\n\t}\n\n\tgetPresetContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('presetContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-colorset-preset-container\"></div>`;\n\t\t});\n\t}\n\n\tsetPreset(preset: Preset)\n\t{\n\t\tthis.preset = preset;\n\t\tthis.preset.unsetActive();\n\t\tif (this.getValue() !== null && this.preset.isPresetValue(this.getValue()))\n\t\t{\n\t\t\tthis.unsetActive();\n\t\t\tthis.preset.setActiveValue(this.getValue());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.unsetActive();\n\t\t\tthis.colorpicker.setValue(this.getValue());\n\t\t}\n\n\t\tif (this.getValue() === null && this.options.content)\n\t\t{\n\t\t\tthis.setColorFromContent();\n\t\t}\n\n\t\tthis.preset.subscribe('onChange', (event) => {\n\t\t\tthis.onPresetItemChange(event);\n\t\t});\n\n\t\tDom.clean(this.getPresetContainer());\n\t\tDom.append(preset.getLayout(), this.getPresetContainer());\n\n\t\tthis.emit('onPresetChange', { preset });\n\t}\n\n\tgetPreset(): ?Preset\n\t{\n\t\treturn this.preset;\n\t}\n\n\tgetPresetsCollection(): ?PresetCollection\n\t{\n\t\treturn this.presets;\n\t}\n\n\tonPresetItemChange(event: BaseEvent)\n\t{\n\t\tthis.colorpicker.setValue(event.getData().color);\n\t\tthis.colorpicker.unsetActive();\n\t\tthis.onChange(event);\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.set('value', event.getData().color);\n\t\tthis.emit('onChange', event);\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn this.colorpicker.getValue();\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t\tthis.colorpicker.setValue(value);\n\n\t\t\tconst activePreset = this.presets.getGlobalActiveId()\n\t\t\t\t? this.presets.getPresetById(this.presets.getGlobalActiveId())\n\t\t\t\t: this.presets.getPresetByItemValue(value);\n\t\t\tif (activePreset !== null)\n\t\t\t{\n\t\t\t\tthis.setPreset(activePreset);\n\t\t\t\tthis.presets.setActiveItem(activePreset.getId());\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.preset.unsetActive();\n\t\tthis.colorpicker.unsetActive();\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.preset.isActive() || this.colorpicker.isActive();\n\t}\n\n\tsetColorFromContent(): void\n\t{\n\t\tconst contentValue = this.options.content;\n\t\tlet contentHslColor = '';\n\t\tif (contentValue.startsWith('#'))\n\t\t{\n\t\t\tcontentHslColor = hexToHsl(contentValue);\n\t\t}\n\n\t\tif (contentValue.startsWith('hsl'))\n\t\t{\n\t\t\tcontentHslColor = hslStringToHsl(contentValue);\n\t\t}\n\n\t\tif (Type.isObject(contentHslColor))\n\t\t{\n\t\t\tconst contentColorValue = new ColorValue({\n\t\t\t\th: contentHslColor.h,\n\t\t\t\ts: contentHslColor.s,\n\t\t\t\tl: contentHslColor.l,\n\t\t\t\ta: contentHslColor.a,\n\t\t\t});\n\t\t\tthis.unsetActive();\n\t\t\tthis.colorpicker.setValue(contentColorValue);\n\t\t}\n\t}\n}\n","import 'ui.design-tokens';\n\nimport {Dom, Event, Tag, Text, Type} from 'main.core';\nimport {IColorValue} from '../../types/i_color_value';\nimport ColorValue from \"../../color_value\";\nimport './css/opacity.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Opacity extends BaseControl\n{\n\tstatic DEFAULT_COLOR: string = '#cccccc';\n\tstatic DEFAULT_OPACITY: string = 1;\n\n\tconstructor(options: {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Opacity');\n\n\t\tthis.defaultOpacity = (Type.isObject(options) && Reflect.has(options, 'defaultOpacity'))\n\t\t\t? options.defaultOpacity\n\t\t\t: Opacity.DEFAULT_OPACITY;\n\n\t\tthis.document = PageObject.getRootWindow().document;\n\n\t\tthis.onPickerDragStart = this.onPickerDragStart.bind(this);\n\t\tthis.onPickerDragMove = this.onPickerDragMove.bind(this);\n\t\tthis.onPickerDragEnd = this.onPickerDragEnd.bind(this);\n\t\tthis.layout = this.getLayout();\n\t\tthis.pickerControl = this.layout .querySelector('.landing-ui-field-color-opacity');\n\t\tthis.rangeControl = this.layout .querySelector('.landing-ui-field-color-opacity-range-output');\n\t\tthis.arrowsUp = this.rangeControl.querySelector('.landing-ui-field-color-opacity-range-output-arrows-up');\n\t\tthis.arrowsDown = this.rangeControl.querySelector('.landing-ui-field-color-opacity-range-output-arrows-down');\n\t\tthis.rangeInput = this.rangeControl.querySelector('.landing-ui-field-color-opacity-range-output-input');\n\t\tEvent.bind(this.arrowsUp, 'click', this.onArrowClick.bind(this, 'up'));\n\t\tEvent.bind(this.arrowsDown, 'click', this.onArrowClick.bind(this, 'down'));\n\t\tEvent.bind(this.pickerControl, 'mousedown', this.onPickerDragStart);\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tconst defaultOpacityValue = this.defaultOpacity * 100;\n\t\tconst layout = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-opacity-container\">\n\t\t\t\t<div class=\"landing-ui-field-color-opacity\">\n\t\t\t\t\t${this.getPicker()}\n\t\t\t\t\t${this.getColorLayout()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-range-output\">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"landing-ui-field-color-opacity-range-output-input\"\n\t\t\t\t\t\ttitle=\"${defaultOpacityValue}\">\n\t\t\t\t\t\t${defaultOpacityValue}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-range-output-arrows\">\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-range-output-arrows-up\"></div>\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-range-output-arrows-down\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tthis.setPickerPosByOpacity(this.defaultOpacity);\n\n\t\treturn layout;\n\t}\n\n\tonPickerDragStart(event: MouseEvent)\n\t{\n\t\tif (event.ctrlKey || event.metaKey || event.button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.bind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.addClass(this.document.body, 'landing-ui-field-color-draggable');\n\n\t\tthis.onPickerDragMove(event);\n\t}\n\n\tonPickerDragMove(event: MouseEvent)\n\t{\n\t\tif (event.target === this.getPicker())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setPickerPos(event.pageX);\n\t\tthis.onChange();\n\t\tthis.onRangeControlChange();\n\t}\n\n\tonPickerDragEnd()\n\t{\n\t\tEvent.unbind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.unbind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.removeClass(this.document.body, 'landing-ui-field-color-draggable');\n\t}\n\n\t/**\n\t * Set picker by absolute page coords\n\t * @param x\n\t */\n\tsetPickerPos(x: number)\n\t{\n\t\tconst leftPos = Math.max(Math.min((x - this.getLayoutRect().left), this.getLayoutRect().width), 0);\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftPos}px`,\n\t\t});\n\t}\n\n\tsetPickerPosByOpacity(opacity: number)\n\t{\n\t\topacity = Math.min(1, Math.max(0, opacity));\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${(opacity * 100)}%`,\n\t\t});\n\t}\n\n\tgetLayoutRect(): {}\n\t{\n\t\treturn this.cache.remember('layoutSize', () => {\n\t\t\tconst layoutRect = this.pickerControl.getBoundingClientRect();\n\t\t\treturn {\n\t\t\t\twidth: layoutRect.width,\n\t\t\t\tleft: layoutRect.left,\n\t\t\t};\n\t\t});\n\t}\n\n\tgetColorLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('colorLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-color\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetPicker(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('picker', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker-item\">\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker-item-circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t});\n\t}\n\n\tgetDefaultValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('default', () => {\n\t\t\treturn new ColorValue(Opacity.DEFAULT_COLOR).setOpacity(this.defaultOpacity);\n\t\t});\n\t}\n\n\tgetValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst pickerLeft = Text.toNumber(Dom.style(this.getPicker(), 'left'));\n\t\t\tconst layoutWidth = Text.toNumber(this.pickerControl.getBoundingClientRect().width);\n\t\t\treturn this.getDefaultValue().setOpacity(pickerLeft / layoutWidth);\n\t\t});\n\t}\n\n\tsetValue(value: ?IColorValue)\n\t{\n\t\tconst valueToSet = (!Type.isNull(value)) ? value : this.getDefaultValue();\n\t\tsuper.setValue(valueToSet);\n\n\t\tif (!Type.isNull(value))\n\t\t{\n\t\t\tDom.style(this.getColorLayout(), {background: valueToSet.getStyleStringForOpacity()});\n\t\t\tthis.setPickerPosByOpacity(valueToSet.getOpacity());\n\t\t\tthis.onRangeControlChange();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.getColorLayout(), {background: 'none'});\n\t\t}\n\t}\n\n\tonRangeControlChange()\n\t{\n\t\tconst opacity = parseInt((this.getValue().getOpacity()) * 100);\n\t\tthis.rangeInput.title = opacity;\n\t\tthis.rangeInput.innerHTML = opacity;\n\t}\n\n\tonArrowClick(arrowName)\n\t{\n\t\tlet newOpacityInputValue;\n\t\tconst opacity = this.getValue().getOpacity();\n\t\tconst opacityInputValue = parseInt(opacity * 100);\n\t\tif (arrowName === 'up')\n\t\t{\n\t\t\tif (opacityInputValue < 100)\n\t\t\t{\n\t\t\t\tnewOpacityInputValue = (opacityInputValue + 5) / 100;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnewOpacityInputValue = opacityInputValue / 100;\n\t\t\t}\n\t\t}\n\t\tif (arrowName === 'down')\n\t\t{\n\t\t\tif (opacityInputValue > 0)\n\t\t\t{\n\t\t\t\tnewOpacityInputValue = (opacityInputValue - 5) / 100;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnewOpacityInputValue = opacityInputValue / 100;\n\t\t\t}\n\t\t}\n\t\tthis.rangeInput.title = parseInt(newOpacityInputValue * 100);\n\t\tthis.rangeInput.innerHTML = parseInt(newOpacityInputValue * 100);\n\t\tconst width = this.pickerControl.getBoundingClientRect().width;\n\t\tconst leftPos = width - (width * (1 - newOpacityInputValue));\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftPos}px`,\n\t\t});\n\t\tthis.onChange();\n\t}\n}\n","import 'ui.design-tokens';\nimport 'ui.fonts.opensans';\n\nimport {Cache, Dom, Event, Tag, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport BaseControl from '../../control/base_control/base_control';\n\nimport './css/tabs.css';\n\nexport default class Tabs extends EventEmitter\n{\n\ttabs: Tab[];\n\tmultiple: boolean;\n\tisBig: boolean;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Tabs');\n\n\t\tthis.tabs = [];\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.multiple = true;\n\t\tthis.isBig = false;\n\n\t\tthis.onToggle = this.onToggle.bind(this);\n\t}\n\n\tsetMultiple(multiple: boolean): Tabs\n\t{\n\t\tthis.multiple = multiple;\n\n\t\treturn this;\n\t}\n\n\tsetBig(big: boolean): Tabs\n\t{\n\t\tthis.isBig = big;\n\t\tthis.multiple = false;\n\n\t\treturn this;\n\t}\n\n\tappendTab(id: string, title: string, items: BaseControl | Tab | [BaseControl | Tab]): Tabs\n\t{\n\t\tconst tab = new Tab({\n\t\t\tid: id,\n\t\t\ttitle: title,\n\t\t\titems: Type.isArray(items) ? items : [items],\n\t\t});\n\t\tthis.tabs.push(tab);\n\t\tthis.bindEvents(tab);\n\t\tthis.cache.delete('layout');\n\n\t\treturn this;\n\t}\n\n\tprependTab(id: string, title: string, items: BaseControl | Tab | [BaseControl | Tab]): Tabs\n\t{\n\t\tconst tab = new Tab({\n\t\t\tid: id,\n\t\t\ttitle: title,\n\t\t\titems: Type.isArray(items) || [items],\n\t\t});\n\t\tthis.tabs.unshift(tab);\n\t\tthis.bindEvents(tab);\n\t\tthis.cache.delete('layout');\n\n\t\treturn this;\n\t}\n\n\tbindEvents(tab)\n\t{\n\t\ttab.subscribe('onToggle', this.onToggle);\n\t\ttab.subscribe('onShow', this.onToggle);\n\t\ttab.subscribe('onHide', this.onToggle);\n\t}\n\n\tonToggle(event: BaseEvent)\n\t{\n\t\tthis.emit('onToggle', event);\n\t}\n\n\tshowTab(id): Tabs\n\t{\n\t\tif (!this.multiple)\n\t\t{\n\t\t\tthis.tabs.forEach((tab) => {\n\t\t\t\ttab.hide();\n\t\t\t});\n\t\t}\n\n\t\tconst tab = this.getTabById(id);\n\t\tif (tab)\n\t\t{\n\t\t\ttab.show();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetTabById(id: string): Tab\n\t{\n\t\treturn this.tabs.find((tab) => {\n\t\t\treturn tab.id === id;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst additional = this.isBig ? ' landing-ui-field-color-tabs--big' : '';\n\t\t\tconst layout = Tag.render`<div class=\"landing-ui-field-color-tabs${additional}\"></div>`;\n\n\t\t\tif (this.isBig)\n\t\t\t{\n\t\t\t\tconst head = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-tabs-head landing-ui-field-color-tabs-head--big\"></div>\n\t\t\t\t`;\n\t\t\t\tconst content = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-tabs-content landing-ui-field-color-tabs-content--big\"></div>\n\t\t\t\t`;\n\n\t\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\t\tDom.append(tab.getTitle(), head);\n\t\t\t\t\tDom.append(tab.getLayout(), content);\n\t\t\t\t});\n\n\t\t\t\tDom.append(head, layout);\n\t\t\t\tDom.append(content, layout);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\t\tconst tabLayout = Tag.render`<div class=\"landing-ui-field-color-tabs-tab\">\n\t\t\t\t\t\t${tab.getTitle()}${tab.getLayout()}\n\t\t\t\t\t</div>`;\n\t\t\t\t\tDom.append(tabLayout, layout);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// events\n\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\tEvent.bind(tab.getTitle(), 'click', () => {\n\t\t\t\t\tif (!this.multiple)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.tabs.forEach((tab) => {\n\t\t\t\t\t\t\ttab.hide();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ttab.toggle();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn layout;\n\t\t});\n\t}\n}\n\nexport type TabOptions = {\n\tid: string,\n\ttitle: string,\n\titems: BaseControl[]\n}\n\nexport class Tab extends EventEmitter\n{\n\tid: string;\n\ttitle: string;\n\titems: BaseControl[];\n\n\tstatic SHOW_CLASS: string = 'show';\n\n\tconstructor(options: TabOptions)\n\t{\n\t\tsuper();\n\n\t\tthis.id = options.id;\n\t\tthis.title = options.title;\n\t\tthis.items = options.items;\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler\">\n\t\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler-icon\"></span>\n\t\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler-name\">${this.title}</span>\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-tabs-tab-content\">\n\t\t\t\t\t${this.items.map(item => item.getLayout())}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\ttoggle(): Tab\n\t{\n\t\tDom.toggleClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.toggleClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onToggle', {tab: this.title});\n\n\t\treturn this;\n\t}\n\n\tshow(): Tab\n\t{\n\t\tDom.addClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.addClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onShow', {tab: this.title});\n\n\t\treturn this;\n\t}\n\n\thide(): Tab\n\t{\n\t\tDom.removeClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.removeClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onHide', {tab: this.title});\n\n\t\treturn this;\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Loc, Dom} from 'main.core';\n\nimport './css/zeroing.css';\n\nexport default class Zeroing extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.options = options;\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Zeroing');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\t}\n\n\tgetLayout(): HTMLElement | null\n\t{\n\t\tlet textCode = 'LANDING_FIELD_COLOR-ZEROING_TITLE_2';\n\t\tif (this.options)\n\t\t{\n\t\t\tif (!this.options.styleNode)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (this.options.textCode)\n\t\t\t{\n\t\t\t\ttextCode = this.options.textCode;\n\t\t\t}\n\t\t}\n\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-zeroing\">\n\t\t\t\t<div class=\"landing-ui-field-color-zeroing-preview\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-zeroing-state\"></div>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"landing-ui-field-color-primary-text\">\n\t\t\t\t\t${Loc.getMessage(textCode)}\n\t\t\t\t</span>\n\t\t\t</div>`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('onChange', {color: null});\n\t}\n\n\tsetActive()\n\t{\n\t\tDom.addClass(this.getLayout(), Zeroing.ACTIVE_CLASS);\n\t}\n\n\tunsetActive()\n\t{\n\t\tDom.removeClass(this.getLayout(), Zeroing.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), Zeroing.ACTIVE_CLASS);\n\t}\n}\n","import {Tag, Loc, Dom, Type} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\n\nimport BaseProcessor from './base_processor';\nimport ColorSet from \"../control/color_set/color_set\";\nimport Opacity from \"../control/opacity/opacity\";\nimport Tabs from '../layout/tabs/tabs';\nimport Primary from '../layout/primary/primary';\n\nimport ColorValue from \"../color_value\";\nimport {IColorValue} from '../types/i_color_value';\nimport Zeroing from '../layout/zeroing/zeroing';\n\nexport default class Color extends BaseProcessor\n{\n\tstatic PRIMARY_VAR: string = 'var(--primary)';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.Color');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--color';\n\t\tthis.className = 'g-color';\n\n\t\tthis.colorSet = new ColorSet(options);\n\t\tthis.colorSet.subscribe('onChange', this.onColorSetChange.bind(this));\n\n\t\tthis.opacity = new Opacity();\n\t\tthis.opacity.subscribe('onChange', this.onOpacityChange.bind(this));\n\n\t\tconst zeroingOptions = {\n\t\t\tstyleNode: options.styleNode,\n\t\t};\n\t\tthis.zeroing = new Zeroing(zeroingOptions);\n\t\tthis.zeroing.subscribe('onChange', this.onZeroingChange.bind(this));\n\n\t\tthis.primary = new Primary(options);\n\t\tthis.primary.subscribe('onChange', this.onPrimaryChange.bind(this));\n\n\t\tthis.tabs = new Tabs().appendTab('Opacity', Loc.getMessage('LANDING_FIELD_COLOR-TAB_OPACITY'), this.opacity);\n\t}\n\n\tisNullValue(value: ?string): boolean\n\t{\n\t\treturn (\n\t\t\tvalue === null\n\t\t\t|| value === 'none'\n\t\t\t|| value === 'rgba(0, 0, 0, 0)'\n\t\t);\n\t}\n\n\tgetNullValue()\n\t{\n\t\treturn new ColorValue('rgba(0, 0, 0, 0)');\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-color\">\n\t\t\t\t${this.colorSet.getLayout()}\n\t\t\t\t${this.primary.getLayout()}\n\t\t\t\t${this.zeroing.getLayout()}\n\t\t\t\t${this.tabs.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.primary.unsetActive();\n\t\tthis.zeroing.unsetActive();\n\n\t\tconst color = event.getData().color;\n\t\tif (color !== null)\n\t\t{\n\t\t\tcolor.setOpacity(this.opacity.getValue().getOpacity());\n\t\t}\n\t\tthis.opacity.setValue(color);\n\n\t\tthis.onChange();\n\t}\n\n\tonOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tonPrimaryChange(event: BaseEvent)\n\t{\n\t\tthis.colorSet.setValue(event.getData().color);\n\t\tthis.onColorSetChange(event);\n\n\t\tthis.colorSet.unsetActive();\n\t\tthis.zeroing.unsetActive();\n\t\tthis.primary.setActive();\n\t}\n\n\tonZeroingChange(event: BaseEvent)\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.primary.unsetActive();\n\t\tthis.zeroing.setActive();\n\t\tthis.setValue(event.getData().color);\n\t\t// todo: need reload computed props and reinit\n\t\tthis.onChange(event);\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.primary.unsetActive();\n\t}\n\n\tsetValue(value: ?string): void\n\t{\n\t\tconst valueObj = (value !== null) ? new ColorValue(value) : null;\n\n\t\tthis.colorSet.setValue(valueObj);\n\t\tthis.opacity.setValue(valueObj);\n\n\t\t// todo: what about opacity in primary?\n\t\tif (this.primary.isPrimaryValue(valueObj))\n\t\t{\n\t\t\tthis.primary.setActive();\n\t\t\tthis.colorSet.unsetActive();\n\t\t}\n\n\t\tif (value !== null && valueObj.getOpacity() < 1)\n\t\t{\n\t\t\tthis.tabs.showTab('Opacity');\n\t\t}\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst value = this.primary.isActive() ? this.primary.getValue() : this.colorSet.getValue();\n\n\t\t\treturn (value === null)\n\t\t\t\t? null\n\t\t\t\t: value.setOpacity(this.opacity.getValue().getOpacity());\n\t\t});\n\t}\n\n\tsetDefaultValue(value: {string: string} | null)\n\t{\n\t\tthis.zeroing.setActive();\n\t\tif (!Type.isNull(value))\n\t\t{\n\t\t\tthis.colorSet.colorpicker.hex.setActive();\n\t\t}\n\t\tsuper.setDefaultValue(value);\n\t}\n\n\tsetActiveControl(controlName)\n\t{\n\t\tif (controlName === 'primary')\n\t\t{\n\t\t\tthis.primary.setActive();\n\t\t}\n\t\tif (controlName === 'hex')\n\t\t{\n\t\t\tthis.colorSet.colorpicker.hexPreview.setActive();\n\t\t}\n\t}\n\n\tdefineActiveControl(items, styleNode)\n\t{\n\t\tif (!Type.isUndefined(styleNode))\n\t\t{\n\t\t\tlet oldClass;\n\t\t\tlet activeControl;\n\t\t\tconst node = styleNode.getNode();\n\t\t\tif (node.length > 0)\n\t\t\t{\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tif (Dom.hasClass(node[0], item.value))\n\t\t\t\t\t{\n\t\t\t\t\t\toldClass = item.value;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif (oldClass)\n\t\t\t\t{\n\t\t\t\t\tconst reg = /g-[a-z]+-[a-z0-9-]+/i;\n\t\t\t\t\tconst found = oldClass.match(reg);\n\t\t\t\t\tif (found)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst reg = /primary/i;\n\t\t\t\t\t\tconst found = oldClass.match(reg);\n\t\t\t\t\t\tthis.zeroing.unsetActive();\n\t\t\t\t\t\tif (found)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveControl = 'primary';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveControl = 'hex';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (activeControl)\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveControl(activeControl);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import Color from './color';\n\nexport default class ColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.ColorHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--color-hover';\n\t\tthis.className = 'g-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import { Event, Tag, Text, Dom, Loc } from 'main.core';\nimport { Popup, PopupManager } from 'main.popup';\nimport { BaseEvent } from 'main.core.events';\nimport BaseControl from '../base_control/base_control';\nimport Colorpicker from '../colorpicker/colorpicker';\nimport Preset from '../../layout/preset/preset';\n\nimport 'ui.fonts.opensans';\nimport './css/gradient.css';\nimport GradientValue from '../../gradient_value';\nimport ColorValue from '../../color_value';\n\nexport default class Gradient extends BaseControl\n{\n\tstatic DISABLE_CLASS = 'disable';\n\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\n\tpreset: ?Preset;\n\tcolorpickerFrom: Colorpicker;\n\tcolorpickerTo: Colorpicker;\n\n\t+ROTATE_STEP = 45;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Gradient');\n\n\t\tthis.options = options;\n\t\tthis.options.hexPreviewMode = true;\n\n\t\tthis.popupId = `gradient_popup_${Text.getRandom()}`;\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.colorpickerFrom = new Colorpicker(this.options);\n\t\tthis.colorpickerFrom.subscribe('onChange', (event) => {\n\t\t\tthis.onColorChange(event.getData().color, null);\n\t\t});\n\n\t\tthis.colorpickerTo = new Colorpicker(this.options);\n\t\tthis.colorpickerTo.subscribe('onChange', (event) => {\n\t\t\tthis.onColorChange(null, event.getData().color);\n\t\t});\n\n\t\tEvent.bind(this.getPopupButton(), 'click', this.onPopupOpen.bind(this));\n\t\tEvent.bind(this.getRotateButton(), 'click', this.onRotate.bind(this));\n\t\tEvent.bind(this.getSwitchTypeButton(), 'click', this.onSwitchType.bind(this));\n\t\tEvent.bind(this.getSwapButton(), 'click', this.onSwap.bind(this));\n\n\t\tthis.preset = null;\n\t}\n\n\tonColorChange(fromValue: ?ColorValue, toValue: ?ColorValue)\n\t{\n\t\tif (fromValue === null && toValue === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst valueToSet = this.getValue() || new GradientValue();\n\t\tconst fromValueToSet = fromValue || valueToSet.getFrom() || (new GradientValue()).getFrom();\n\t\tconst toValueToSet = toValue || valueToSet.getTo() || (new GradientValue()).getTo();\n\t\tvalueToSet.setValue({\n\t\t\tfrom: fromValueToSet,\n\t\t\tto: toValueToSet,\n\t\t});\n\n\t\tthis.setValue(valueToSet);\n\t\tthis.preset.unsetActive();\n\t\tthis.onChange();\n\t}\n\n\tonPopupOpen()\n\t{\n\t\tthis.getPopup().toggle();\n\t}\n\n\tonRotate(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tvalue.setValue({\n\t\t\t\tangle: ((value.getAngle() + this.ROTATE_STEP) % 360),\n\t\t\t});\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tonSwitchType(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (value.getType() === GradientValue.TYPE_LINEAR)\n\t\t\t{\n\t\t\t\tvalue.setValue({ type: GradientValue.TYPE_RADIAL });\n\t\t\t\tGradient.disableButton(this.getRotateButton());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalue.setValue({ type: GradientValue.TYPE_LINEAR });\n\t\t\t\tGradient.enableButton(this.getRotateButton());\n\t\t\t}\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tonSwap(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tvalue.setValue({\n\t\t\t\tto: value.getFrom(),\n\t\t\t\tfrom: value.getTo(),\n\t\t\t});\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tstatic disableButton(button: HTMLDivElement)\n\t{\n\t\tDom.addClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tstatic enableButton(button: HTMLDivElement)\n\t{\n\t\tDom.removeClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tstatic isButtonEnable(button: HTMLDivElement)\n\t{\n\t\treturn !Dom.hasClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tcorrectColorpickerColors()\n\t{\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tconst angle = value.getAngle();\n\t\t\tconst hexFrom = this.colorpickerFrom.getHexPreviewObject();\n\t\t\tconst hexTo = this.colorpickerTo.getHexPreviewObject();\n\t\t\tconst colorFrom = value.getFrom();\n\t\t\tconst colorTo = value.getTo();\n\t\t\tif (value.getType() === GradientValue.TYPE_LINEAR)\n\t\t\t{\n\t\t\t\tif (angle === 270 || angle === 90)\n\t\t\t\t{\n\t\t\t\t\tconst median = ColorValue.getMedian(colorFrom, colorTo).getContrast().getHex();\n\t\t\t\t\thexFrom.adjustColors(median, 'transparent');\n\t\t\t\t\thexTo.adjustColors(median, 'transparent');\n\t\t\t\t}\n\t\t\t\telse if (angle >= 135 && angle <= 225)\n\t\t\t\t{\n\t\t\t\t\thexFrom.adjustColors(colorFrom.getContrast().getHex(), 'transparent');\n\t\t\t\t\thexTo.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thexFrom.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\t\thexTo.adjustColors(colorFrom.getContrast().getHex(), 'transparent');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (value.getType() === GradientValue.TYPE_RADIAL)\n\t\t\t{\n\t\t\t\thexFrom.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\thexTo.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'landing-ui-field-color-gradient-preset-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.getPopupButton(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: { offset: -5 },\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 7,\n\t\t\t\tcontent: this.getPopupContent(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopupContent(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-preset-popup-container\">\n\t\t\t\t\t${this.getRotateButton()}\n\t\t\t\t\t${this.getSwapButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tif (this.preset)\n\t\t{\n\t\t\tDom.clean(this.getPresetContainer());\n\t\t\tDom.append(this.preset.getLayout(), this.getPresetContainer());\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-gradient\">\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-container-main\">\n\t\t\t\t\t${this.getPresetContainer()}\n\t\t\t\t\t<div class=\"landing-ui-field-color-gradient-container\">\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-gradient-from\">${this.colorpickerFrom.getLayout()}</div>\n\t\t\t\t\t\t${this.getPopupButton()}\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-gradient-to\">${this.colorpickerTo.getLayout()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-switch-type-container\">\n\t\t\t\t\t${this.getSwitchTypeButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContainerLayout(): HTMLDivElement\n\t{\n\t\t// todo: do better after change vyorstka\n\t\treturn this.getLayout().querySelector('.landing-ui-field-color-gradient-container');\n\t}\n\n\tgetPresetContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('presetContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-gradient-preset-container\"></div>`;\n\t\t});\n\t}\n\n\tgetPopupButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupButton', () => {\n\t\t\treturn Tag.render`<span class=\"landing-ui-field-color-gradient-open-popup\"></span>`;\n\t\t});\n\t}\n\n\tgetSwitchTypeButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('switchTypeButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-switch-type\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_SWITCH_TYPE')}\"\n\t\t\t\t></span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetRotateButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('rotateButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-rotate\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_ROTATE')}\"\n\t\t\t\t></span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetSwapButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('swapButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-swap\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_SWAP')}\"\n\t\t\t\t></span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tsetPreset(preset: Preset)\n\t{\n\t\tthis.preset = preset;\n\t\tthis.preset.unsetActive();\n\t\tthis.preset.subscribe('onChange', (event) => {\n\t\t\tthis.setValue(event.getData().color);\n\t\t\tthis.unsetColorpickerActive();\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tDom.clean(this.getPresetContainer());\n\t\tDom.append(preset.getLayout(), this.getPresetContainer());\n\t}\n\n\tgetPreset(): ?Preset\n\t{\n\t\treturn this.preset;\n\t}\n\n\tgetValue(): ?GradientValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (\n\t\t\t\tthis.colorpickerFrom.getValue() === null\n\t\t\t\t|| this.colorpickerTo.getValue() === null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet rotate = this.getRotateButton().dataset.rotate;\n\t\t\trotate = rotate ? Text.toNumber(rotate) : 0;\n\t\t\tconst type = this.getSwitchTypeButton().dataset.type || GradientValue.TYPE_LINEAR;\n\n\t\t\treturn new GradientValue({\n\t\t\t\tfrom: this.colorpickerFrom.getValue(),\n\t\t\t\tto: this.colorpickerTo.getValue(),\n\t\t\t\tangle: rotate,\n\t\t\t\ttype,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetValue(value: ?GradientValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tif (value === null)\n\t\t{\n\t\t\tthis.colorpickerFrom.setValue(null);\n\t\t\tthis.colorpickerTo.setValue(null);\n\n\t\t\tthis.unsetActive();\n\n\t\t\tDom.style(this.getContainerLayout(), 'background', (new GradientValue()).getStyleString());\n\n\t\t\tGradient.disableButton(this.getRotateButton());\n\t\t\tGradient.disableButton(this.getSwitchTypeButton());\n\t\t\tGradient.disableButton(this.getSwapButton());\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// todo: how set default type and rotation?\n\t\t\tthis.colorpickerFrom.setValue(value.getFrom());\n\t\t\tthis.colorpickerTo.setValue(value.getTo());\n\t\t\tthis.correctColorpickerColors();\n\n\t\t\tthis.getRotateButton().dataset.rotate = value.getAngle();\n\t\t\tthis.getSwitchTypeButton().dataset.type = value.getType();\n\n\t\t\tDom.style(this.getRotateButton(), 'transform', `rotate(${value.getAngle()}deg)`);\n\t\t\tDom.style(this.getContainerLayout(), 'background', this.getValue().getStyleString());\n\n\t\t\tGradient.enableButton(this.getSwitchTypeButton());\n\t\t\tGradient.enableButton(this.getSwapButton());\n\t\t\tif (value.getType() === GradientValue.TYPE_RADIAL)\n\t\t\t{\n\t\t\t\tGradient.disableButton(this.getRotateButton());\n\t\t\t\tthis.getSwitchTypeButton().innerText = Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_DO_LINEAR');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tGradient.enableButton(this.getRotateButton());\n\t\t\t\tthis.getSwitchTypeButton().innerText = Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_DO_RADIAL');\n\t\t\t}\n\n\t\t\tthis.setActive();\n\t\t}\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', { gradient: this.getValue() });\n\t}\n\n\tsetActive(): void\n\t{\n\t\tconst value = this.getValue();\n\t\tif (this.preset.isPresetValue(value))\n\t\t{\n\t\t\tthis.preset.setActiveValue(value);\n\t\t\tthis.unsetColorpickerActive();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.setColorpickerActive();\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.preset.unsetActive();\n\t\tthis.unsetColorpickerActive();\n\t}\n\n\tsetColorpickerActive(): void\n\t{\n\t\tDom.addClass(this.getContainerLayout(), Gradient.ACTIVE_CLASS);\n\t}\n\n\tunsetColorpickerActive(): void\n\t{\n\t\tthis.colorpickerFrom.unsetActive();\n\t\tthis.colorpickerTo.unsetActive();\n\t\tDom.removeClass(this.getContainerLayout(), Gradient.ACTIVE_CLASS);\n\t}\n}\n","import { Type, Loc } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\n\nimport isHex from '../internal/is-hex';\nimport isRgbString from '../internal/is-rgb-string';\nimport isHslString from '../internal/is-hsl-string';\nimport isGradientString from '../internal/is-gradient-string';\nimport { isCssVar } from '../internal/css-var';\n\nimport Color from './color';\nimport Gradient from '../control/gradient/gradient';\nimport Preset from '../layout/preset/preset';\n\nimport GradientValue from '../gradient_value';\nimport { IColorValue } from '../types/i_color_value';\n\nexport default class BgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColor');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg';\n\t\tthis.className = 'g-bg';\n\n\t\tthis.activeControl = null;\n\n\t\tthis.gradient = new Gradient(options);\n\t\tthis.gradient.subscribe('onChange', this.onGradientChange.bind(this));\n\t\tthis.tabs.prependTab('Gradient', Loc.getMessage('LANDING_FIELD_COLOR-TAB_GRADIENT'), this.gradient);\n\n\t\tthis.setGradientPreset(this.colorSet.getPreset());\n\t\tthis.colorSet.subscribe('onPresetChange', (event) => {\n\t\t\tthis.setGradientPreset(event.getData().preset);\n\t\t});\n\n\t\tthis.tabs.subscribe('onToggle', this.onTabsToggle.bind(this));\n\t}\n\n\tsetGradientPreset(preset: Preset)\n\t{\n\t\tconst gradientPreset = preset.getGradientPreset();\n\t\tthis.gradient.setPreset(gradientPreset);\n\t\tgradientPreset.subscribe('onChange', () => {\n\t\t\tthis.activeControl = this.gradient;\n\t\t\tthis.onChange();\n\t\t});\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null && value instanceof GradientValue && this.gradient.getPreset().isPresetValue(value))\n\t\t{\n\t\t\tthis.colorSet.getPreset().unsetActive();\n\t\t\tthis.gradient.getPreset().setActiveValue(value);\n\t\t\tthis.gradient.unsetColorpickerActive();\n\t\t}\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.activeControl = this.colorSet;\n\t\tthis.gradient.unsetActive();\n\n\t\tsuper.onColorSetChange(event);\n\t}\n\n\tonGradientChange(event: BaseEvent)\n\t{\n\t\tthis.activeControl = this.gradient;\n\t\tthis.colorSet.unsetActive();\n\n\t\tconst gradValue = event.getData().gradient;\n\t\tif (gradValue !== null)\n\t\t{\n\t\t\tthis.opacity.setValue(\n\t\t\t\tgradValue.setOpacity(this.opacity.getValue().getOpacity()),\n\t\t\t);\n\t\t}\n\n\t\tthis.onChange();\n\t}\n\n\tonOverlayOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tonTabsToggle()\n\t{\n\t\tthis.gradient.getPopup().close();\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.gradient.unsetActive();\n\t\tthis.primary.unsetActive();\n\t}\n\n\tsetValue(value: ?string): void\n\t{\n\t\tthis.colorSet.setValue(null);\n\t\tthis.gradient.setValue(null);\n\t\tthis.unsetActive();\n\n\t\tthis.activeControl = null;\n\n\t\tif (Type.isNil(value))\n\t\t{\n\t\t\t// todo: set NULL for gradient or opacity?\n\t\t}\n\t\telse if (\n\t\t\tisRgbString(value)\n\t\t\t|| isHex(value)\n\t\t\t|| isHslString(value)\n\t\t\t|| isCssVar(value)\n\t\t)\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tthis.activeControl = this.colorSet;\n\t\t}\n\t\telse if (isGradientString(value))\n\t\t{\n\t\t\tthis.activeControl = this.gradient;\n\n\t\t\tconst gradientValue = new GradientValue(value);\n\t\t\tthis.gradient.setValue(gradientValue);\n\t\t\tthis.opacity.setValue(gradientValue);\n\n\t\t\tconst presets = this.colorSet.getPresetsCollection();\n\t\t\tconst activePreset = presets.getGlobalActiveId()\n\t\t\t\t? presets.getPresetById(presets.getGlobalActiveId())\n\t\t\t\t: presets.getPresetByItemValue(gradientValue);\n\t\t\tif (activePreset !== null && activePreset !== this.colorSet.getPreset())\n\t\t\t{\n\t\t\t\tthis.colorSet.setPreset(activePreset);\n\t\t\t\tthis.setGradientPreset(activePreset);\n\t\t\t}\n\n\t\t\tthis.tabs.showTab('Gradient');\n\t\t\tif (gradientValue.getOpacity() < 1)\n\t\t\t{\n\t\t\t\tthis.tabs.showTab('Opacity');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (this.activeControl === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (this.activeControl === this.gradient)\n\t\t\t{\n\t\t\t\tconst gradValue = this.gradient.getValue();\n\n\t\t\t\treturn (gradValue === null)\n\t\t\t\t\t? gradValue\n\t\t\t\t\t: gradValue.setOpacity(this.opacity.getValue().getOpacity());\n\t\t\t}\n\n\t\t\treturn super.getValue();\n\t\t});\n\t}\n}\n","import {matcherGradient} from './is-gradient-string';\nimport {regexpToString} from './regexp';\n\nexport const matcherBgImage = /url\\(['\"]?([^ '\"]*)['\"]?\\)([\\w \\/]*)/i;\n\nexport default function isBgImageString(bgImage: string)\n{\n\tif (!!bgImage.trim().match(matcherBgImage))\n\t{\n\t\treturn true;\n\t}\n\n\treturn !!bgImage.trim().match(getMatcherWithOverlay());\n}\n\nfunction getMatcherWithOverlay(): RegExp\n{\n\tconst matcherBgString = regexpToString(matcherBgImage);\n\tconst matcherGradientString = regexpToString(matcherGradient);\n\treturn new RegExp(`^${matcherGradientString},${matcherBgString}`);\n}\n\n","import {Type, Loc} from 'main.core';\n\nimport {\n\tBgImageValueOptions,\n\tdefaultBgImageValueOptions,\n\tdefaultBgImageSize,\n\tdefaultBgImageAttachment,\n} from \"./types/color_value_options\";\nimport {IColorValue} from './types/i_color_value';\n\nimport isBgImageString, {matcherBgImage} from './internal/is-bg-image-string';\nimport {matcherGradient, matcherGradientColors} from './internal/is-gradient-string';\nimport {regexpWoStartEnd} from './internal/regexp';\n\nimport ColorValue from './color_value';\n\nexport default class BgImageValue implements IColorValue\n{\n\tvalue: BgImageValueOptions;\n\n\tconstructor(value: BgImageValueOptions | BgImageValue | string)\n\t{\n\t\t// todo: add 2x, file ids\n\t\tthis.value = defaultBgImageValueOptions;\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn `\n\t\t\t${this.value.url.replace(/[^\\w\\d]/g, '')}_${this.value.size}_${this.value.attachment}\n\t\t`;\n\t}\n\n\tsetValue(value: BgImageValueOptions | BgImageValue | string): BgImageValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof BgImageValue)\n\t\t\t{\n\t\t\t\t// todo: add 2x and file IDs\n\t\t\t\tthis.value.url = value.getUrl();\n\t\t\t\tthis.value.url2x = value.getUrl2x();\n\t\t\t\tthis.value.fileId = value.getFileId();\n\t\t\t\tthis.value.fileId2x = value.getFileId2x();\n\t\t\t\tthis.value.size = value.getSize();\n\t\t\t\tthis.value.attachment = value.getAttachment();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.value = {...this.value, ...value};\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isString(value) && isBgImageString(value))\n\t\t{\n\t\t\tthis.parseBgString(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tparseBgString(string: string): void\n\t{\n\t\t// todo: check matcher for 2x\n\t\tconst options = defaultBgImageValueOptions;\n\n\t\tconst matchesBg = string.trim().match(regexpWoStartEnd(matcherBgImage));\n\t\tif (!!matchesBg)\n\t\t{\n\t\t\toptions.url = matchesBg[1];\n\n\t\t\toptions.size = matchesBg[2].indexOf('auto') === -1\n\t\t\t\t? defaultBgImageSize\n\t\t\t\t: 'auto'\n\t\t\t;\n\n\t\t\toptions.attachment = matchesBg[2].indexOf('fixed') === -1\n\t\t\t\t? defaultBgImageAttachment\n\t\t\t\t: 'fixed'\n\t\t\t;\n\t\t}\n\n\t\tconst matchesOverlay = string.trim().match(regexpWoStartEnd(matcherGradientColors));\n\t\tif(!!string.trim().match(regexpWoStartEnd(matcherGradient)) && !!matchesOverlay)\n\t\t{\n\t\t\toptions.overlay = new ColorValue(matchesOverlay[0]);\n\t\t}\n\n\t\tthis.setValue(options);\n\t}\n\n\tsetOpacity(opacity: number): BgImageValue\n\t{\n\t\t// todo: what for image?\n\n\t\treturn this;\n\t}\n\n\tsetUrl(value: string): BgImageValue\n\t{\n\t\tthis.setValue({url: value});\n\t\treturn this;\n\t}\n\n\tsetUrl2x(value: string): BgImageValue\n\t{\n\t\tthis.setValue({url2x: value});\n\t\treturn this;\n\t}\n\n\tsetFileId(value: number): BgImageValue\n\t{\n\t\tthis.setValue({fileId: value});\n\t\treturn this;\n\t}\n\n\tsetFileId2x(value: number): BgImageValue\n\t{\n\t\tthis.setValue({fileId2x: value});\n\t\treturn this;\n\t}\n\n\tsetSize(value: 'cover' | 'auto'): BgImageValue\n\t{\n\t\tthis.setValue({size: value});\n\t\treturn this;\n\t}\n\n\tsetAttachment(value: 'scroll' | 'fixed'): BgImageValue\n\t{\n\t\tthis.setValue({attachment: value});\n\t\treturn this;\n\t}\n\n\tsetOverlay(value: ColorValue)\n\t{\n\t\tthis.setValue({overlay: value});\n\t\treturn this;\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.value.url;\n\t}\n\n\tgetUrl2x(): ?string\n\t{\n\t\treturn this.value.url2x;\n\t}\n\n\tgetFileId(): number\n\t{\n\t\treturn this.value.fileId;\n\t}\n\n\tgetFileId2x(): ?number\n\t{\n\t\treturn this.value.fileId2x;\n\t}\n\n\tgetSize(): 'cover' | 'auto'\n\t{\n\t\treturn this.value.size;\n\t}\n\n\tgetAttachment(needBool: boolean = false): string | boolean\n\t{\n\t\treturn needBool\n\t\t\t? this.value.attachment === 'fixed'\n\t\t\t: this.value.attachment;\n\t}\n\n\tgetOverlay(): ColorValue\n\t{\n\t\treturn this.value.overlay;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\t// todo: how image can have opacity?\n\t\treturn 1;\n\t}\n\n\tgetStyleString(): string\n\t{\n\t\tlet style = '';\n\t\tif (this.value.overlay !== null)\n\t\t{\n\t\t\tstyle = `linear-gradient(${this.value.overlay.getStyleString()},${this.value.overlay.getStyleString()})`;\n\t\t}\n\n\t\t// todo: what if url is null\n\t\tconst {url, url2x, size, attachment} = this.value;\n\t\tconst endString = `center / ${size} ${attachment}`;\n\t\tif (url !== null)\n\t\t{\n\t\t\tstyle = style.length ? (style + ',') : '';\n\t\t\tif(url2x !== null)\n\t\t\t{\n\t\t\t\tstyle += `-webkit-image-set(url('${url}') 1x, url('${url2x}') 2x) ${endString},`;\n\t\t\t\tstyle += `image-set(url('${url}') 1x, url('${url2x}') 2x) ${endString},`;\n\t\t\t}\n\t\t\tstyle += `url('${url}') ${endString}`;\n\t\t}\n\n\t\treturn style;\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\t// todo: how image can have opacity?\n\t\treturn '';\n\t}\n\n\tstatic getSizeItemsForButtons(): []\n\t{\n\t\treturn [\n\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_COVER'), value: 'cover'},\n\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_MOSAIC'), value: 'auto'},\n\t\t];\n\t}\n\n\tstatic getAttachmentValueByBool(value: boolean): string\n\t{\n\t\treturn value ? 'fixed' : 'scroll';\n\t}\n}\n","import 'ui.design-tokens';\n\nimport {BaseEvent} from 'main.core.events';\nimport {Dom, Tag, Type, Loc, Text} from 'main.core';\nimport {Image as ImageField} from 'landing.ui.field.image';\nimport {Backend} from 'landing.backend';\nimport {Env} from 'landing.env';\nimport {PageObject} from 'landing.pageobject';\nimport BaseControl from \"../base_control/base_control\";\nimport BgImageValue from '../../bg_image_value';\nimport './css/image.css';\n\nexport default class Image extends BaseControl\n{\n\t// todo: move to type\n\toptions: {\n\t\tblock: BX.Landing.Block,\n\t\tstyleNode: BX.Landing.UI.Style,\n\t\tcontentRoot: ?HTMLDivElement,\n\t\tselector: string,\n\t};\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Image');\n\t\tthis.options = options;\n\t\tthis.imgField = new ImageField({\n\t\t\tid: 'landing_ui_color_image_' + Text.getRandom().toLowerCase(),\n\t\t\tclassName: 'landing-ui-field-color-image-image',\n\t\t\tcontextType: ImageField.CONTEXT_TYPE_STYLE,\n\t\t\tcompactMode: true,\n\t\t\tdisableLink: true,\n\t\t\tdisableAltField: true,\n\t\t\tallowClear: true,\n\t\t\tisAiImageAvailable: Env.getInstance().getOptions()['ai_image_available'],\n\t\t\tisAiImageActive: Env.getInstance().getOptions()['ai_image_active'],\n\t\t\taiUnactiveInfoCode: Env.getInstance().getOptions()['ai_unactive_info_code'],\n\t\t\tdimensions: {width: 1920},\n\t\t\tuploadParams: {\n\t\t\t\taction: \"Block::uploadFile\",\n\t\t\t\tblock: this.options.block.id,\n\t\t\t},\n\t\t\tcontentRoot: this.options.contentRoot,\n\t\t});\n\t\tthis.imgField.subscribe('change', this.onImageChange.bind(this));\n\n\t\tthis.sizeField = new BX.Landing.UI.Field.Dropdown({\n\t\t\tid: 'landing_ui_color_image_size_' + Text.getRandom().toLowerCase(),\n\t\t\ttitle: Loc.getMessage('LANDING_FIELD_COLOR-BG_SIZE_TITLE'),\n\t\t\tclassName: 'landing-ui-field-color-image-size',\n\t\t\titems: BgImageValue.getSizeItemsForButtons(),\n\t\t\tonChange: this.onSizeChange.bind(this),\n\t\t\tcontentRoot: this.options.contentRoot,\n\t\t});\n\n\t\tthis.attachmentField = new BX.Landing.UI.Field.Checkbox({\n\t\t\tid: 'landing_ui_color_image_attach_' + Text.getRandom().toLowerCase(),\n\t\t\tclassName: 'landing-ui-field-color-image-attachment',\n\t\t\tmultiple: false,\n\t\t\tcompact: true,\n\t\t\titems: [\n\t\t\t\t{ name: Loc.getMessage('LANDING_FIELD_COLOR-BG_FIXED'), value: 'fixed' },\n\t\t\t],\n\t\t\tonChange: this.onAttachmentChange.bind(this),\n\t\t\tvalue: [this.getAttachmentValue()],\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-image\">\n\t\t\t\t${this.imgField.getLayout()}\n\t\t\t\t${this.sizeField.getLayout()}\n\t\t\t\t${this.attachmentField.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonImageChange(event: BaseEvent)\n\t{\n\t\tconst value = this.getValue() || new BgImageValue();\n\t\tif (event.getData().value.src)\n\t\t{\n\t\t\tvalue.setUrl(event.getData().value.src);\n\t\t\tvalue.setFileId(event.getData().value.id);\n\t\t\tif (event.getData().value.src2x)\n\t\t\t{\n\t\t\t\tvalue.setUrl2x(event.getData().value.src2x);\n\t\t\t\tvalue.setFileId2x(event.getData().value.id2x);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvalue.setUrl(null);\n\t\t\tvalue.setFileId(null);\n\t\t\tvalue.setUrl2x(null);\n\t\t\tvalue.setFileId2x(null);\n\t\t}\n\n\t\tthis.setValue(value);\n\t\tthis.onChange();\n\n\t\tthis.saveNode(value);\n\t}\n\n\tsaveNode(value: BgImageValue)\n\t{\n\t\tconst style = this.options.styleNode;\n\t\tconst block = this.options.block;\n\n\t\tlet selector;\n\t\tif (\n\t\t\tstyle.selector === block.selector\n\t\t\t|| style.selector === block.makeAbsoluteSelector(block.selector)\n\t\t)\n\t\t{\n\t\t\tselector = '#wrapper';\n\t\t}\n\t\telse if (!style.isSelectGroup())\n\t\t{\n\t\t\tselector = BX.Landing.Utils.join(\n\t\t\t\tstyle.selector.split(\"@\")[0],\n\t\t\t\t\"@\",\n\t\t\t\tstyle.getElementIndex(style.getNode()[0])\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselector = style.selector.split(\"@\")[0];\n\t\t}\n\n\t\tconst data = {[selector]: {}};\n\t\tdata[selector].id = value.getFileId() || -1;\n\t\tdata[selector].id2x = value.getFileId2x() || -1;\n\n\t\tBackend.getInstance()\n\t\t\t.action(\n\t\t\t\t\"Landing\\\\Block::updateNodes\",\n\t\t\t\t{\n\t\t\t\t\tlid: this.options.block.lid,\n\t\t\t\t\tblock: this.options.block.id,\n\t\t\t\t\tdata: data,\n\t\t\t\t},\n\t\t\t)\n\t}\n\n\tonSizeChange(size: string)\n\t{\n\t\tif (Type.isString(size))\n\t\t{\n\t\t\tconst value = this.getValue() || new BgImageValue();\n\t\t\tvalue.setSize(size);\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tonAttachmentChange(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tconst value = this.getValue() || new BgImageValue();\n\t\t\tvalue.setAttachment(\n\t\t\t\tBgImageValue.getAttachmentValueByBool(this.attachmentField.getValue()),\n\t\t\t);\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {data: {image: this.getValue()}});\n\t}\n\n\tgetValue(): ?BgImageValue\n\t{\n\t\t// todo: get size and attachement from controls\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst imgValue = this.imgField.getValue();\n\t\t\tconst url = imgValue.src;\n\t\t\tif (url === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst value = new BgImageValue({\n\t\t\t\t\turl: url,\n\t\t\t\t\tfileId: imgValue.id,\n\t\t\t\t});\n\t\t\t\tif (imgValue.src2x)\n\t\t\t\t{\n\t\t\t\t\tvalue.setUrl2x(imgValue.src2x);\n\t\t\t\t\tvalue.setFileId2x(imgValue.fileId2x);\n\t\t\t\t}\n\t\t\t\tconst size = this.sizeField.getValue();\n\t\t\t\tif (size !== null)\n\t\t\t\t{\n\t\t\t\t\tvalue.setSize(size);\n\t\t\t\t}\n\n\t\t\t\tvalue.setAttachment(BgImageValue.getAttachmentValueByBool(this.attachmentField.getValue()));\n\n\t\t\t\t// todo: set overlay\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\n\tsetValue(value: ?BgImageValue)\n\t{\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\t// todo: can delete prev image\n\t\t\tsuper.setValue(value);\n\n\t\t\tif (value === null)\n\t\t\t{\n\t\t\t\tthis.imgField.setValue({src: ''}, true);\n\t\t\t\t// todo: what set size and attachement?\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (value.getUrl() !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.setActive();\n\t\t\t\t}\n\n\t\t\t\tconst imgFieldValue = {\n\t\t\t\t\ttype: 'image',\n\t\t\t\t\tsrc: value.getUrl(),\n\t\t\t\t\tid: value.getFileId(),\n\t\t\t\t};\n\t\t\t\tif (value.getUrl2x())\n\t\t\t\t{\n\t\t\t\t\timgFieldValue.src2x = value.getUrl2x();\n\t\t\t\t\timgFieldValue.id2x = value.getFileId2x();\n\t\t\t\t}\n\t\t\t\tthis.imgField.setValue(imgFieldValue, true);\n\t\t\t\tthis.sizeField.setValue(this.getSizeValue(), true);\n\t\t\t\tthis.attachmentField.setValue([this.getAttachmentValue()]);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.imgField.getLayout(), Image.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.imgField.getLayout(), Image.ACTIVE_CLASS);\n\t}\n\n\tgetAttachmentValue(): string\n\t{\n\t\tif (\n\t\t\tthis.options\n\t\t\t&& this.options.block\n\t\t\t&& this.options.block.content\n\t\t\t&& Dom.hasClass(this.options.block.content, 'g-bg-image')\n\t\t)\n\t\t{\n\t\t\tconst blockContentStyle = window.getComputedStyle(this.options.block.content);\n\t\t\tconst bgAttachmentValue = blockContentStyle.getPropertyValue('background-attachment');\n\n\t\t\treturn bgAttachmentValue.includes('fixed') ? 'fixed' : 'scroll';\n\t\t}\n\n\t\treturn 'scroll';\n\t}\n\n\tgetSizeValue(): string\n\t{\n\t\tif (\n\t\t\tthis.options\n\t\t\t&& this.options.block\n\t\t\t&& this.options.block.content\n\t\t\t&& Dom.hasClass(this.options.block.content, 'g-bg-image')\n\t\t)\n\t\t{\n\t\t\tconst blockContentStyle = window.getComputedStyle(this.options.block.content);\n\t\t\tconst bgSizeValue = blockContentStyle.getPropertyValue('background-size');\n\n\t\t\treturn bgSizeValue.includes('cover') ? 'cover' : 'auto';\n\t\t}\n\n\t\treturn 'cover';\n\t}\n}\n","export default function rgbaStringToRgbString(str: string): string | null\n{\n\tconst regRgba = /\\d{1,3}(\\.\\d+)?/g;\n\tconst rgba = str.match(regRgba);\n\tconst r = rgba[0] ? rgba[0] : null;\n\tconst g = rgba[1] ? rgba[1] : null;\n\tconst b = rgba[2] ? rgba[2] : null;\n\tif (r === null || g === null || b === null)\n\t{\n\t\treturn null;\n\t}\n\treturn createRgbString(r, g, b);\n}\n\nfunction createRgbString(r, g, b): string\n{\n\treturn 'rgb(' + r + ',' + g + ','+ b + ')';\n}","import {Tag, Type, Loc, Dom} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport BgColor from './bg_color';\nimport Image from '../control/image/image';\nimport ColorSet from '../control/color_set/color_set';\n\nimport ColorValue from \"../color_value\";\nimport BgImageValue from '../bg_image_value';\nimport {IColorValue} from '../types/i_color_value';\nimport Opacity from '../control/opacity/opacity';\nimport Tabs from '../layout/tabs/tabs';\nimport GradientValue from '../gradient_value';\nimport Primary from '../layout/primary/primary';\nimport Zeroing from '../layout/zeroing/zeroing';\nimport {defaultBgImageSize, defaultBgImageAttachment} from \"../types/color_value_options\";\nimport rgbaStringToRgbString from '../internal/rgba-string-to-rgb-string';\n\nexport default class Bg extends BgColor\n{\n\tstatic BG_URL_VAR: string = '--bg-url';\n\tstatic BG_URL_2X_VAR: string = '--bg-url-2x';\n\tstatic BG_OVERLAY_VAR: string = '--bg-overlay';\n\tstatic BG_SIZE_VAR: string = '--bg-size';\n\tstatic BG_ATTACHMENT_VAR: string = '--bg-attachment';\n\tstatic BG_IMAGE: string = 'background-image';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.Bg');\n\t\tthis.styleNode = options.styleNode;\n\t\tthis.parentVariableName = this.variableName;\n\t\tthis.variableName = [\n\t\t\tthis.parentVariableName,\n\t\t\tBg.BG_URL_VAR,\n\t\t\tBg.BG_URL_2X_VAR,\n\t\t\tBg.BG_OVERLAY_VAR,\n\t\t\tBg.BG_SIZE_VAR,\n\t\t\tBg.BG_ATTACHMENT_VAR,\n\t\t\tBg.BG_IMAGE,\n\t\t];\n\t\tthis.parentClassName = this.className;\n\t\tthis.className = 'g-bg-image';\n\n\t\tthis.image = new Image(options);\n\t\tthis.image.subscribe('onChange', this.onImageChange.bind(this));\n\n\t\tthis.overlay = new ColorSet(options);\n\t\tthis.overlay.subscribe('onChange', this.onOverlayColorChange.bind(this));\n\t\tthis.overlayOpacity = new Opacity({defaultOpacity: 0.5});\n\t\tthis.overlayOpacity.subscribe('onChange', this.onOverlayOpacityChange.bind(this));\n\t\tthis.overlayPrimary = new Primary();\n\t\tthis.overlayPrimary.subscribe('onChange', this.onOverlayPrimaryChange.bind(this));\n\t\tconst overlayZeroingOptions = {\n\t\t\ttextCode: 'LANDING_FIELD_COLOR_OVERLAY_ZEROING_TITLE_2',\n\t\t\tstyleNode: options.styleNode,\n\t\t};\n\t\tthis.overlayZeroing = new Zeroing(overlayZeroingOptions);\n\t\tthis.overlayZeroing.subscribe('onChange', this.overlayZeroingChange.bind(this));\n\n\t\tthis.imageTabs = new Tabs().appendTab(\n\t\t\t'Overlay',\n\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_OVERLAY'),\n\t\t\t[this.overlay, this.overlayPrimary, this.overlayZeroing, this.overlayOpacity],\n\t\t);\n\n\t\tthis.bigTabs = new Tabs()\n\t\t\t.setBig(true)\n\t\t\t.appendTab(\n\t\t\t\t'Color',\n\t\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_COLOR'),\n\t\t\t\t[this.colorSet, this.primary, this.zeroing, this.tabs],\n\t\t\t)\n\t\t\t.appendTab(\n\t\t\t\t'Image',\n\t\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_IMAGE'),\n\t\t\t\t[this.image, this.imageTabs],\n\t\t\t);\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-color\">\n\t\t\t\t${this.bigTabs.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.image.unsetActive();\n\t\tthis.overlay.unsetActive();\n\n\t\tsuper.onColorSetChange(event);\n\t}\n\n\tonGradientChange(event: BaseEvent)\n\t{\n\t\tthis.image.unsetActive();\n\t\tthis.overlay.unsetActive();\n\n\t\tsuper.onGradientChange(event);\n\t}\n\n\tonImageChange()\n\t{\n\t\t// todo: can drop image from b_landing_file after change\n\t\tthis.unsetActive();\n\n\t\tthis.activeControl = this.image;\n\t\tthis.image.setActive();\n\n\t\tthis.modifyStyleNode(this.styleNode);\n\t}\n\n\tonOverlayChange(event: BaseEvent)\n\t{\n\t\tconst overlayValue = event.getData().color;\n\t\tif (overlayValue !== null)\n\t\t{\n\t\t\toverlayValue.setOpacity(this.overlayOpacity.getValue().getOpacity());\n\t\t}\n\t\tthis.overlayOpacity.setValue(overlayValue);\n\n\t\tconst imageValue = this.image.getValue();\n\t\tif (imageValue !== null)\n\t\t{\n\t\t\tthis.image.setValue(imageValue.setOverlay(overlayValue));\n\t\t\tthis.activeControl = this.image;\n\t\t\tthis.image.setActive();\n\t\t\tthis.colorSet.unsetActive();\n\t\t\tthis.gradient.unsetActive();\n\t\t}\n\n\t\tthis.modifyStyleNode(this.styleNode);\n\t}\n\n\tonOverlayOpacityChange()\n\t{\n\t\tthis.modifyStyleNode(this.styleNode);\n\t}\n\n\tonOverlayColorChange(event: BaseEvent)\n\t{\n\t\tthis.overlayPrimary.unsetActive();\n\t\tthis.overlayZeroing.unsetActive();\n\t\tthis.onOverlayChange(event);\n\t}\n\n\tonOverlayPrimaryChange(event: BaseEvent)\n\t{\n\t\tthis.overlay.unsetActive();\n\t\tthis.overlayZeroing.unsetActive();\n\t\tthis.onOverlayChange(event);\n\t}\n\n\toverlayZeroingChange(event: BaseEvent)\n\t{\n\t\tthis.overlay.unsetActive();\n\t\tthis.overlayPrimary.unsetActive();\n\t\tthis.overlayZeroing.setActive();\n\t\tthis.onOverlayChange(event);\n\t}\n\n\tunsetActive()\n\t{\n\t\tsuper.unsetActive();\n\t\tthis.image.unsetActive();\n\t}\n\n\t/**\n\t * Set value by new format\n\t */\n\tsetProcessorValue(value: {string: string}): void\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.setValue(value);\n\t}\n\n\tsetValue(value: {string: string} | string | null): void\n\t{\n\t\tthis.image.setValue(null);\n\t\tthis.bigTabs.showTab('Color');\n\n\t\tif (Type.isNull(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t}\n\t\telse if (Type.isString(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t}\n\t\telse if (this.parentVariableName in value && Type.isString(value[this.parentVariableName]))\n\t\t{\n\t\t\tsuper.setValue(value[this.parentVariableName]);\n\t\t}\n\t\telse if (Type.isObject(value))\n\t\t{\n\t\t\t// todo: super.setValue null?\n\t\t\tconst bgValue = new BgImageValue();\n\t\t\tif (Bg.BG_URL_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setUrl(value[Bg.BG_URL_VAR].replace(/url\\([\"']/i, '').replace(/['\"]\\)/i, ''));\n\t\t\t}\n\t\t\tif (Bg.BG_URL_2X_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setUrl2x(value[Bg.BG_URL_2X_VAR].replace(/url\\([\"']/i, '').replace(/['\"]\\)/i, ''));\n\t\t\t}\n\t\t\tif (Bg.BG_SIZE_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setSize(value[Bg.BG_SIZE_VAR]);\n\t\t\t}\n\t\t\tif (Bg.BG_ATTACHMENT_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setAttachment(value[Bg.BG_ATTACHMENT_VAR]);\n\t\t\t}\n\t\t\tif (Bg.BG_OVERLAY_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setOverlay(new ColorValue(value[Bg.BG_OVERLAY_VAR]));\n\t\t\t}\n\t\t\tthis.image.setValue(bgValue);\n\t\t\tthis.bigTabs.showTab('Image');\n\t\t\tthis.activeControl = this.image;\n\n\t\t\tthis.imageTabs.showTab('Overlay');\n\t\t\tif (Bg.BG_OVERLAY_VAR in value)\n\t\t\t{\n\t\t\t\tconst overlayValue = new ColorValue(value[Bg.BG_OVERLAY_VAR]);\n\t\t\t\tthis.overlay.setValue(overlayValue);\n\t\t\t\tthis.overlayOpacity.setValue(overlayValue);\n\t\t\t\tif (value[Bg.BG_OVERLAY_VAR].startsWith('var(--primary') || value['isPrimaryBasedColor'] === true)\n\t\t\t\t{\n\t\t\t\t\tthis.overlayPrimary.setActive();\n\t\t\t\t\tthis.overlay.unsetActive();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.overlayZeroing.setActive();\n\t\t\t}\n\t\t}\n\t}\n\n\t// todo: create base value instead interface. In this case can return ALL types, color, grad, bg\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (this.activeControl === this.image)\n\t\t\t{\n\t\t\t\tconst imageValue = this.image.getValue();\n\t\t\t\tlet overlayValue;\n\t\t\t\tlet isActive = false;\n\t\t\t\tif (this.overlay.isActive())\n\t\t\t\t{\n\t\t\t\t\toverlayValue = this.overlay.getValue();\n\t\t\t\t\tisActive = true;\n\t\t\t\t}\n\t\t\t\tif (this.overlayPrimary.isActive())\n\t\t\t\t{\n\t\t\t\t\toverlayValue = this.overlayPrimary.getValue();\n\t\t\t\t\tisActive = true;\n\t\t\t\t}\n\t\t\t\tif (this.overlayZeroing.isActive())\n\t\t\t\t{\n\t\t\t\t\toverlayValue = null;\n\t\t\t\t}\n\t\t\t\tif (imageValue !== null && overlayValue !== null && isActive)\n\t\t\t\t{\n\t\t\t\t\toverlayValue.setOpacity(this.overlayOpacity.getValue().getOpacity());\n\t\t\t\t\timageValue.setOverlay(overlayValue);\n\t\t\t\t}\n\n\t\t\t\treturn imageValue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn super.getValue();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetClassName(): [string]\n\t{\n\t\tconst value = this.getValue();\n\t\tif (value === null || value instanceof ColorValue || value instanceof GradientValue)\n\t\t{\n\t\t\treturn [this.parentClassName];\n\t\t}\n\n\t\treturn [this.className];\n\t}\n\n\t// todo: what about fileid?\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\t// todo: not null, but what?\n\t\t\treturn {\n\t\t\t\t[this.parentVariableName]: null,\n\t\t\t\t[Bg.BG_URL_VAR]: null,\n\t\t\t\t[Bg.BG_URL_2X_VAR]: null,\n\t\t\t\t[Bg.BG_OVERLAY_VAR]: null,\n\t\t\t\t[Bg.BG_SIZE_VAR]: null,\n\t\t\t\t[Bg.BG_ATTACHMENT_VAR]: null,\n\t\t\t};\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tlet color = null;\n\t\tlet image = null;\n\t\tlet image2x = null;\n\t\tlet overlay = null;\n\t\tlet size = null;\n\t\tlet attachment = null;\n\t\tconst backgroundImage = '';\n\t\tif (value instanceof ColorValue || value instanceof GradientValue)\n\t\t{\n\t\t\t// todo: need change class if not a image?\n\t\t\tcolor = value.getStyleString();\n\t\t}\n\t\telse\n\t\t{\n\t\t\timage = value.getUrl() ? `url('${value.getUrl()}')` : '';\n\t\t\timage2x = value.getUrl2x() ? `url('${value.getUrl2x()}')` : '';\n\t\t\toverlay = value.getOverlay() ? value.getOverlay().getStyleString() : 'rgba(0, 0, 0, 0)';\n\t\t\tsize = value.getSize();\n\t\t\tattachment = value.getAttachment();\n\t\t}\n\n\t\treturn {\n\t\t\t[this.parentVariableName]: color,\n\t\t\t[Bg.BG_URL_VAR]: image,\n\t\t\t[Bg.BG_URL_2X_VAR]: image2x ? image2x : image,\n\t\t\t[Bg.BG_OVERLAY_VAR]: overlay,\n\t\t\t[Bg.BG_SIZE_VAR]: size,\n\t\t\t[Bg.BG_ATTACHMENT_VAR]: attachment,\n\t\t\t[Bg.BG_IMAGE]: backgroundImage,\n\t\t};\n\t}\n\n\tmodifyStyleNode(styleNode)\n\t{\n\t\tDom.style(styleNode.getNode()[0], Bg.BG_IMAGE, '');\n\t\tthis.onChange();\n\t}\n\n\tprepareProcessorValue(processorValue, defaultValue)\n\t{\n\t\tif (defaultValue && defaultValue.hasOwnProperty(Bg.BG_IMAGE))\n\t\t{\n\t\t\tconst regUrl = /url\\(/i;\n\t\t\tconst searchUrl = defaultValue[Bg.BG_IMAGE].match(regUrl);\n\t\t\tif (searchUrl !== null)\n\t\t\t{\n\t\t\t\tprocessorValue[Bg.BG_IMAGE] = '';\n\t\t\t\tprocessorValue[Bg.BG_SIZE_VAR] = defaultBgImageSize;\n\t\t\t\tprocessorValue[Bg.BG_ATTACHMENT_VAR] = defaultBgImageAttachment;\n\t\t\t\tconst regUrl = /image-set\\(url\\(/i;\n\t\t\t\tconst searchUrl = defaultValue[Bg.BG_IMAGE].match(regUrl);\n\t\t\t\tif (searchUrl !== null)\n\t\t\t\t{\n\t\t\t\t\tconst regSearchUrl = /[\"'](https?:\\/)?\\/[\\S]*[\"']/gi;\n\t\t\t\t\tconst search = defaultValue[Bg.BG_IMAGE].match(regSearchUrl);\n\t\t\t\t\tif (search)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst regReplace = /[\"']/g;\n\t\t\t\t\t\tprocessorValue[Bg.BG_URL_VAR] = search[0].replaceAll(regReplace, '');\n\t\t\t\t\t\tif (search.length === 2)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprocessorValue[Bg.BG_URL_2X_VAR] = search[1].replaceAll(regReplace, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprocessorValue[Bg.BG_URL_2X_VAR] = search[0].replaceAll(regReplace, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tprocessorValue[Bg.BG_URL_VAR] = defaultValue[Bg.BG_IMAGE];\n\t\t\t\t\tprocessorValue[Bg.BG_URL_2X_VAR] = defaultValue[Bg.BG_IMAGE];\n\t\t\t\t}\n\t\t\t\tconst computedStyleNode = getComputedStyle(this.styleNode.getNode()[0], ':after');\n\t\t\t\tif (!processorValue[Bg.BG_OVERLAY_VAR])\n\t\t\t\t{\n\t\t\t\t\tprocessorValue[Bg.BG_OVERLAY_VAR] = computedStyleNode.backgroundColor;\n\t\t\t\t}\n\t\t\t\tconst currentColorRgb = rgbaStringToRgbString(computedStyleNode.backgroundColor);\n\t\t\t\tconst primaryColorRgb = rgbaStringToRgbString(computedStyleNode.getPropertyValue('--primary-opacity-0'));\n\t\t\t\tif (\n\t\t\t\t\tcurrentColorRgb !== null\n\t\t\t\t\t&& primaryColorRgb !== null\n\t\t\t\t\t&& currentColorRgb === primaryColorRgb\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tprocessorValue['isPrimaryBasedColor'] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn processorValue;\n\t}\n}\n","import Color from \"./color\";\n\nexport default class BorderColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColor');\n\t\tthis.property = 'border-color';\n\t\tthis.variableName = '--border-color';\n\t\tthis.className = 'g-border-color';\n\t}\n}","import Color from \"./color\";\n\nexport default class BorderColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColorHover');\n\t\tthis.property = 'border-color';\n\t\tthis.variableName = '--border-color--hover';\n\t\tthis.className = 'g-border-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import BgColor from './bg_color';\n\nexport default class BgColorHover extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorHover');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg-hover';\n\t\tthis.className = 'g-bg--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import BgColor from './bg_color';\n\nimport ColorValue from '../color_value';\n\nexport default class BgColorAfter extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorAfter');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg--after';\n\t\tthis.className = 'g-bg--after';\n\t\tthis.pseudoClass = ':after';\n\n\t\tconst opacityValue = this.getValue() || new ColorValue();\n\t\tthis.opacity.setValue(opacityValue.setOpacity(0.5));\n\t\tthis.tabs.showTab('Opacity');\n\t}\n}\n","import BgColor from './bg_color';\nimport ColorValue from '../color_value';\n\nexport default class BgColorBefore extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorBefore');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg--before';\n\t\tthis.className = 'g-bg--before';\n\t\tthis.pseudoClass = ':before';\n\n\t\tconst opacityValue = this.getValue() || new ColorValue();\n\t\tthis.opacity.setValue(opacityValue.setOpacity(0.5));\n\t\tthis.tabs.showTab('Opacity');\n\t}\n}\n","import Color from './color';\n\nexport default class NavbarColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColor');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color';\n\t\tthis.className = 'u-navbar-color';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--hover';\n\t\tthis.className = 'u-navbar-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorFixMoment extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorFixMoment');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--fix-moment';\n\t\tthis.className = 'u-navbar-color--fix-moment';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorFixMomentHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorFixMomentHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--fix-moment--hover';\n\t\tthis.className = 'u-navbar-color--fix-moment--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from './color';\n\nexport default class NavbarBgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarBgColor');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-bg-color';\n\t\tthis.className = 'u-navbar-bg';\n\t}\n}","import Color from './color';\n\nexport default class NavbarBgColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarBgColorHover');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-bg-color--hover';\n\t\tthis.className = 'u-navbar-bg--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from \"./color\";\n\nexport default class BorderColorTop extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColorTop');\n\t\tthis.property = 'border-top-color';\n\t\tthis.variableName = '--border-color-top';\n\t\tthis.className = 'g-border-color-top';\n\t}\n}","import Color from \"./color\";\n\nexport default class FillColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.FillColor');\n\t\tthis.property = 'fill';\n\t\tthis.pseudoClass = ':before';\n\t\tthis.variableName = '--fill-first';\n\t\tthis.className = 'g-fill-first';\n\t}\n}","import Color from \"./color\";\n\nexport default class FillColorSecond extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.FillColorSecond');\n\t\tthis.property = 'fill';\n\t\tthis.pseudoClass = ':after';\n\t\tthis.variableName = '--fill-second';\n\t\tthis.className = 'g-fill-second';\n\t}\n}","import Color from \"./color\";\nimport ColorValue from '../color_value';\n\nexport default class ButtonColor extends Color\n{\n\tstatic COLOR_CONTRAST_VAR: string = '--button-color-contrast';\n\tstatic COLOR_HOVER_VAR: string = '--button-color-hover';\n\tstatic COLOR_LIGHT_VAR: string = '--button-color-light';\n\tstatic COLOR_VAR: string = '--button-color';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.ButtonColor');\n\t\tthis.property = 'background-color';\n\t\t// order is important! Base variable must be last. Hack :-/\n\t\tthis.variableName = [\n\t\t\tButtonColor.COLOR_CONTRAST_VAR,\n\t\t\tButtonColor.COLOR_HOVER_VAR,\n\t\t\tButtonColor.COLOR_LIGHT_VAR,\n\t\t\tButtonColor.COLOR_VAR,\n\t\t];\n\t\tthis.className = 'g-button-color';  //todo: ?\n\t}\n\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\treturn {\n\t\t\t\t[ButtonColor.COLOR_CONTRAST_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_HOVER_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_LIGHT_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_VAR]: null,\n\t\t\t};\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tconst valueContrast = value.getContrast().lighten(10);\n\t\tconst valueHover = new ColorValue(value).lighten(10);\n\t\tconst valueLight = value.getLighten();\n\n\t\treturn {\n\t\t\t[ButtonColor.COLOR_CONTRAST_VAR]: valueContrast.getStyleString(),\n\t\t\t[ButtonColor.COLOR_HOVER_VAR]: valueHover.getStyleString(),\n\t\t\t[ButtonColor.COLOR_LIGHT_VAR]: valueLight.getStyleString(),\n\t\t\t[ButtonColor.COLOR_VAR]: value.getStyleString(),\n\t\t};\n\t}\n}","import Color from './color';\n\nexport default class NavbarCollapseBgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarCollapseBgColor');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-collapse-bg-color';\n\t\tthis.className = 'u-navbar-collapse-bg';\n\t}\n}","import {Dom, Type} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\nimport {TextField} from 'landing.ui.field.textfield';\nimport ColorPopup from './control/color_popup/color_popup';\n\nimport BaseProcessor from './processor/base_processor';\nimport Color from './processor/color';\nimport ColorHover from './processor/color_hover';\nimport Bg from './processor/bg';\nimport BorderColor from './processor/border_color';\nimport BorderColorHover from './processor/border_color_hover';\nimport BgColor from './processor/bg_color';\nimport BgColorHover from './processor/bg_color_hover';\nimport BgColorAfter from './processor/bg_color_after';\nimport BgColorBefore from './processor/bg_color_before';\nimport NavbarColor from './processor/navbar_color';\nimport NavbarColorHover from './processor/navbar_color_hover';\nimport NavbarColorFixMoment from './processor/navbar_color_fix_moment';\nimport NavbarColorFixMomentHover from './processor/navbar_color_fix_moment_hover';\nimport NavbarBgColor from './processor/navbar_bg';\nimport NavbarBgColorHover from './processor/navbar_bg_hover';\nimport BorderColorTop from './processor/border_color-top';\nimport FillColor from './processor/fill_color';\nimport FillColorSecond from './processor/fill_color_second';\nimport ButtonColor from './processor/button_color';\nimport {IColorValue} from './types/i_color_value';\nimport NavbarCollapseBgColor from './processor/navbar_collapse_bg';\nimport ColorValue from './color_value';\nimport BgImageValue from './bg_image_value';\nimport GradientValue from './gradient_value';\n\nexport class ColorField extends BaseField\n{\n\tprocessor: BaseProcessor;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.items = ('items' in options && options.items) ? options.items : [];\n\t\tthis.postfix = (typeof options.postfix === 'string') ? options.postfix : '';\n\t\tthis.frame = (typeof options.frame === 'object') ? options.frame : null;\n\t\tconst processorOptions = {\n\t\t\tblock: options.block,\n\t\t\tstyle: options.style,\n\t\t\tstyleNode: options.styleNode,\n\t\t\tselector: options.selector,\n\t\t\tcontentRoot: this.contentRoot,\n\t\t\tcontent: options.content,\n\t\t};\n\n\t\tthis.changeHandler = (typeof options.onChange === \"function\") ? options.onChange : (() => {});\n\t\tthis.valueChangeHandler = (typeof options.onValueChange === \"function\") ? options.onValueChange : (() => {});\n\n\t\t// todo: rename \"subtype\"\n\t\tswitch (options.subtype)\n\t\t{\n\t\t\tcase 'color':\n\t\t\t\tthis.processor = new Color(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'color-hover':\n\t\t\t\tthis.processor = new ColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg':\n\t\t\t\tthis.processor = new Bg(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color':\n\t\t\t\tthis.processor = new BgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-hover':\n\t\t\t\tthis.processor = new BgColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-after':\n\t\t\t\tthis.processor = new BgColorAfter(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-before':\n\t\t\t\tthis.processor = new BgColorBefore(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color':\n\t\t\t\tthis.processor = new BorderColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color-hover':\n\t\t\t\tthis.processor = new BorderColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color-top':\n\t\t\t\tthis.processor = new BorderColorTop(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color':\n\t\t\t\tthis.processor = new NavbarColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-hover':\n\t\t\t\tthis.processor = new NavbarColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-fix-moment':\n\t\t\t\tthis.processor = new NavbarColorFixMoment(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-fix-moment-hover':\n\t\t\t\tthis.processor = new NavbarColorFixMomentHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-bg-color':\n\t\t\t\tthis.processor = new NavbarBgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-bg-color-hover':\n\t\t\t\tthis.processor = new NavbarBgColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-collapse-bg-color':\n\t\t\t\tthis.processor = new NavbarCollapseBgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'fill-color':\n\t\t\t\tthis.processor = new FillColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'fill-color-second':\n\t\t\t\tthis.processor = new FillColorSecond(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'button-color':\n\t\t\t\tthis.processor = new ButtonColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (!this.processor)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.property = this.processor.getProperty()[this.processor.getProperty().length - 1];\n\t\tthis.processor.getClassName().forEach(\n\t\t\titem => this.items.push({name: item, value: item}),\n\t\t);\n\n\t\t// todo: what a input?\n\t\tDom.remove(this.input);\n\t\tthis.layout.classList.add(\"landing-ui-field-color\");\n\t\tDom.append(this.processor.getLayout(), this.layout);\n\n\t\tthis.processor.subscribe('onChange', this.onChange.bind(this));\n\t}\n\n\tgetInlineProperties(): [string]\n\t{\n\t\treturn this.processor.getVariableName();\n\t}\n\n\tprepareInlineProperties(props): [string]\n\t{\n\t\tprops.push('background-image');\n\t\treturn props;\n\t}\n\n\tgetComputedProperties(): [string]\n\t{\n\t\treturn this.processor.getProperty();\n\t}\n\n\tgetPseudoElement(): ?string\n\t{\n\t\treturn this.processor.getPseudoClass();\n\t}\n\n\tonChange()\n\t{\n\t\tthis.changeHandler(\n\t\t\t{\n\t\t\t\tclassName: this.processor.getClassName(),\n\t\t\t\tstyle: this.processor.getStyle(),\n\t\t\t},\n\t\t\tthis.items,\n\t\t\tthis.postfix,\n\t\t\tthis.property,\n\t\t);\n\n\t\t// add fake text field for correctly getValue() in handler\n\t\tconst value = this.getValue();\n\n\t\tlet content = '';\n\t\tif (value instanceof ColorValue)\n\t\t{\n\t\t\tcontent = value.getStyleString();\n\t\t}\n\t\telse if (value instanceof BgImageValue)\n\t\t{\n\t\t\tcontent = value.getUrl();\n\t\t}\n\t\telse if (value instanceof GradientValue)\n\t\t{\n\t\t\tcontent = value.getStyleString();\n\t\t}\n\n\t\tthis.valueChangeHandler(\n\t\t\tnew TextField({\n\t\t\t\tselector: this.selector,\n\t\t\t\tattribute: this.attribute,\n\t\t\t\tcontent: content,\n\t\t\t\ttextOnly: true,\n\t\t\t})\n\t\t);\n\n\t\tthis.emit('onChange');\n\t}\n\n\tgetValue(): IColorValue\n\t{\n\t\treturn this.processor.getValue() || this.processor.getNullValue();\n\t}\n\n\tsetValue(value: {string: ?string})\n\t{\n\t\tlet processorValue = null;\n\t\t// now for multiple properties get just last value. Maybe, need object-like values\n\t\tthis.prepareInlineProperties(this.getInlineProperties()).forEach(prop => {\n\t\t\tif (prop in value && !this.processor.isNullValue(value[prop]))\n\t\t\t{\n\t\t\t\tif (!Type.isObject(processorValue))\n\t\t\t\t{\n\t\t\t\t\tprocessorValue = {};\n\t\t\t\t}\n\t\t\t\tprocessorValue[prop] = value[prop];\n\t\t\t}\n\t\t});\n\n\t\tlet defaultValue = null;\n\t\tthis.getComputedProperties().forEach(prop => {\n\t\t\tif (prop in value && !this.processor.isNullValue(value[prop]))\n\t\t\t{\n\t\t\t\tif (!Type.isObject(defaultValue))\n\t\t\t\t{\n\t\t\t\t\tdefaultValue = {};\n\t\t\t\t}\n\t\t\t\tdefaultValue[prop] = value[prop];\n\t\t\t}\n\t\t});\n\n\t\tprocessorValue = this.processor.prepareProcessorValue(processorValue, defaultValue);\n\t\tif (processorValue !== null)\n\t\t{\n\t\t\tthis.processor.setProcessorValue(processorValue);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.processor.setDefaultValue(defaultValue);\n\t\t\tthis.processor.defineActiveControl(this.items, this.data.styleNode);\n\t\t}\n\t}\n\n\tonFrameLoad()\n\t{\n\t\t// todo: now not work with \"group select\", can use just any node from elements. If group - need forEach\n\t\tconst value = this.data.styleNode.getValue(true);\n\t\tthis.setValue(value.style);\n\t}\n\n\tcreatePopup(options)\n\t{\n\t\tthis.colorPopup = new ColorPopup(options);\n\t}\n}"],"names":["matcher","isRgbString","rgbString","match","matcherHex","isHex","hex","trim","matcherHsl","isHslString","hsla","hexToRgb","length","r","parseInt","g","b","rgbToHsla","rgb","max","Math","min","h","s","l","d","round","a","hexToHsl","rgbToHex","toString","hslToRgb","hsl","c","abs","x","m","hslToHex","rgbStringToHsla","matches","Text","toNumber","hslStringToHsl","hslString","isCssVar","css","parseCssVar","cssVar","full","name","cssVarWithOpacity","cssVarWithOpacity0","startsWith","opacity","newOpacity","substr","parseFloat","replace","toFixed","defaultColorValueOptions","defaultBgImageSize","defaultBgImageAttachment","defaultOverlay","defaultBgImageValueOptions","url","size","attachment","overlay","ColorValue","constructor","value","setValue","getName","getHex","getOpacity","getHsl","Type","isObject","getHsla","getCssVar","getHexOriginal","isString","cssPrimaryVarName","Dom","style","document","documentElement","setOpacity","offsetFromCorrectValue","lighten","percent","darken","saturate","desaturate","adjustHue","degree","getStyleString","fullCssVar","String","getStyleStringForOpacity","compare","color1","color2","getMedian","getContrast","k","rad","PI","sin","deltaL","getLighten","BaseControl","EventEmitter","options","cache","Cache","MemoryCache","getLayout","remember","buildLayout","Tag","render","getValue","isNeedSetValue","set","onChange","event","delete","emit","color","setActive","addClass","ACTIVE_CLASS","unsetActive","removeClass","isActive","hasClass","Hex","setEventNamespace","onInput","Runtime","debounce","bind","previewMode","Event","getInput","adjustColors","DEFAULT_COLOR","DEFAULT_BG","modeClass","getPreview","getButton","DEFAULT_TEXT","replaceAll","slice","toLowerCase","textColor","bgColor","focus","unFocus","blur","PageObject","getRootWindow","activeElement","setPreviewMode","preview","isPreviewMode","Boolean","Spectrum","onPickerDragStart","onPickerDragMove","onPickerDragEnd","onScroll","scrollContext","contentRoot","getPicker","getPickerPos","y","ctrlKey","metaKey","button","documentBody","ownerDocument","body","showPicker","target","setPickerPos","pageX","pageY","unbind","getLayoutRect","layoutRect","getBoundingClientRect","scrollTop","width","height","left","top","leftToSet","HUE_RANGE","HUE_RANGE_GRAY_THRESHOLD","HUE_RANGE_GRAY_MIDDLE","HIDE_CLASS","layoutWidth","layoutHeight","isNaN","DEFAULT_SATURATION","isSpectrumValue","hidePicker","Primary","onClick","content","Loc","getMessage","CSS_VAR","isPrimaryValue","regexpWoStartEnd","regexp","RegExp","regexpToString","source","matcherGradient","matcherGradientAngle","hexMatcher","matcherGradientColors","isGradientString","GradientValue","from","to","angle","DEFAULT_ANGLE","type","DEFAULT_TYPE","getAngle","getType","getFrom","getTo","parseGradientString","typeMatches","angleMatches","colorMatches","setAngle","isNumber","setType","TYPE_RADIAL","TYPE_LINEAR","fromString","value1","value2","base","ext","defaultType","gradientType","Generator","getDefaultPresets","presets","defaultPresets","forEach","preset","push","id","items","map","item","getPrimaryColorPreset","primary","lBeforeCount","ceil","floor","lAfterCount","deltaLBefore","deltaLAfter","i","ii","deltaBitrixL","deltaBitrixS","bitrixColor","BITRIX_COLOR","deltaL2","deltaS","deltaS2","getGradientByColorOptions","pairs","pair","Preset","activeItem","getId","getGradientPreset","getItemLayout","getItemByName","onItemClick","find","isPresetValue","some","setActiveItem","currentTarget","dataset","itemName","setActiveValue","setActiveHex","hexValue","hexItem","PresetCollection","activeId","popupId","getRandom","popupTargetContainer","onPresetClick","getOpenButton","getPopup","toggle","onPresetChangeGlobal","subscribe","addDefaultPresets","addPreset","Object","keys","getGlobalActiveId","globalActiveId","getActiveId","getDefaultPreset","getActivePreset","getPresetById","getAllPresets","filter","getPresetByItemValue","getTitleContainer","querySelector","PopupManager","create","className","autoHide","bindElement","bindOptions","forceTop","forceLeft","offsetLeft","getPopupLayout","closeByEsc","targetContainer","layouts","innerLayouts","presetId","layout","getPresetLayout","append","close","getData","Recent","getLayoutContainer","initItems","Promise","resolve","itemsLoaded","Backend","getInstance","action","USER_OPTION_NAME","then","result","split","MAX_ITEMS","buildItemsLayout","activeHex","clean","itemElements","itemLayout","clickedElement","el","BX","addItem","pos","indexOf","splice","unshift","saveItems","userOptions","save","Favourite","itemsContainer","isEditMode","buttonChange","buttonSave","onChangeButtonClick","onSaveButtonClick","getItemsLayout","catch","itemLayoutButtonAdd","onAddButtonClick","removeButton","colorItem","onRemoveButtonClick","stopPropagation","removeItem","MODE_CLASSES","VIEW","EDIT","setAttribute","removeAttribute","removeButtons","querySelectorAll","btn","index","ColorPopup","hexPreview","isHexPreviewMode","hexPreviewMode","isNeedCalcPopupOffset","isNeedResetPopupWhenOpen","activeTab","TABS","RECENT","onHexPreviewValidInput","tabButtons","tabContents","init","initAnalytics","analytics","onHexChange","recent","onRecentChange","spectrum","onSpectrumChange","onSpectrumDragStart","onSpectrumDragEnd","presetCollection","onPresetChange","favourite","onFavouriteSelect","onAddFavouriteColor","onRemoveFavouriteColor","onEditFavouriteColors","onSaveFavouriteColors","analyticsCategory","ANALYTICS","CATEGORY_DESIGN","analyticsCElement","COLOR_TYPE_GRADIENT","COLOR_TYPE_SOLID","analyticsCSubSection","category","c_sub_section","p1","analyticsP1","offsetTop","popupWidth","editorPanelCurrentElement","Landing","UI","Panel","EditorPanel","currentElement","layoutClientRect","panelWidth","panelPaddingRight","autoHideHandler","closest","contentContainer","contains","padding","contentPadding","getPopupContent","events","onPopupClose","onPopupShow","tabNames","key","label","SPECTRUM","PRESET","tabButtonsRow","tab","setActiveTab","recentTab","spectrumTab","presetsTab","getPresetsLayout","favouriteColors","colorPickerPopup","getColorPickerPopupLayout","onColorPopupInput","preventDefault","onPopupOpenClick","resetPopupValue","all","popup","isShown","sendAnalytics","EVENTS","OPEN_POPUP","show","resetColorPickerPopupValue","unsetActivePresets","HEX_DEFAULT_TEXT","onChangeColor","isFunction","updateColorPickerPopup","currentHexValue","setHexValue","colorPickerPopupId","bgValue","input","colorPopupInputTimeout","clearTimeout","setTimeout","hexRegex","test","SELECT_COLOR","TYPE_COLORS","HEX","tabKey","isUserClick","CHANGE_TAB","entries","node","hidden","MY","favouriteColor","ADD_MY_COLOR","getAnalyticsCategory","getAnalyticsCSubSection","getAnalyticsCElement","getAnalyticsP1","params","analyticsData","tool","Main","getAnalyticsCategoryByType","cElement","c_element","Analytics","sendData","BaseProcessor","property","pseudoClass","getProperty","isArray","getVariableName","variableName","isNullValue","isNull","getNullValue","getPseudoClass","getClassName","getStyle","setProcessorValue","processorProperty","setDefaultValue","inlineProperty","defineActiveControl","currentNode","setActiveControl","controlName","prepareProcessorValue","processorValue","defaultValue","data","Colorpicker","colorPopup","onColorPopupChange","initLoader","loader","e","hide","onValidInput","Loader","loaderNode","getHexPreviewObject","BaseEvent","setActivity","ColorSet","colorpicker","setPreset","getTitleLayout","getPresetContainer","setColorFromContent","onPresetItemChange","getPreset","getPresetsCollection","activePreset","contentValue","contentHslColor","contentColorValue","Opacity","defaultOpacity","Reflect","has","DEFAULT_OPACITY","pickerControl","rangeControl","arrowsUp","arrowsDown","rangeInput","onArrowClick","defaultOpacityValue","getColorLayout","setPickerPosByOpacity","onRangeControlChange","leftPos","getDefaultValue","pickerLeft","valueToSet","background","title","innerHTML","arrowName","newOpacityInputValue","opacityInputValue","Tabs","tabs","multiple","isBig","onToggle","setMultiple","setBig","big","appendTab","Tab","bindEvents","prependTab","showTab","getTabById","additional","head","getTitle","tabLayout","toggleClass","SHOW_CLASS","Zeroing","textCode","styleNode","Color","colorSet","onColorSetChange","onOpacityChange","zeroingOptions","zeroing","onZeroingChange","onPrimaryChange","valueObj","isUndefined","oldClass","activeControl","getNode","reg","found","PRIMARY_VAR","ColorHover","Gradient","ROTATE_STEP","colorpickerFrom","onColorChange","colorpickerTo","getPopupButton","onPopupOpen","getRotateButton","onRotate","getSwitchTypeButton","onSwitchType","getSwapButton","onSwap","fromValue","toValue","fromValueToSet","toValueToSet","isButtonEnable","disableButton","enableButton","DISABLE_CLASS","correctColorpickerColors","hexFrom","hexTo","colorFrom","colorTo","median","offset","getContainerLayout","unsetColorpickerActive","rotate","innerText","gradient","setColorpickerActive","BgColor","onGradientChange","setGradientPreset","onTabsToggle","gradientPreset","gradValue","onOverlayOpacityChange","isNil","gradientValue","matcherBgImage","isBgImageString","bgImage","getMatcherWithOverlay","matcherBgString","matcherGradientString","BgImageValue","getUrl","url2x","getUrl2x","fileId","getFileId","fileId2x","getFileId2x","getSize","getAttachment","parseBgString","string","matchesBg","matchesOverlay","setUrl","setUrl2x","setFileId","setFileId2x","setSize","setAttachment","setOverlay","needBool","getOverlay","endString","getSizeItemsForButtons","getAttachmentValueByBool","Image","imgField","ImageField","contextType","CONTEXT_TYPE_STYLE","compactMode","disableLink","disableAltField","allowClear","isAiImageAvailable","Env","getOptions","isAiImageActive","aiUnactiveInfoCode","dimensions","uploadParams","block","onImageChange","sizeField","Field","Dropdown","onSizeChange","attachmentField","Checkbox","compact","onAttachmentChange","getAttachmentValue","src","src2x","id2x","saveNode","selector","makeAbsoluteSelector","isSelectGroup","Utils","join","getElementIndex","lid","image","imgValue","imgFieldValue","getSizeValue","blockContentStyle","window","getComputedStyle","bgAttachmentValue","getPropertyValue","includes","bgSizeValue","rgbaStringToRgbString","str","regRgba","rgba","createRgbString","Bg","parentVariableName","BG_URL_VAR","BG_URL_2X_VAR","BG_OVERLAY_VAR","BG_SIZE_VAR","BG_ATTACHMENT_VAR","BG_IMAGE","parentClassName","onOverlayColorChange","overlayOpacity","overlayPrimary","onOverlayPrimaryChange","overlayZeroingOptions","overlayZeroing","overlayZeroingChange","imageTabs","bigTabs","modifyStyleNode","onOverlayChange","overlayValue","imageValue","image2x","backgroundImage","hasOwnProperty","regUrl","searchUrl","regSearchUrl","search","regReplace","computedStyleNode","backgroundColor","currentColorRgb","primaryColorRgb","BorderColor","BorderColorHover","BgColorHover","BgColorAfter","opacityValue","BgColorBefore","NavbarColor","NavbarColorHover","NavbarColorFixMoment","NavbarColorFixMomentHover","NavbarBgColor","NavbarBgColorHover","BorderColorTop","FillColor","FillColorSecond","ButtonColor","COLOR_CONTRAST_VAR","COLOR_HOVER_VAR","COLOR_LIGHT_VAR","COLOR_VAR","valueContrast","valueHover","valueLight","NavbarCollapseBgColor","ColorField","BaseField","postfix","frame","processorOptions","changeHandler","valueChangeHandler","onValueChange","subtype","processor","remove","classList","add","getInlineProperties","prepareInlineProperties","props","getComputedProperties","getPseudoElement","TextField","attribute","textOnly","prop","onFrameLoad","createPopup"],"mappings":"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"}