this.BX=this.BX||{},this.BX.UI=this.BX.UI||{},function(e){"use strict";function t(e){return{type:e}}const n=t("SELECTION_CHANGE_COMMAND"),r=t("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),o=t("CLICK_COMMAND"),i=t("DELETE_CHARACTER_COMMAND"),s=t("INSERT_LINE_BREAK_COMMAND"),l=t("INSERT_PARAGRAPH_COMMAND"),a=t("CONTROLLED_TEXT_INSERTION_COMMAND"),c=t("PASTE_COMMAND"),d=t("REMOVE_TEXT_COMMAND"),u=t("DELETE_WORD_COMMAND"),f=t("DELETE_LINE_COMMAND"),h=t("FORMAT_TEXT_COMMAND"),g=t("UNDO_COMMAND"),_=t("REDO_COMMAND"),p=t("KEYDOWN_COMMAND"),m=t("KEY_ARROW_RIGHT_COMMAND"),N=t("MOVE_TO_END"),y=t("KEY_ARROW_LEFT_COMMAND"),C=t("MOVE_TO_START"),T=t("KEY_ARROW_UP_COMMAND"),E=t("KEY_ARROW_DOWN_COMMAND"),S=t("KEY_ENTER_COMMAND"),x=t("KEY_SPACE_COMMAND"),w=t("KEY_BACKSPACE_COMMAND"),b=t("KEY_ESCAPE_COMMAND"),O=t("KEY_DELETE_COMMAND"),v=t("KEY_TAB_COMMAND"),M=t("INSERT_TAB_COMMAND"),A=t("INDENT_CONTENT_COMMAND"),D=t("OUTDENT_CONTENT_COMMAND"),R=t("DROP_COMMAND"),k=t("FORMAT_ELEMENT_COMMAND"),I=t("DRAGSTART_COMMAND"),L=t("DRAGOVER_COMMAND"),P=t("DRAGEND_COMMAND"),$=t("COPY_COMMAND"),F=t("CUT_COMMAND"),K=t("SELECT_ALL_COMMAND"),B=t("CLEAR_EDITOR_COMMAND"),W=t("CLEAR_HISTORY_COMMAND"),z=t("CAN_REDO_COMMAND"),H=t("CAN_UNDO_COMMAND"),U=t("FOCUS_COMMAND"),Y=t("BLUR_COMMAND"),J=t("KEY_MODIFIER_COMMAND"),j="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,G=j&&"documentMode"in document?document.documentMode:null,X=j&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),V=j&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),q=!(!j||!("InputEvent"in window)||G)&&"getTargetRanges"in new window.InputEvent("input"),Q=j&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Z=j&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ee=j&&/Android/.test(navigator.userAgent),te=j&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ne=j&&ee&&te,re=j&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!te,oe=Q||Z||re?" ":"​",ie=V?" ":oe,se="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",le=new RegExp("^[^"+se+"]*[֑-߿יִ-﷽ﹰ-ﻼ]"),ae=new RegExp("^[^֑-߿יִ-﷽ﹰ-ﻼ]*["+se+"]"),ce={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},de={directionless:1,unmergeable:2},ue={center:2,end:6,justify:4,left:1,right:3,start:5},fe={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},he={normal:0,segmented:2,token:1},ge={0:"normal",2:"segmented",1:"token"};function _e(...e){const t=[];for(const n of e)if(n&&"string"==typeof n)for(const[e]of n.matchAll(/\S+/g))t.push(e);return t}let pe=!1,me=0;function Ne(e){me=e.timeStamp}function ye(e,t,n){return t.__lexicalLineBreak===e||void 0!==e["__lexicalKey_"+n._key]}function Ce(e,t,n){const r=Pt(n._window);let o=null,i=null;null!==r&&r.anchorNode===e&&(o=r.anchorOffset,i=r.focusOffset);const s=e.nodeValue;null!==s&&lt(t,s,o,i,!1)}function Te(e,t,n){if(Rr(e)){const t=e.anchor.getNode();if(t.is(n)&&e.format!==t.getFormat())return!1}return 3===t.nodeType&&n.isAttached()}function Ee(e,t,n){pe=!0;const r=performance.now()-me>100;try{So(e,()=>{const o=Yr()||function(e){return e.getEditorState().read(()=>{const e=Yr();return null!==e?e.clone():null})}(e),i=new Map,s=e.getRootElement(),l=e._editorState,a=e._blockCursorElement;let c=!1,d="";for(let n=0;n<t.length;n++){const u=t[n],f=u.type,h=u.target;let g=Ge(h,l);if(!(null===g&&h!==s||vo(g)))if("characterData"===f)r&&Tr(g)&&Te(o,h,g)&&Ce(h,g,e);else if("childList"===f){c=!0;const t=u.addedNodes;for(let n=0;n<t.length;n++){const r=t[n],o=je(r),i=r.parentNode;if(null!=i&&r!==a&&null===o&&("BR"!==r.nodeName||!ye(r,i,e))){if(V){const e=r.innerText||r.nodeValue;e&&(d+=e)}i.removeChild(r)}}const n=u.removedNodes,r=n.length;if(r>0){let t=0;for(let o=0;o<r;o++){const r=n[o];("BR"===r.nodeName&&ye(r,h,e)||a===r)&&(h.appendChild(r),t++)}r!==t&&(h===s&&(g=Qe(l)),i.set(h,g))}}}if(i.size>0)for(const[t,n]of i)if(wo(n)){const r=n.getChildrenKeys();let o=t.firstChild;for(let n=0;n<r.length;n++){const i=r[n],s=e.getElementByKey(i);null!==s&&(null==o?(t.appendChild(s),o=s):o!==s&&t.replaceChild(s,o),o=o.nextSibling)}}else Tr(n)&&n.markDirty();const u=n.takeRecords();if(u.length>0){for(let t=0;t<u.length;t++){const n=u[t],r=n.addedNodes,o=n.target;for(let t=0;t<r.length;t++){const n=r[t],i=n.parentNode;null==i||"BR"!==n.nodeName||ye(n,o,e)||i.removeChild(n)}}n.takeRecords()}null!==o&&(c&&(o.dirty=!0,Ze(o)),V&&Tt(e)&&o.insertRawText(d))})}finally{pe=!1}}function Se(e){const t=e._observer;if(null!==t){Ee(e,t.takeRecords(),t)}}function xe(e){!function(e){0===me&&Ot(e).addEventListener("textInput",Ne,!0)}(e),e._observer=new MutationObserver((t,n)=>{Ee(e,t,n)})}function we(e,t){const n=e.__mode,r=e.__format,o=e.__style,i=t.__mode,s=t.__format,l=t.__style;return!(null!==n&&n!==i||null!==r&&r!==s||null!==o&&o!==l)}function be(e,t){const n=e.mergeWithSibling(t),r=uo()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function Oe(e){let t,n,r=e;if(""!==r.__text||!r.isSimpleText()||r.isUnmergeable()){for(;null!==(t=r.getPreviousSibling())&&Tr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){if(we(t,r)){r=be(t,r);break}break}t.remove()}for(;null!==(n=r.getNextSibling())&&Tr(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){if(we(r,n)){r=be(r,n);break}break}n.remove()}}else r.remove()}function ve(e){return Me(e.anchor),Me(e.focus),e}function Me(e){for(;"element"===e.type;){const t=e.getNode(),n=e.offset;let r,o;if(n===t.getChildrenSize()?(r=t.getChildAtIndex(n-1),o=!0):(r=t.getChildAtIndex(n),o=!1),Tr(r)){e.set(r.__key,o?r.getTextContentSize():0,"text");break}if(!wo(r))break;e.set(r.__key,o?r.getChildrenSize():0,"element")}}let Ae=1;const De="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function Re(e){const t=document.activeElement;if(null===t)return!1;const n=t.nodeName;return vo(Ge(e))&&("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable&&null==Pe(t))}function ke(e,t,n){const r=e.getRootElement();try{return null!==r&&r.contains(t)&&r.contains(n)&&null!==t&&!Re(t)&&Le(t)===e}catch(e){return!1}}function Ie(e){return e instanceof Bo}function Le(e){let t=e;for(;null!=t;){const e=Pe(t);if(Ie(e))return e;t=wt(t)}return null}function Pe(e){return e?e.__lexicalEditor:null}function $e(e){return e.isToken()||e.isSegmented()}function Fe(e){return 3===e.nodeType}function Ke(e){let t=e;for(;null!=t;){if(Fe(t))return t;t=t.firstChild}return null}function Be(e,t,n){const r=ce[t];if(null!==n&&(e&r)==(n&r))return e;let o=e^r;return"subscript"===t?o&=~ce.superscript:"superscript"===t&&(o&=~ce.subscript),o}function We(e,t){if(null!=t)return function(e,t){const n=eo;if(!n)return;const r=n._nodeMap.get(t);if(r&&r.constructor!==e.constructor)throw e.constructor.name!==r.constructor.name?Error(`Lexical node with constructor ${e.constructor.name} attempted to re-use key from node in active editor state with constructor ${r.constructor.name}. Keys must not be re-used when the type is changed.`):Error(`Lexical node with constructor ${e.constructor.name} attempted to re-use key from node in active editor state with different constructor with the same name (possibly due to invalid Hot Module Replacement). Keys must not be re-used when the type is changed.`)}(e,t),void(e.__key=t);lo(),ao();const n=uo(),r=co(),o=""+Ae++;r._nodeMap.set(o,e),wo(e)?n._dirtyElements.set(o,!0):n._dirtyLeaves.add(o),n._cloneNotNeeded.add(o),n._dirtyType=1,e.__key=o}function ze(e){const t=e.getParent();if(null!==t){const n=e.getWritable(),r=t.getWritable(),o=e.getPreviousSibling(),i=e.getNextSibling();if(null===o)if(null!==i){const e=i.getWritable();r.__first=i.__key,e.__prev=null}else r.__first=null;else{const e=o.getWritable();if(null!==i){const t=i.getWritable();t.__prev=e.__key,e.__next=t.__key}else e.__next=null;n.__prev=null}if(null===i)if(null!==o){const e=o.getWritable();r.__last=o.__key,e.__next=null}else r.__last=null;else{const e=i.getWritable();if(null!==o){const t=o.getWritable();t.__next=e.__key,e.__prev=t.__key}else e.__prev=null;n.__next=null}r.__size--,n.__parent=null}}function He(e){ao();const t=e.getLatest(),n=t.__parent,r=co(),o=uo(),i=r._nodeMap,s=o._dirtyElements;null!==n&&function(e,t,n){let r=e;for(;null!==r;){if(n.has(r))return;const e=t.get(r);if(void 0===e)break;n.set(r,!1),r=e.__parent}}(n,i,s);const l=t.__key;o._dirtyType=1,wo(e)?s.set(l,!0):o._dirtyLeaves.add(l)}function Ue(e){lo();const t=uo(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,null!==n){const e=Je(n);null!==e&&e.getWritable()}if(null!==e){const t=Je(e);null!==t&&t.getWritable()}}}function Ye(){if(so())return null;return uo()._compositionKey}function Je(e,t){const n=(t||co())._nodeMap.get(e);return void 0===n?null:n}function je(e,t){const n=e["__lexicalKey_"+uo()._key];return void 0!==n?Je(n,t):null}function Ge(e,t){let n=e;for(;null!=n;){const e=je(n,t);if(null!==e)return e;n=wt(n)}return null}function Xe(e){const t=e._decorators,n=Object.assign({},t);return e._pendingDecorators=n,n}function Ve(e){return e.read(()=>qe().getTextContent())}function qe(){return Qe(co())}function Qe(e){return e._nodeMap.get("root")}function Ze(e){lo();const t=co();if(null!==e){if(Object.isFrozen(e))throw Error("$setSelection called on frozen selection object. Ensure selection is cloned before passing in.");e.dirty=!0,e.setCachedNodes(null)}t._selection=e}function et(e){const t=uo(),n=function(e,t){let n=e;for(;null!=n;){const e=n["__lexicalKey_"+t._key];if(void 0!==e)return e;n=wt(n)}return null}(e,t);if(null===n){return e===t.getRootElement()?Je("root"):null}return Je(n)}function tt(e,t){return t?e.getTextContentSize():0}function nt(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function rt(e){const t=[];let n=e;for(;null!==n;)t.push(n),n=n._parentEditor;return t}function ot(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function it(e){return 3===e.nodeType?e.nodeValue:null}function st(e,t,n){const r=Pt(t._window);if(null===r)return;const o=r.anchorNode;let{anchorOffset:i,focusOffset:s}=r;if(null!==o){let t=it(o);const r=Ge(o);if(null!==t&&Tr(r)){if(t===oe&&n){const e=n.length;t=n,i=e,s=e}null!==t&&lt(r,t,i,s,e)}}}function lt(e,t,n,r,o){let i=e;if(i.isAttached()&&(o||!i.isDirty())){const s=i.isComposing();let l=t;(s||o)&&t[t.length-1]===oe&&(l=t.slice(0,-1));const a=i.getTextContent();if(o||l!==a){if(""===l){if(Ue(null),Q||Z||re)i.remove();else{const e=uo();setTimeout(()=>{e.update(()=>{i.isAttached()&&i.remove()})},20)}return}const t=i.getParent(),o=Jr(),a=i.getTextContentSize(),c=Ye(),d=i.getKey();if(i.isToken()||null!==c&&d===c&&!s||Rr(o)&&(null!==t&&!t.canInsertTextBefore()&&0===o.anchor.offset||o.anchor.key===e.__key&&0===o.anchor.offset&&!i.canInsertTextBefore()&&!s||o.focus.key===e.__key&&o.focus.offset===a&&!i.canInsertTextAfter()&&!s))return void i.markDirty();const u=Yr();if(!Rr(u)||null===n||null===r)return void i.setTextContent(l);if(u.setTextNodeRange(i,n,i,r),i.isSegmented()){const e=Cr(i.getTextContent());i.replace(e),i=e}i.setTextContent(l)}}}function at(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;const n=e.anchor.offset,r=t.getParentOrThrow(),o=t.isToken();return 0===n?!t.canInsertTextBefore()||!r.canInsertTextBefore()&&!t.isComposing()||o||function(e){const t=e.getPreviousSibling();return(Tr(t)||wo(t)&&t.isInline())&&!t.canInsertTextAfter()}(t):n===t.getTextContentSize()&&(!t.canInsertTextAfter()||!r.canInsertTextAfter()&&!t.isComposing()||o)}function ct(e,t,n,r){return e.toLowerCase()===n.toLowerCase()||t===r}function dt(e){return"ArrowLeft"===e}function ut(e){return"ArrowRight"===e}function ft(e,t){return X?e:t}function ht(e){return"Enter"===e}function gt(e){return"Backspace"===e}function _t(e){return"Delete"===e}function pt(e,t,n){return"a"===e.toLowerCase()&&ft(t,n)}function mt(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});const n=e.__lexicalClassNameCache,r=n[t];if(void 0!==r)return r;const o=e[t];if("string"==typeof o){const e=_e(o);return n[t]=e,e}return o}function Nt(e,t,n,r,o){if(0===n.size)return;const i=r.__type,s=r.__key,l=t.get(i);if(void 0===l)throw Error(`Type ${i} not in registeredNodes`);const a=l.klass;let c=e.get(a);void 0===c&&(c=new Map,e.set(a,c));const d=c.get(s),u="destroyed"===d&&"created"===o;(void 0===d||u)&&c.set(s,u?"updated":o)}function yt(e,t,n){const r=e.getParent();let o=n,i=e;return null!==r&&(t&&0===n?(o=i.getIndexWithinParent(),i=r):t||n!==i.getChildrenSize()||(o=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(t?o-1:o)}function Ct(e,t){const n=e.offset;if("element"===e.type){return yt(e.getNode(),t,n)}{const r=e.getNode();if(t&&0===n||!t&&n===r.getTextContentSize()){const e=t?r.getPreviousSibling():r.getNextSibling();return null===e?yt(r.getParentOrThrow(),t,r.getIndexWithinParent()+(t?0:1)):e}}return null}function Tt(e){const t=Ot(e).event,n=t&&t.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function Et(e,t,n){return function e(t,n,r){if(!1===t._updating||to!==t){let o=!1;return t.update(()=>{o=e(t,n,r)}),o}const o=rt(t);for(let e=4;e>=0;e--)for(let i=0;i<o.length;i++){const s=o[i],l=s._commands.get(n);if(void 0!==l){const n=l[e];if(void 0!==n){const e=Array.from(n),o=e.length;for(let n=0;n<o;n++)if(!0===e[n](r,t))return!0}}}return!1}(e,t,n)}function St(e){return!Ao(e)&&!e.isLastChild()&&!e.isInline()}function xt(e,t){const n=e._keyToDOMMap.get(t);if(void 0===n)throw Error("Reconciliation: could not find DOM element for node key "+t);return n}function wt(e){const t=e.assignedSlot||e.parentElement;return null!==t&&11===t.nodeType?t.host:t}function bt(e,t){let n=e.getParent();for(;null!==n;){if(n.is(t))return!0;n=n.getParent()}return!1}function Ot(e){const t=e._window;if(null===t)throw Error("window object not found");return t}function vt(e){let t=e.getParentOrThrow();for(;null!==t;){if(Mt(t))return t;t=t.getParentOrThrow()}return t}function Mt(e){return Ao(e)||wo(e)&&e.isShadowRoot()}function At(e){const t=e.constructor.clone(e);return We(t,null),t}function Dt(e){const t=uo(),n=e.constructor.getType(),r=t._nodes.get(n);if(void 0===r)throw Error('$initializeNode failed. Ensure node has been registered to the editor. You can do this by passing the node class via the "nodes" array in the editor config.');const o=r.replace;if(null!==o){const t=o(e);if(!(t instanceof e.constructor))throw Error("$initializeNode failed. Ensure replacement node is a subclass of the original node.");return t}return e}function Rt(e,t){if(Ao(e.getParent())&&!wo(t)&&!vo(t))throw Error("Only element or decorator nodes can be inserted in to the root node")}function kt(e){return(vo(e)||wo(e)&&!e.canBeEmpty())&&!e.isInline()}function It(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;const r=e.parentElement;null!==r&&r.removeChild(e)}function Lt(e,t,n){let r=e._blockCursorElement;if(Rr(n)&&n.isCollapsed()&&"element"===n.anchor.type&&t.contains(document.activeElement)){const o=n.anchor,i=o.getNode(),s=o.offset;let l=!1,a=null;if(s===i.getChildrenSize()){kt(i.getChildAtIndex(s-1))&&(l=!0)}else{const t=i.getChildAtIndex(s);if(kt(t)){const n=t.getPreviousSibling();(null===n||kt(n))&&(l=!0,a=e.getElementByKey(t.__key))}}if(l){const n=e.getElementByKey(i.__key);return null===r&&(e._blockCursorElement=r=function(e){const t=e.theme,n=document.createElement("div");n.contentEditable="false",n.setAttribute("data-lexical-cursor","true");let r=t.blockCursor;if(void 0!==r){if("string"==typeof r){const e=_e(r);r=t.blockCursor=e}void 0!==r&&n.classList.add(...r)}return n}(e._config)),t.style.caretColor="transparent",void(null===a?n.appendChild(r):n.insertBefore(r,a))}}null!==r&&It(r,e,t)}function Pt(e){return j?(e||window).getSelection():null}function $t(e){return 1===e.nodeType}function Ft(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}function Kt(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function Bt(e){if(Ao(e)||vo(e)&&!e.isInline())return!0;if(!wo(e)||Mt(e))return!1;const t=e.getFirstChild(),n=null===t||rr(t)||Tr(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}function Wt(e,t){let n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}const zt=new WeakMap,Ht=new Map;function Ut(e){if(!e._readOnly&&e.isEmpty())return Ht;if(!e._readOnly)throw Error("getCachedTypeToNodeMap called with a writable EditorState");let t=zt.get(e);if(!t){t=new Map,zt.set(e,t);for(const[n,r]of e._nodeMap){const e=r.__type;let o=t.get(e);o||(o=new Map,t.set(e,o)),o.set(n,r)}}return t}function Yt(e){const t=e.constructor,n=t.clone(e);if(n.afterCloneFrom(e),n.__key!==e.__key)throw Error(`$cloneWithProperties: ${t.name}.clone(node) (with type '${t.getType()}') did not return a node with the same key, make sure to specify node.__key as the last argument to the constructor`);if(n.__parent!==e.__parent||n.__next!==e.__next||n.__prev!==e.__prev)throw Error(`$cloneWithProperties: ${t.name}.clone(node) (with type '${t.getType()}') overrided afterCloneFrom but did not call super.afterCloneFrom(prevNode)`);return n}function Jt(e,t,n,r,o,i){let s=e.getFirstChild();for(;null!==s;){const e=s.__key;s.__parent===t&&(wo(s)&&Jt(s,e,n,r,o,i),n.has(e)||i.delete(e),o.push(e)),s=s.getNextSibling()}}let jt,Gt,Xt,Vt,qt,Qt,Zt,en,tn,nn,rn="",on="",sn=null,ln="",an="",cn=!1,dn=!1,un=null;function fn(e,t){const n=Zt.get(e);if(null!==t){const n=vn(e);n.parentNode===t&&t.removeChild(n)}if(en.has(e)||Gt._keyToDOMMap.delete(e),wo(n)){const e=Sn(n,Zt);hn(e,0,e.length-1,null)}void 0!==n&&Nt(nn,Xt,Vt,n,"destroyed")}function hn(e,t,n,r){let o=t;for(;o<=n;++o){const t=e[o];void 0!==t&&fn(t,r)}}function gn(e,t){e.setProperty("text-align",t)}function _n(e,t){const n=jt.theme.indent;if("string"==typeof n){const r=e.classList.contains(n);t>0&&!r?e.classList.add(n):t<1&&r&&e.classList.remove(n)}const r=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px";e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${r})`)}function pn(e,t){const n=e.style;0===t?gn(n,""):1===t?gn(n,"left"):2===t?gn(n,"center"):3===t?gn(n,"right"):4===t?gn(n,"justify"):5===t?gn(n,"start"):6===t&&gn(n,"end")}function mn(e,t,n){const r=en.get(e);if(void 0===r)throw Error("createNode: node does not exist in nodeMap");const o=r.createDOM(jt,Gt);if(function(e,t,n){const r=n._keyToDOMMap;t["__lexicalKey_"+n._key]=e,r.set(e,t)}(e,o,Gt),Tr(r)?o.setAttribute("data-lexical-text","true"):vo(r)&&o.setAttribute("data-lexical-decorator","true"),wo(r)){const e=r.__indent,t=r.__size;if(0!==e&&_n(o,e),0!==t){const e=t-1;!function(e,t,n,r){const o=on;on="",Nn(e,n,0,t,r,null),Tn(n,r),on=o}(Sn(r,en),e,r,o)}const n=r.__format;0!==n&&pn(o,n),r.isInline()||Cn(null,r,o),St(r)&&(rn+="\n\n",an+="\n\n")}else{const t=r.getTextContent();if(vo(r)){const t=r.decorate(Gt,jt);null!==t&&wn(e,t),o.contentEditable="false"}else Tr(r)&&(r.isDirectionless()||(on+=t));rn+=t,an+=t}if(null!==t)if(null!=n)t.insertBefore(o,n);else{const e=t.__lexicalLineBreak;null!=e?t.insertBefore(o,e):t.appendChild(o)}return Object.freeze(r),Nt(nn,Xt,Vt,r,"created"),o}function Nn(e,t,n,r,o,i){const s=rn;rn="";let l=n;for(;l<=r;++l){mn(e[l],o,i);const t=en.get(e[l]);null!==t&&Tr(t)&&(null===sn&&(sn=t.getFormat()),""===ln&&(ln=t.getStyle()))}St(t)&&(rn+="\n\n"),o.__lexicalTextContent=rn,rn=s+rn}function yn(e,t){const n=t.get(e);return rr(n)||vo(n)&&n.isInline()}function Cn(e,t,n){const r=null!==e&&(0===e.__size||yn(e.__last,Zt)),o=0===t.__size||yn(t.__last,en);if(r){if(!o){const e=n.__lexicalLineBreak;if(null!=e)try{n.removeChild(e)}catch(t){if("object"==typeof t&&null!=t){const r=`${t.toString()} Parent: ${n.tagName}, child: ${e.tagName}.`;throw new Error(r)}throw t}n.__lexicalLineBreak=null}}else if(o){const e=document.createElement("br");n.__lexicalLineBreak=e,n.appendChild(e)}}function Tn(e,t){const n=t.__lexicalDirTextContent,r=t.__lexicalDir;if(n!==on||r!==un){const n=""===on,i=n?un:(o=on,le.test(o)?"rtl":ae.test(o)?"ltr":null);if(i!==r){const o=t.classList,s=jt.theme;let l=null!==r?s[r]:void 0,a=null!==i?s[i]:void 0;if(void 0!==l){if("string"==typeof l){const e=_e(l);l=s[r]=e}o.remove(...l)}if(null===i||n&&"ltr"===i)t.removeAttribute("dir");else{if(void 0!==a){if("string"==typeof a){const e=_e(a);a=s[i]=e}void 0!==a&&o.add(...a)}t.dir=i}if(!dn){e.getWritable().__dir=i}}un=i,t.__lexicalDirTextContent=on,t.__lexicalDir=i}var o}function En(e,t,n){const r=on;var o;on="",sn=null,ln="",function(e,t,n){const r=rn,o=e.__size,i=t.__size;if(rn="",1===o&&1===i){const r=e.__first,o=t.__first;if(r===o)xn(r,n);else{const e=vn(r),t=mn(o,null,null);try{n.replaceChild(t,e)}catch(i){if("object"==typeof i&&null!=i){const s=`${i.toString()} Parent: ${n.tagName}, new child: {tag: ${t.tagName} key: ${o}}, old child: {tag: ${e.tagName}, key: ${r}}.`;throw new Error(s)}throw i}fn(r,null)}const i=en.get(o);Tr(i)&&(null===sn&&(sn=i.getFormat()),""===ln&&(ln=i.getStyle()))}else{const r=Sn(e,Zt),s=Sn(t,en);if(0===o)0!==i&&Nn(s,t,0,i-1,n,null);else if(0===i){if(0!==o){const e=null==n.__lexicalLineBreak;hn(r,0,o-1,e?null:n),e&&(n.textContent="")}}else!function(e,t,n,r,o,i){const s=r-1,l=o-1;let a,c,d=(h=i,h.firstChild),u=0,f=0;var h;for(;u<=s&&f<=l;){const e=t[u],r=n[f];if(e===r)d=bn(xn(r,i)),u++,f++;else{void 0===a&&(a=new Set(t)),void 0===c&&(c=new Set(n));const o=c.has(e),s=a.has(r);if(o)if(s){const e=xt(Gt,r);e===d?d=bn(xn(r,i)):(null!=d?i.insertBefore(e,d):i.appendChild(e),xn(r,i)),u++,f++}else mn(r,i,d),f++;else d=bn(vn(e)),fn(e,i),u++}const o=en.get(r);null!==o&&Tr(o)&&(null===sn&&(sn=o.getFormat()),""===ln&&(ln=o.getStyle()))}const g=u>s,_=f>l;if(g&&!_){const t=n[l+1],r=void 0===t?null:Gt.getElementByKey(t);Nn(n,e,f,l,i,r)}else _&&!g&&hn(t,u,s,i)}(t,r,s,o,i,n)}St(t)&&(rn+="\n\n");n.__lexicalTextContent=rn,rn=r+rn}(e,t,n),Tn(t,n),Fo(o=t)&&null!=sn&&sn!==o.__textFormat&&!dn&&(o.setTextFormat(sn),o.setTextStyle(ln)),function(e){Fo(e)&&""!==ln&&ln!==e.__textStyle&&!dn&&e.setTextStyle(ln)}(t),on=r}function Sn(e,t){const n=[];let r=e.__first;for(;null!==r;){const e=t.get(r);if(void 0===e)throw Error("createChildrenArray: node does not exist in nodeMap");n.push(r),r=e.__next}return n}function xn(e,t){const n=Zt.get(e);let r=en.get(e);if(void 0===n||void 0===r)throw Error("reconcileNode: prevNode or nextNode does not exist in nodeMap");const o=cn||Qt.has(e)||qt.has(e),i=xt(Gt,e);if(n===r&&!o){if(wo(n)){const e=i.__lexicalTextContent;void 0!==e&&(rn+=e,an+=e);const t=i.__lexicalDirTextContent;void 0!==t&&(on+=t)}else{const e=n.getTextContent();Tr(n)&&!n.isDirectionless()&&(on+=e),an+=e,rn+=e}return i}if(n!==r&&o&&Nt(nn,Xt,Vt,r,"updated"),r.updateDOM(n,i,jt)){const n=mn(e,null,null);if(null===t)throw Error("reconcileNode: parentDOM is null");return t.replaceChild(n,i),fn(e,null),n}if(wo(n)&&wo(r)){const e=r.__indent;e!==n.__indent&&_n(i,e);const t=r.__format;t!==n.__format&&pn(i,t),o&&(En(n,r,i),Ao(r)||r.isInline()||Cn(n,r,i)),St(r)&&(rn+="\n\n",an+="\n\n")}else{const t=r.getTextContent();if(vo(r)){const t=r.decorate(Gt,jt);null!==t&&wn(e,t)}else Tr(r)&&!r.isDirectionless()&&(on+=t);rn+=t,an+=t}if(!dn&&Ao(r)&&r.__cachedText!==an){const e=r.getWritable();e.__cachedText=an,r=e}return Object.freeze(r),i}function wn(e,t){let n=Gt._pendingDecorators;const r=Gt._decorators;if(null===n){if(r[e]===t)return;n=Xe(Gt)}n[e]=t}function bn(e){let t=e.nextSibling;return null!==t&&t===Gt._blockCursorElement&&(t=t.nextSibling),t}function On(e,t,n,r,o,i){rn="",an="",on="",cn=2===r,un=null,Gt=n,jt=n._config,Xt=n._nodes,Vt=Gt._listeners.mutation,qt=o,Qt=i,Zt=e._nodeMap,en=t._nodeMap,dn=t._readOnly,tn=new Map(n._keyToDOMMap);const s=new Map;return nn=s,xn("root",null),Gt=void 0,Xt=void 0,qt=void 0,Qt=void 0,Zt=void 0,en=void 0,jt=void 0,tn=void 0,nn=void 0,s}function vn(e){const t=tn.get(e);if(void 0===t)throw Error("Reconciliation: could not find DOM element for node key "+e);return t}const Mn=Object.freeze({}),An=[["keydown",function(e,t){if(Dn=e.timeStamp,Rn=e.key,t.isComposing())return;const{key:n,shiftKey:r,ctrlKey:o,metaKey:l,altKey:a,keyCode:c}=e;if(Et(t,p,e))return;if(null==n)return;if(function(e,t,n,r){return ut(e)&&!t&&!r&&!n}(n,o,a,l))Et(t,m,e);else if(function(e,t,n,r,o){return ut(e)&&!r&&!n&&(t||o)}(n,o,r,a,l))Et(t,N,e);else if(function(e,t,n,r){return dt(e)&&!t&&!r&&!n}(n,o,a,l))Et(t,y,e);else if(function(e,t,n,r,o){return dt(e)&&!r&&!n&&(t||o)}(n,o,r,a,l))Et(t,C,e);else if(function(e,t,n){return function(e){return"ArrowUp"===e}(e)&&!t&&!n}(n,o,l))Et(t,T,e);else if(function(e,t,n){return function(e){return"ArrowDown"===e}(e)&&!t&&!n}(n,o,l))Et(t,E,e);else if(function(e,t){return ht(e)&&t}(n,r))Fn=!0,Et(t,S,e);else if(function(e){return" "===e}(n))Et(t,x,e);else if(function(e,t){return X&&t&&"o"===e.toLowerCase()}(n,o))e.preventDefault(),Fn=!0,Et(t,s,!0);else if(function(e,t){return ht(e)&&!t}(n,r))Fn=!1,Et(t,S,e);else if(function(e,t,n,r){return X?!t&&!n&&(gt(e)||"h"===e.toLowerCase()&&r):!(r||t||n)&&gt(e)}(n,a,l,o))gt(n)?Et(t,w,e):(e.preventDefault(),Et(t,i,!0));else if(function(e){return"Escape"===e}(n))Et(t,b,e);else if(function(e,t,n,r,o){return X?!(n||r||o)&&(_t(e)||"d"===e.toLowerCase()&&t):!(t||r||o||n)&&_t(e)}(n,o,r,a,l))_t(n)?Et(t,O,e):(e.preventDefault(),Et(t,i,!1));else if(function(e,t,n){return gt(e)&&(X?t:n)}(n,a,o))e.preventDefault(),Et(t,u,!0);else if(function(e,t,n){return _t(e)&&(X?t:n)}(n,a,o))e.preventDefault(),Et(t,u,!1);else if(function(e,t){return X&&t&&gt(e)}(n,l))e.preventDefault(),Et(t,f,!0);else if(function(e,t){return X&&t&&_t(e)}(n,l))e.preventDefault(),Et(t,f,!1);else if(function(e,t,n,r){return"b"===e.toLowerCase()&&!t&&ft(n,r)}(n,a,l,o))e.preventDefault(),Et(t,h,"bold");else if(function(e,t,n,r){return"u"===e.toLowerCase()&&!t&&ft(n,r)}(n,a,l,o))e.preventDefault(),Et(t,h,"underline");else if(function(e,t,n,r){return"i"===e.toLowerCase()&&!t&&ft(n,r)}(n,a,l,o))e.preventDefault(),Et(t,h,"italic");else if(function(e,t,n,r){return"Tab"===e&&!t&&!n&&!r}(n,a,o,l))Et(t,v,e);else if(function(e,t,n,r,o){return ct(e,o,"z",90)&&!t&&ft(n,r)}(n,r,l,o,c))e.preventDefault(),Et(t,g,void 0);else if(function(e,t,n,r,o){return X?ct(e,o,"z",90)&&n&&t:ct(e,o,"y",89)&&r||ct(e,o,"z",90)&&r&&t}(n,r,l,o,c))e.preventDefault(),Et(t,_,void 0);else{Ir(t._editorState._selection)?!function(e,t,n,r){return!t&&("c"===e.toLowerCase()&&(X?n:r))}(n,r,l,o)?!function(e,t,n,r){return!t&&("x"===e.toLowerCase()&&(X?n:r))}(n,r,l,o)?pt(n,l,o)&&(e.preventDefault(),Et(t,K,e)):(e.preventDefault(),Et(t,F,e)):(e.preventDefault(),Et(t,$,e)):!V&&pt(n,l,o)&&(e.preventDefault(),Et(t,K,e))}(function(e,t,n,r){return e||t||n||r})(o,r,a,l)&&Et(t,J,e)}],["pointerdown",function(e,t){const n=e.target,r=e.pointerType;n instanceof Node&&"touch"!==r&&So(t,()=>{vo(Ge(n))||($n=!0)})}],["compositionstart",function(e,t){So(t,()=>{const n=Yr();if(Rr(n)&&!t.isComposing()){const r=n.anchor,o=n.anchor.getNode();Ue(r.key),(e.timeStamp<Dn+30||"element"===r.type||!n.isCollapsed()||o.getFormat()!==n.format||Tr(o)&&o.getStyle()!==n.style)&&Et(t,a,ie)}})}],["compositionend",function(e,t){V?Kn=!0:So(t,()=>{Yn(t,e.data)})}],["input",function(e,t){e.stopPropagation(),So(t,()=>{const n=Yr(),r=e.data,o=Un(e);if(null!=r&&Rr(n)&&Wn(n,o,r,e.timeStamp,!1)){Kn&&(Yn(t,r),Kn=!1);const o=n.anchor.getNode(),i=Pt(t._window);if(null===i)return;const s=n.isBackward(),l=s?n.anchor.offset:n.focus.offset,c=s?n.focus.offset:n.anchor.offset;q&&!n.isCollapsed()&&Tr(o)&&null!==i.anchorNode&&o.getTextContent().slice(0,l)+r+o.getTextContent().slice(l+c)===it(i.anchorNode)||Et(t,a,r);const d=r.length;V&&d>1&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=d),Q||Z||re||!t.isComposing()||(Dn=0,Ue(null))}else{st(!1,t,null!==r?r:void 0),Kn&&(Yn(t,r||void 0),Kn=!1)}lo(),Se(uo())}),In=null}],["click",function(e,t){So(t,()=>{const n=Yr(),r=Pt(t._window),i=Jr();if(r)if(Rr(n)){const t=n.anchor,o=t.getNode();if("element"===t.type&&0===t.offset&&n.isCollapsed()&&!Ao(o)&&1===qe().getChildrenSize()&&o.getTopLevelElementOrThrow().isEmpty()&&null!==i&&n.is(i))r.removeAllRanges(),n.dirty=!0;else if(3===e.detail&&!n.isCollapsed()){o!==n.focus.getNode()&&(wo(o)?o.select(0):o.getParentOrThrow().select(0))}}else if("touch"===e.pointerType){const n=r.anchorNode;if(null!==n){const o=n.nodeType;if(1===o||3===o){Ze(Ur(i,r,t,e))}}}Et(t,o,e)})}],["cut",Mn],["copy",Mn],["dragstart",Mn],["dragover",Mn],["dragend",Mn],["paste",Mn],["focus",Mn],["blur",Mn],["drop",Mn]];q&&An.push(["beforeinput",(e,t)=>function(e,t){const n=e.inputType,r=Un(e);if("deleteCompositionText"===n||V&&Tt(t))return;if("insertCompositionText"===n)return;So(t,()=>{const o=Yr();if("deleteContentBackward"===n){if(null===o){const e=Jr();if(!Rr(e))return;Ze(e.clone())}if(Rr(o)){const n=o.anchor.key===o.focus.key;if(p=e.timeStamp,"MediaLast"===Rn&&p<Dn+30&&t.isComposing()&&n){if(Ue(null),Dn=0,setTimeout(()=>{So(t,()=>{Ue(null)})},30),Rr(o)){const e=o.anchor.getNode();if(e.markDirty(),o.format=e.getFormat(),!Tr(e))throw Error("Anchor node must be a TextNode");o.style=e.getStyle()}}else{Ue(null),e.preventDefault();const r=o.anchor.getNode().getTextContent(),s=0===o.anchor.offset&&o.focus.offset===r.length;ne&&n&&!s||Et(t,i,!0)}return}}var p;if(!Rr(o))return;const m=e.data;null!==In&&st(!1,t,In),o.dirty&&null===In||!o.isCollapsed()||Ao(o.anchor.getNode())||null===r||o.applyDOMRange(r),In=null;const N=o.anchor,y=o.focus,C=N.getNode(),T=y.getNode();if("insertText"!==n&&"insertTranspose"!==n)switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Et(t,a,e);break;case"insertFromComposition":Ue(null),Et(t,a,e);break;case"insertLineBreak":Ue(null),Et(t,s,!1);break;case"insertParagraph":Ue(null),Fn&&!Z?(Fn=!1,Et(t,s,!1)):Et(t,l,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Et(t,c,e);break;case"deleteByComposition":(function(e,t){return e!==t||wo(e)||wo(t)||!e.isToken()||!t.isToken()})(C,T)&&Et(t,d,e);break;case"deleteByDrag":case"deleteByCut":Et(t,d,e);break;case"deleteContent":Et(t,i,!1);break;case"deleteWordBackward":Et(t,u,!0);break;case"deleteWordForward":Et(t,u,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Et(t,f,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Et(t,f,!1);break;case"formatStrikeThrough":Et(t,h,"strikethrough");break;case"formatBold":Et(t,h,"bold");break;case"formatItalic":Et(t,h,"italic");break;case"formatUnderline":Et(t,h,"underline");break;case"historyUndo":Et(t,g,void 0);break;case"historyRedo":Et(t,_,void 0)}else{if("\n"===m)e.preventDefault(),Et(t,s,!1);else if("\n\n"===m)e.preventDefault(),Et(t,l,void 0);else if(null==m&&e.dataTransfer){const t=e.dataTransfer.getData("text/plain");e.preventDefault(),o.insertRawText(t)}else null!=m&&Wn(o,r,m,e.timeStamp,!0)?(e.preventDefault(),Et(t,a,m)):In=m;kn=e.timeStamp}})}(e,t)]);let Dn=0,Rn=null,kn=0,In=null;const Ln=new WeakMap;let Pn=!1,$n=!1,Fn=!1,Kn=!1,Bn=[0,"",0,"root",0];function Wn(e,t,n,r,o){const i=e.anchor,s=e.focus,l=i.getNode(),a=uo(),c=Pt(a._window),d=null!==c?c.anchorNode:null,u=i.key,f=a.getElementByKey(u),h=n.length;return u!==s.key||!Tr(l)||(!o&&(!q||kn<r+50)||l.isDirty()&&h<2||nt(n))&&i.offset!==s.offset&&!l.isComposing()||$e(l)||l.isDirty()&&h>1||(o||!q)&&null!==f&&!l.isComposing()&&d!==Ke(f)||null!==c&&null!==t&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||l.getFormat()!==e.format||l.getStyle()!==e.style||at(e,l)}function zn(e,t){return null!==e&&null!==e.nodeValue&&3===e.nodeType&&0!==t&&t!==e.nodeValue.length}function Hn(e,t,r){const{anchorNode:o,anchorOffset:i,focusNode:s,focusOffset:l}=e;Pn&&(Pn=!1,zn(o,i)&&zn(s,l))||So(t,()=>{if(!r)return void Ze(null);if(!ke(t,o,s))return;const a=Yr();if(Rr(a)){const n=a.anchor,r=n.getNode();if(a.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(a.dirty=!0);const o=Ot(t).event,i=o?o.timeStamp:performance.now(),[s,l,c,d,u]=Bn,f=qe(),h=!1===t.isComposing()&&""===f.getTextContent();if(i<u+200&&n.offset===c&&n.key===d)a.format=s,a.style=l;else if("text"===n.type){if(!Tr(r))throw Error("Point.getNode() must return TextNode when type is text");a.format=r.getFormat(),a.style=r.getStyle()}else if("element"===n.type&&!h){const e=n.getNode();a.style="",e instanceof Lo&&0===e.getChildrenSize()?(a.format=e.getTextFormat(),a.style=e.getTextStyle()):a.format=0}}else{const e=n.key,t=a.focus.key,r=a.getNodes(),o=r.length,s=a.isBackward(),c=s?l:i,d=s?i:l,u=s?t:e,f=s?e:t;let h=255,g=!1;for(let e=0;e<o;e++){const t=r[e],n=t.getTextContentSize();if(Tr(t)&&0!==n&&!(0===e&&t.__key===u&&c===n||e===o-1&&t.__key===f&&0===d)&&(g=!0,h&=t.getFormat(),0===h))break}a.format=g?h:0}}Et(t,n,void 0)})}function Un(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return 0===t.length?null:t[0]}function Yn(e,t){const n=e._compositionKey;if(Ue(null),null!==n&&null!=t){if(""===t){const t=Je(n),r=Ke(e.getElementByKey(n));return void(null!==r&&null!==r.nodeValue&&Tr(t)&&lt(t,r.nodeValue,null,null,!0))}if("\n"===t[t.length-1]){const t=Yr();if(Rr(t)){const n=t.focus;return t.anchor.set(n.key,n.offset,n.type),void Et(e,S,null)}}}st(!0,e,t)}function Jn(e){let t=e.__lexicalEventHandles;return void 0===t&&(t=[],e.__lexicalEventHandles=t),t}const jn=new Map;function Gn(e){const t=e.target,n=Pt(null==t?null:9===t.nodeType?t.defaultView:t.ownerDocument.defaultView);if(null===n)return;const r=Le(n.anchorNode);if(null===r)return;$n&&($n=!1,So(r,()=>{const t=Jr(),o=n.anchorNode;if(null===o)return;const i=o.nodeType;if(1!==i&&3!==i)return;Ze(Ur(t,n,r,e))}));const o=rt(r),i=o[o.length-1],s=i._key,l=jn.get(s),a=l||i;a!==r&&Hn(n,a,!1),Hn(n,r,!0),r!==i?jn.set(s,r):l&&jn.delete(s)}function Xn(e){e._lexicalHandled=!0}function Vn(e){return!0===e._lexicalHandled}function qn(e){const t=e.ownerDocument,n=Ln.get(t);if(void 0===n)throw Error("Root element not registered");const r=n-1;if(!(r>=0))throw Error("Root element count less than 0");Ln.set(t,r),0===r&&t.removeEventListener("selectionchange",Gn);const o=Pe(e);if(Ie(o))!function(e){if(null!==e._parentEditor){const t=rt(e),n=t[t.length-1]._key;jn.get(n)===e&&jn.delete(n)}else jn.delete(e._key)}(o),e.__lexicalEditor=null;else if(o)throw Error("Attempted to remove event handlers from a node that does not belong to this build of Lexical");const i=Jn(e);for(let e=0;e<i.length;e++)i[e]();e.__lexicalEventHandles=[]}function Qn(e,t,n){lo();const r=e.__key,o=e.getParent();if(null===o)return;const i=function(e){const t=Yr();if(!Rr(t)||!wo(e))return t;const{anchor:n,focus:r}=t,o=n.getNode(),i=r.getNode();return bt(o,e)&&n.set(e.__key,0,"element"),bt(i,e)&&r.set(e.__key,0,"element"),t}(e);let s=!1;if(Rr(i)&&t){const t=i.anchor,n=i.focus;t.key===r&&(Xr(t,e,o,e.getPreviousSibling(),e.getNextSibling()),s=!0),n.key===r&&(Xr(n,e,o,e.getPreviousSibling(),e.getNextSibling()),s=!0)}else Ir(i)&&t&&e.isSelected()&&e.selectPrevious();if(Rr(i)&&t&&!s){const t=e.getIndexWithinParent();ze(e),jr(i,o,t,-1)}else ze(e);n||Mt(o)||o.canBeEmpty()||!o.isEmpty()||Qn(o,t),t&&Ao(o)&&o.isEmpty()&&o.selectEnd()}class Zn{static getType(){throw Error(`LexicalNode: Node ${this.name} does not implement .getType().`)}static clone(e){throw Error(`LexicalNode: Node ${this.name} does not implement .clone().`)}afterCloneFrom(e){this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,We(this,e),"root"!==this.__type&&(lo(),function(e,t){const n=uo()._nodes.get(e);if(void 0===n)throw Error(`Create node: Attempted to create node ${t.name} that was not configured to be used on the editor.`);const r=n.klass;if(r!==t)throw Error(`Create node: Type ${e} in node ${t.name} does not match registered node ${r.name} with the same type`)}(this.__type,this.constructor))}getType(){return this.__type}isInline(){throw Error(`LexicalNode: Node ${this.constructor.name} does not implement .isInline().`)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;const t=Je(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){const t=e||Yr();if(null==t)return!1;const n=t.getNodes().some(e=>e.__key===this.__key);if(Tr(this))return n;if(Rr(t)&&"element"===t.anchor.type&&"element"===t.focus.type){if(t.isCollapsed())return!1;const e=this.getParent();if(vo(this)&&this.isInline()&&e){const n=t.isBackward()?t.focus:t.anchor,r=n.getNode();if(n.offset===r.getChildrenSize()&&r.is(e)&&r.getLastChildOrThrow().is(this))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(null===e)return-1;let t=e.getFirstChild(),n=0;for(;null!==t;){if(this.is(t))return n;n++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return null===e?null:Je(e)}getParentOrThrow(){const e=this.getParent();if(null===e)throw Error(`Expected node ${this.__key} to have a parent.`);return e}getTopLevelElement(){let e=this;for(;null!==e;){const t=e.getParent();if(Mt(t)){if(!(wo(e)||e===this&&vo(e)))throw Error("Children of root nodes must be elements or decorators");return e}e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();if(null===e)throw Error(`Expected node ${this.__key} to have a top parent element.`);return e}getParents(){const e=[];let t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return null===e?null:Je(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(null===t)return e;let n=t.getFirstChild();for(;null!==n&&!n.is(this);)e.push(n),n=n.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return null===e?null:Je(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=this.getParents(),n=e.getParents();wo(this)&&t.unshift(this),wo(e)&&n.unshift(e);const r=t.length,o=n.length;if(0===r||0===o||t[r-1]!==n[o-1])return null;const i=new Set(n);for(let e=0;e<r;e++){const n=t[e];if(i.has(n))return n}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;const t=this.getCommonAncestor(e);let n=0,r=0,o=this;for(;;){const e=o.getParentOrThrow();if(e===t){n=o.getIndexWithinParent();break}o=e}for(o=e;;){const e=o.getParentOrThrow();if(e===t){r=o.getIndexWithinParent();break}o=e}return n<r}isParentOf(e){const t=this.__key;if(t===e.__key)return!1;let n=e;for(;null!==n;){if(n.__key===t)return!0;n=n.getParent()}return!1}getNodesBetween(e){const t=this.isBefore(e),n=[],r=new Set;let o=this;for(;null!==o;){const i=o.__key;if(r.has(i)||(r.add(i),n.push(o)),o===e)break;const s=wo(o)?t?o.getFirstChild():o.getLastChild():null;if(null!==s){o=s;continue}const l=t?o.getNextSibling():o.getPreviousSibling();if(null!==l){o=l;continue}const a=o.getParentOrThrow();if(r.has(a.__key)||n.push(a),a===e)break;let c=null,d=a;do{if(null===d)throw Error("getNodesBetween: ancestor is null");if(c=t?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),null===d)break;null!==c||r.has(d.__key)||n.push(d)}while(null===c);o=c}return t||n.reverse(),n}isDirty(){const e=uo()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){const e=Je(this.__key);if(null===e)throw Error("Lexical node does not exist in active editor state. Avoid using the same node references between nested closures from editorState.read/editor.update.");return e}getWritable(){lo();const e=co(),t=uo(),n=e._nodeMap,r=this.__key,o=this.getLatest(),i=t._cloneNotNeeded,s=Yr();if(null!==s&&s.setCachedNodes(null),i.has(r))return He(o),o;const l=Yt(o);return i.add(r),He(l),n.set(r,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){throw Error("createDOM: base method not extended")}updateDOM(e,t,n){throw Error("updateDOM: base method not extended")}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){throw Error("exportJSON: base method not extended")}static importJSON(e){throw Error(`LexicalNode: Node ${this.name} does not implement .importJSON().`)}static transform(){return null}remove(e){Qn(this,!0,e)}replace(e,t){lo();let n=Yr();null!==n&&(n=n.clone()),Rt(this,e);const r=this.getLatest(),o=this.__key,i=e.__key,s=e.getWritable(),l=this.getParentOrThrow().getWritable(),a=l.__size;ze(s);const c=r.getPreviousSibling(),d=r.getNextSibling(),u=r.__prev,f=r.__next,h=r.__parent;if(Qn(r,!1,!0),null===c)l.__first=i;else{c.getWritable().__next=i}if(s.__prev=u,null===d)l.__last=i;else{d.getWritable().__prev=i}if(s.__next=f,s.__parent=h,l.__size=a,t){if(!wo(this)||!wo(s))throw Error("includeChildren should only be true for ElementNodes");this.getChildren().forEach(e=>{s.append(e)})}if(Rr(n)){Ze(n);const e=n.anchor,t=n.focus;e.key===o&&Mr(e,s),t.key===o&&Mr(t,s)}return Ye()===o&&Ue(i),s}insertAfter(e,t=!0){lo(),Rt(this,e);const n=this.getWritable(),r=e.getWritable(),o=r.getParent(),i=Yr();let s=!1,l=!1;if(null!==o){const t=e.getIndexWithinParent();if(ze(r),Rr(i)){const e=o.__key,n=i.anchor,r=i.focus;s="element"===n.type&&n.key===e&&n.offset===t+1,l="element"===r.type&&r.key===e&&r.offset===t+1}}const a=this.getNextSibling(),c=this.getParentOrThrow().getWritable(),d=r.__key,u=n.__next;if(null===a)c.__last=d;else{a.getWritable().__prev=d}if(c.__size++,n.__next=d,r.__next=u,r.__prev=n.__key,r.__parent=n.__parent,t&&Rr(i)){const e=this.getIndexWithinParent();jr(i,c,e+1);const t=c.__key;s&&i.anchor.set(t,e+2,"element"),l&&i.focus.set(t,e+2,"element")}return e}insertBefore(e,t=!0){lo(),Rt(this,e);const n=this.getWritable(),r=e.getWritable(),o=r.__key;ze(r);const i=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),l=n.__prev,a=this.getIndexWithinParent();if(null===i)s.__first=o;else{i.getWritable().__next=o}s.__size++,n.__prev=o,r.__prev=l,r.__next=n.__key,r.__parent=n.__parent;const c=Yr();if(t&&Rr(c)){jr(c,this.getParentOrThrow(),a)}return e}isParentRequired(){return!1}createParentElementNode(){return $o()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){lo();const n=this.getPreviousSibling(),r=this.getParentOrThrow();if(null===n)return r.select(0,0);if(wo(n))return n.select();if(!Tr(n)){const e=n.getIndexWithinParent()+1;return r.select(e,e)}return n.select(e,t)}selectNext(e,t){lo();const n=this.getNextSibling(),r=this.getParentOrThrow();if(null===n)return r.select();if(wo(n))return n.select(0,0);if(!Tr(n)){const e=n.getIndexWithinParent();return r.select(e,e)}return n.select(e,t)}markDirty(){this.getWritable()}}class er extends Zn{static getType(){return"linebreak"}static clone(e){return new er(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>function(e){const t=e.parentElement;if(null!==t&&Kt(t)){const n=t.firstChild;if(n===e||n.nextSibling===e&&or(n)){const n=t.lastChild;if(n===e||n.previousSibling===e&&or(n))return!0}}return!1}(e)||function(e){const t=e.parentElement;if(null!==t&&Kt(t)){const n=t.firstChild;if(n===e||n.nextSibling===e&&or(n))return!1;const r=t.lastChild;if(r===e||r.previousSibling===e&&or(r))return!0}return!1}(e)?null:{conversion:tr,priority:0}}}static importJSON(e){return nr()}exportJSON(){return{type:"linebreak",version:1}}}function tr(e){return{node:nr()}}function nr(){return Dt(new er)}function rr(e){return e instanceof er}function or(e){return 3===e.nodeType&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function ir(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function sr(e,t){return 1&t?"strong":2&t?"em":"span"}function lr(e,t,n,r,o){const i=r.classList;let s=mt(o,"base");void 0!==s&&i.add(...s),s=mt(o,"underlineStrikethrough");let l=!1;const a=8&t&&4&t;void 0!==s&&(8&n&&4&n?(l=!0,a||i.add(...s)):a&&i.remove(...s));for(const e in ce){const r=ce[e];if(s=mt(o,e),void 0!==s)if(n&r){if(l&&("underline"===e||"strikethrough"===e)){t&r&&i.remove(...s);continue}(0==(t&r)||a&&"underline"===e||"strikethrough"===e)&&i.add(...s)}else t&r&&i.remove(...s)}}function ar(e,t,n){const r=t.firstChild,o=n.isComposing(),i=e+(o?oe:"");if(null==r)t.textContent=i;else{const e=r.nodeValue;if(e!==i)if(o||V){const[t,n,o]=function(e,t){const n=e.length,r=t.length;let o=0,i=0;for(;o<n&&o<r&&e[o]===t[o];)o++;for(;i+o<n&&i+o<r&&e[n-i-1]===t[r-i-1];)i++;return[o,n-o-i,t.slice(o,r-i)]}(e,i);0!==n&&r.deleteData(t,n),r.insertData(t,o)}else r.nodeValue=i}}function cr(e,t,n,r,o,i){ar(o,e,t);const s=i.theme.text;void 0!==s&&lr(0,0,r,e,s)}function dr(e,t){const n=document.createElement(t);return n.appendChild(e),n}class ur extends Zn{static getType(){return"text"}static clone(e){return new ur(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return ge[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===Ye()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return 0!=(1&this.getLatest().__detail)}isUnmergeable(){return 0!=(2&this.getLatest().__detail)}hasFormat(e){const t=ce[e];return 0!=(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return Be(this.getLatest().__format,e,t)}canHaveFormat(){return!0}createDOM(e,t){const n=this.__format,r=ir(0,n),o=sr(0,n),i=null===r?o:r,s=document.createElement(i);let l=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==r&&(l=document.createElement(o),s.appendChild(l));cr(l,this,0,n,this.__text,e);const a=this.__style;return""!==a&&(s.style.cssText=a),s}updateDOM(e,t,n){const r=this.__text,o=e.__format,i=this.__format,s=ir(0,o),l=ir(0,i),a=sr(0,o),c=sr(0,i);if((null===s?a:s)!==(null===l?c:l))return!0;if(s===l&&a!==c){const e=t.firstChild;if(null==e)throw Error("updateDOM: prevInnerDOM is null or undefined");const o=document.createElement(c);return cr(o,this,0,i,r,n),t.replaceChild(o,e),!1}let d=t;if(null!==l&&null!==s&&(d=t.firstChild,null==d))throw Error("updateDOM: innerDOM is null or undefined");ar(r,d,this);const u=n.theme.text;void 0!==u&&o!==i&&lr(0,o,i,d,u);const f=e.__style,h=this.__style;return f!==h&&(t.style.cssText=h),!1}static importDOM(){return{"#text":()=>({conversion:pr,priority:0}),b:()=>({conversion:hr,priority:0}),code:()=>({conversion:yr,priority:0}),em:()=>({conversion:yr,priority:0}),i:()=>({conversion:yr,priority:0}),s:()=>({conversion:yr,priority:0}),span:()=>({conversion:fr,priority:0}),strong:()=>({conversion:yr,priority:0}),sub:()=>({conversion:yr,priority:0}),sup:()=>({conversion:yr,priority:0}),u:()=>({conversion:yr,priority:0})}}static importJSON(e){const t=Cr(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportDOM(e){let{element:t}=super.exportDOM(e);if(null===t||!$t(t))throw Error("Expected TextNode createDOM to always return a HTMLElement");return t.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(t=dr(t,"b")),this.hasFormat("italic")&&(t=dr(t,"i")),this.hasFormat("strikethrough")&&(t=dr(t,"s")),this.hasFormat("underline")&&(t=dr(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(e,t){}setFormat(e){const t=this.getWritable();return t.__format="string"==typeof e?ce[e]:e,t}setDetail(e){const t=this.getWritable();return t.__detail="string"==typeof e?de[e]:e,t}setStyle(e){const t=this.getWritable();return t.__style=e,t}toggleFormat(e){const t=Be(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const t=he[e];if(this.__mode===t)return this;const n=this.getWritable();return n.__mode=t,n}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}select(e,t){lo();let n=e,r=t;const o=Yr(),i=this.getTextContent(),s=this.__key;if("string"==typeof i){const e=i.length;void 0===n&&(n=e),void 0===r&&(r=e)}else n=0,r=0;if(!Rr(o))return zr(s,n,s,r,"text","text");{const e=Ye();e!==o.anchor.key&&e!==o.focus.key||Ue(s),o.setTextNodeRange(this,n,this,r)}return o}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,r){const o=this.getWritable(),i=o.__text,s=n.length;let l=e;l<0&&(l=s+l,l<0&&(l=0));const a=Yr();if(r&&Rr(a)){const t=e+s;a.setTextNodeRange(o,t,o,t)}const c=i.slice(0,l)+n+i.slice(l+t);return o.__text=c,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){lo();const t=this.getLatest(),n=t.getTextContent(),r=t.__key,o=Ye(),i=new Set(e),s=[],l=n.length;let a="";for(let e=0;e<l;e++)""!==a&&i.has(e)&&(s.push(a),a=""),a+=n[e];""!==a&&s.push(a);const c=s.length;if(0===c)return[];if(s[0]===n)return[t];const d=s[0],u=t.getParent();let f;const h=t.getFormat(),g=t.getStyle(),_=t.__detail;let p=!1;t.isSegmented()?(f=Cr(d),f.__format=h,f.__style=g,f.__detail=_,p=!0):(f=t.getWritable(),f.__text=d);const m=Yr(),N=[f];let y=d.length;for(let e=1;e<c;e++){const t=s[e],n=t.length,i=Cr(t).getWritable();i.__format=h,i.__style=g,i.__detail=_;const l=i.__key,a=y+n;if(Rr(m)){const e=m.anchor,t=m.focus;e.key===r&&"text"===e.type&&e.offset>y&&e.offset<=a&&(e.key=l,e.offset-=y,m.dirty=!0),t.key===r&&"text"===t.type&&t.offset>y&&t.offset<=a&&(t.key=l,t.offset-=y,m.dirty=!0)}o===r&&Ue(l),y=a,N.push(i)}if(null!==u){!function(e){const t=e.getPreviousSibling(),n=e.getNextSibling();null!==t&&He(t),null!==n&&He(n)}(this);const e=u.getWritable(),t=this.getIndexWithinParent();p?(e.splice(t,0,N),this.remove()):e.splice(t,1,N),Rr(m)&&jr(m,u,t,c-1)}return N}mergeWithSibling(e){const t=e===this.getPreviousSibling();if(!t&&e!==this.getNextSibling())throw Error("mergeWithSibling: sibling must be a previous or next sibling");const n=this.__key,r=e.__key,o=this.__text,i=o.length;Ye()===r&&Ue(n);const s=Yr();if(Rr(s)){const o=s.anchor,l=s.focus;null!==o&&o.key===r&&(Vr(o,t,n,e,i),s.dirty=!0),null!==l&&l.key===r&&(Vr(l,t,n,e,i),s.dirty=!0)}const l=e.__text,a=t?l+o:o+l;this.setTextContent(a);const c=this.getWritable();return e.remove(),c}isTextEntity(){return!1}}function fr(e){return{forChild:Er(e.style),node:null}}function hr(e){const t=e,n="normal"===t.style.fontWeight;return{forChild:Er(t.style,n?void 0:"bold"),node:null}}const gr=new WeakMap;function _r(e){return"PRE"===e.nodeName||1===e.nodeType&&void 0!==e.style&&void 0!==e.style.whiteSpace&&e.style.whiteSpace.startsWith("pre")}function pr(e){const t=e;if(null===e.parentElement)throw Error("Expected parentElement of Text not to be null");let n=t.textContent||"";if(null!==function(e){let t,n=e.parentNode;const r=[e];for(;null!==n&&void 0===(t=gr.get(n))&&!_r(n);)r.push(n),n=n.parentNode;const o=void 0===t?n:t;for(let e=0;e<r.length;e++)gr.set(r[e],o);return o}(t)){const e=n.split(/(\r?\n|\t)/),t=[],r=e.length;for(let n=0;n<r;n++){const r=e[n];"\n"===r||"\r\n"===r?t.push(nr()):"\t"===r?t.push(xr()):""!==r&&t.push(Cr(r))}return{node:t}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),""===n)return{node:null};if(" "===n[0]){let e=t,r=!0;for(;null!==e&&null!==(e=mr(e,!1));){const t=e.textContent||"";if(t.length>0){/[ \t\n]$/.test(t)&&(n=n.slice(1)),r=!1;break}}r&&(n=n.slice(1))}if(" "===n[n.length-1]){let e=t,r=!0;for(;null!==e&&null!==(e=mr(e,!0));){if((e.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){r=!1;break}}r&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:Cr(n)}}function mr(e,t){let n=e;for(;;){let e;for(;null===(e=t?n.nextSibling:n.previousSibling);){const e=n.parentElement;if(null===e)return null;n=e}if(n=e,1===n.nodeType){const e=n.style.display;if(""===e&&!Ft(n)||""!==e&&!e.startsWith("inline"))return null}let r=n;for(;null!==(r=t?n.firstChild:n.lastChild);)n=r;if(3===n.nodeType)return n;if("BR"===n.nodeName)return null}}const Nr={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function yr(e){const t=Nr[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:Er(e.style,t),node:null}}function Cr(e=""){return Dt(new ur(e))}function Tr(e){return e instanceof ur}function Er(e,t){const n=e.fontWeight,r=e.textDecoration.split(" "),o="700"===n||"bold"===n,i=r.includes("line-through"),s="italic"===e.fontStyle,l=r.includes("underline"),a=e.verticalAlign;return e=>Tr(e)?(o&&!e.hasFormat("bold")&&e.toggleFormat("bold"),i&&!e.hasFormat("strikethrough")&&e.toggleFormat("strikethrough"),s&&!e.hasFormat("italic")&&e.toggleFormat("italic"),l&&!e.hasFormat("underline")&&e.toggleFormat("underline"),"sub"!==a||e.hasFormat("subscript")||e.toggleFormat("subscript"),"super"!==a||e.hasFormat("superscript")||e.toggleFormat("superscript"),t&&!e.hasFormat(t)&&e.toggleFormat(t),e):e}class Sr extends ur{static getType(){return"tab"}static clone(e){return new Sr(e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text}constructor(e){super("\t",e),this.__detail=2}static importDOM(){return null}static importJSON(e){const t=xr();return t.setFormat(e.format),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(e){throw Error("TabNode does not support setTextContent")}setDetail(e){throw Error("TabNode does not support setDetail")}setMode(e){throw Error("TabNode does not support setMode")}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function xr(){return Dt(new Sr)}function wr(e){return e instanceof Sr}class br{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),n=e.getNode();const r=this.offset,o=e.offset;if(wo(t)){const e=t.getDescendantByIndex(r);t=null!=e?e:t}if(wo(n)){const e=n.getDescendantByIndex(o);n=null!=e?e:n}return t===n?r<o:t.isBefore(n)}getNode(){const e=Je(this.key);if(null===e)throw Error("Point.getNode: node not found");return e}set(e,t,n){const r=this._selection,o=this.key;this.key=e,this.offset=t,this.type=n,so()||(Ye()===o&&Ue(e),null!==r&&(r.setCachedNodes(null),r.dirty=!0))}}function Or(e,t,n){return new br(e,t,n)}function vr(e,t){let n=t.__key,r=e.offset,o="element";if(Tr(t)){o="text";const e=t.getTextContentSize();r>e&&(r=e)}else if(!wo(t)){const e=t.getNextSibling();if(Tr(e))n=e.__key,r=0,o="text";else{const e=t.getParent();e&&(n=e.__key,r=t.getIndexWithinParent()+1)}}e.set(n,r,o)}function Mr(e,t){if(wo(t)){const n=t.getLastDescendant();wo(n)||Tr(n)?vr(e,n):vr(e,t)}else vr(e,t)}function Ar(e,t,n,r){e.key=t,e.offset=n,e.type=r}class Dr{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!Ir(e))return!1;const t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every(e=>n.has(e))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new Dr(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),n=t.length,r=t[n-1];let o;if(Tr(r))o=r.select();else{const e=r.getIndexWithinParent()+1;o=r.getParentOrThrow().select(e,e)}o.insertNodes(e);for(let e=0;e<n;e++)t[e].remove()}getNodes(){const e=this._cachedNodes;if(null!==e)return e;const t=this._nodes,n=[];for(const e of t){const t=Je(e);null!==t&&n.push(t)}return so()||(this._cachedNodes=n),n}getTextContent(){const e=this.getNodes();let t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function Rr(e){return e instanceof kr}class kr{constructor(e,t,n,r){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=n,this.style=r,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!Rr(e)&&(this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(null!==e)return e;const t=this.anchor,n=this.focus,r=t.isBefore(n),o=r?t:n,i=r?n:t;let s=o.getNode(),l=i.getNode();const a=o.offset,c=i.offset;if(wo(s)){const e=s.getDescendantByIndex(a);s=null!=e?e:s}if(wo(l)){let e=l.getDescendantByIndex(c);null!==e&&e!==s&&l.getChildAtIndex(c)===e&&(e=e.getPreviousSibling()),l=null!=e?e:l}let d;return d=s.is(l)?wo(s)&&s.getChildrenSize()>0?[]:[s]:s.getNodesBetween(l),so()||(this._cachedNodes=d),d}setTextNodeRange(e,t,n,r){Ar(this.anchor,e.__key,t,"text"),Ar(this.focus,n.__key,r,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){const e=this.getNodes();if(0===e.length)return"";const t=e[0],n=e[e.length-1],r=this.anchor,o=this.focus,i=r.isBefore(o),[s,l]=Pr(this);let a="",c=!0;for(let d=0;d<e.length;d++){const u=e[d];if(wo(u)&&!u.isInline())c||(a+="\n"),c=!u.isEmpty();else if(c=!1,Tr(u)){let e=u.getTextContent();u===t?u===n?"element"===r.type&&"element"===o.type&&o.offset!==r.offset||(e=s<l?e.slice(s,l):e.slice(l,s)):e=i?e.slice(s):e.slice(l):u===n&&(e=i?e.slice(0,l):e.slice(0,s)),a+=e}else!vo(u)&&!rr(u)||u===n&&this.isCollapsed()||(a+=u.getTextContent())}return a}applyDOMRange(e){const t=uo(),n=t.getEditorState()._selection,r=Wr(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n);if(null===r)return;const[o,i]=r;Ar(this.anchor,o.key,o.offset,o.type),Ar(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}clone(){const e=this.anchor,t=this.focus;return new kr(Or(e.key,e.offset,e.type),Or(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=Be(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=ce[e];return 0!=(this.format&t)}insertRawText(e){const t=e.split(/(\r?\n|\t)/),n=[],r=t.length;for(let e=0;e<r;e++){const r=t[e];"\n"===r||"\r\n"===r?n.push(nr()):"\t"===r?n.push(xr()):n.push(Cr(r))}this.insertNodes(n)}insertText(e){const t=this.anchor,n=this.focus,r=this.format,o=this.style;let i=t,s=n;!this.isCollapsed()&&n.isBefore(t)&&(i=n,s=t),"element"===i.type&&function(e,t,n,r){const o=e.getNode(),i=o.getChildAtIndex(e.offset),s=Cr(),l=Ao(o)?$o().append(s):s;s.setFormat(n),s.setStyle(r),null===i?o.append(l):i.insertBefore(l),e.is(t)&&t.set(s.__key,0,"text"),e.set(s.__key,0,"text")}(i,s,r,o);const l=i.offset;let a=s.offset;const c=this.getNodes(),d=c.length;let u=c[0];if(!Tr(u))throw Error("insertText: first node is not a text node");const f=u.getTextContent().length,h=u.getParentOrThrow();let g=c[d-1];if(1===d&&"element"===s.type&&(a=f,s.set(i.key,a,"text")),this.isCollapsed()&&l===f&&(u.isSegmented()||u.isToken()||!u.canInsertTextAfter()||!h.canInsertTextAfter()&&null===u.getNextSibling())){let t=u.getNextSibling();if(Tr(t)&&t.canInsertTextBefore()&&!$e(t)||(t=Cr(),t.setFormat(r),t.setStyle(o),h.canInsertTextAfter()?u.insertAfter(t):h.insertAfter(t)),t.select(0,0),u=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===l&&(u.isSegmented()||u.isToken()||!u.canInsertTextBefore()||!h.canInsertTextBefore()&&null===u.getPreviousSibling())){let t=u.getPreviousSibling();if(Tr(t)&&!$e(t)||(t=Cr(),t.setFormat(r),h.canInsertTextBefore()?u.insertBefore(t):h.insertBefore(t)),t.select(),u=t,""!==e)return void this.insertText(e)}else if(u.isSegmented()&&l!==f){const e=Cr(u.getTextContent());e.setFormat(r),u.replace(e),u=e}else if(!this.isCollapsed()&&""!==e){const t=g.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||wo(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),Br(this.anchor,this.focus,null),void this.insertText(e)}if(1===d){if(u.isToken()){const t=Cr(e);return t.select(),void u.replace(t)}const t=u.getFormat(),n=u.getStyle();if(l!==a||t===r&&n===o){if(wr(u)){const t=Cr(e);return t.setFormat(r),t.setStyle(o),t.select(),void u.replace(t)}}else{if(""!==u.getTextContent()){const t=Cr(e);if(t.setFormat(r),t.setStyle(o),t.select(),0===l)u.insertBefore(t,!1);else{const[e]=u.splitText(l);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}u.setFormat(r),u.setStyle(o)}const i=a-l;u=u.spliceText(l,i,e,!0),""===u.getTextContent()?u.remove():"text"===this.anchor.type&&(u.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=n))}else{const t=new Set([...u.getParentKeys(),...g.getParentKeys()]),n=wo(u)?u:u.getParentOrThrow();let r=wo(g)?g:g.getParentOrThrow(),o=g;if(!n.is(r)&&r.isInline())do{o=r,r=r.getParentOrThrow()}while(r.isInline());if("text"===s.type&&(0!==a||""===g.getTextContent())||"element"===s.type&&g.getIndexWithinParent()<a)if(Tr(g)&&!g.isToken()&&a!==g.getTextContentSize()){if(g.isSegmented()){const e=Cr(g.getTextContent());g.replace(e),g=e}Ao(s.getNode())||"text"!==s.type||(g=g.spliceText(0,a,"")),t.add(g.__key)}else{const e=g.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?g.remove():e.remove()}else t.add(g.__key);const i=r.getChildren(),h=new Set(c),_=n.is(r),p=n.isInline()&&null===u.getNextSibling()?n:u;for(let e=i.length-1;e>=0;e--){const t=i[e];if(t.is(u)||wo(t)&&t.isParentOf(u))break;t.isAttached()&&(!h.has(t)||t.is(o)?_||p.insertAfter(t,!1):t.remove())}if(!_){let e=r,n=null;for(;null!==e;){const r=e.getChildren(),o=r.length;(0===o||r[o-1].is(n))&&(t.delete(e.__key),n=e),e=e.getParent()}}if(u.isToken())if(l===f)u.select();else{const t=Cr(e);t.select(),u.replace(t)}else u=u.spliceText(l,f-l,e,!0),""===u.getTextContent()?u.remove():u.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<d;e++){const n=c[e],r=n.__key;t.has(r)||n.remove()}}}removeText(){this.insertText("")}formatText(e){if(this.isCollapsed())return this.toggleFormat(e),void Ue(null);const t=this.getNodes(),n=[];for(const e of t)Tr(e)&&n.push(e);const r=n.length;if(0===r)return this.toggleFormat(e),void Ue(null);const o=this.anchor,i=this.focus,s=this.isBackward(),l=s?i:o,a=s?o:i;let c=0,d=n[0],u="element"===l.type?0:l.offset;if("text"===l.type&&u===d.getTextContentSize()&&(c=1,d=n[1],u=0),null==d)return;const f=d.getFormatFlags(e,null),h=r-1;let g=n[h];const _="text"===a.type?a.offset:g.getTextContentSize();if(d.is(g)){if(u===_)return;if($e(d)||0===u&&_===d.getTextContentSize())d.setFormat(f);else{const e=d.splitText(u,_),t=0===u?e[0]:e[1];t.setFormat(f),"text"===l.type&&l.set(t.__key,0,"text"),"text"===a.type&&a.set(t.__key,_-u,"text")}return void(this.format=f)}0===u||$e(d)||([,d]=d.splitText(u),u=0),d.setFormat(f);const p=g.getFormatFlags(e,f);_>0&&(_===g.getTextContentSize()||$e(g)||([g]=g.splitText(_)),g.setFormat(p));for(let t=c+1;t<h;t++){const r=n[t],o=r.getFormatFlags(e,p);r.setFormat(o)}"text"===l.type&&l.set(d.__key,u,"text"),"text"===a.type&&a.set(g.__key,_,"text"),this.format=f|p}insertNodes(e){if(0===e.length)return;if("root"===this.anchor.key){this.insertParagraph();const t=Yr();if(!Rr(t))throw Error("Expected RangeSelection after insertParagraph");return t.insertNodes(e)}const t=Wt((this.isBackward()?this.focus:this.anchor).getNode(),Bt),n=e[e.length-1];if("__language"in t&&wo(t)){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const r=Qr(this);t.splice(r,0,e),n.selectEnd()}return}if(!e.some(e=>(wo(e)||vo(e))&&!e.isInline())){if(!wo(t))throw Error("Expected 'firstBlock' to be an ElementNode");const r=Qr(this);return t.splice(r,0,e),void n.selectEnd()}const r=function(e){const t=$o();let n=null;for(let r=0;r<e.length;r++){const o=e[r],i=rr(o);if(i||vo(o)&&o.isInline()||wo(o)&&o.isInline()||Tr(o)||o.isParentRequired()){if(null===n&&(n=o.createParentElementNode(),t.append(n),i))continue;null!==n&&n.append(o)}else t.append(o),n=null}return t}(e),o=r.getLastDescendant(),i=r.getChildren(),s=!wo(t)||!t.isEmpty()?this.insertParagraph():null,l=i[i.length-1];let a=i[0];if(wo(c=a)&&Bt(c)&&!c.isEmpty()&&wo(t)&&(!t.isEmpty()||t.canMergeWhenEmpty())){if(!wo(t))throw Error("Expected 'firstBlock' to be an ElementNode");t.append(...a.getChildren()),a=i[1]}var c;a&&function(e,t,n){const r=t.getParentOrThrow().getLastChild();let o=t;const i=[t];for(;o!==r;){if(!o.getNextSibling())throw Error("insertRangeAfter: lastToInsert must be a later sibling of firstToInsert");o=o.getNextSibling(),i.push(o)}let s=e;for(const e of i)s=s.insertAfter(e)}(t,a);const d=Wt(o,Bt);s&&wo(d)&&(s.canMergeWhenEmpty()||Bt(l))&&(d.append(...s.getChildren()),s.remove()),wo(t)&&t.isEmpty()&&t.remove(),o.selectEnd();const u=wo(t)?t.getLastChild():null;rr(u)&&d!==t&&u.remove()}insertParagraph(){if("root"===this.anchor.key){const e=$o();return qe().splice(this.anchor.offset,0,[e]),e.select(),e}const e=Qr(this),t=Wt(this.anchor.getNode(),Bt);if(!wo(t))throw Error("Expected ancestor to be an ElementNode");const n=t.getChildAtIndex(e),r=n?[n,...n.getNextSiblings()]:[],o=t.insertNewAfter(this,!1);return o?(o.append(...r),o.selectStart(),o):null}insertLineBreak(e){const t=nr();if(this.insertNodes([t]),e){const e=t.getParentOrThrow(),n=t.getIndexWithinParent();e.select(n,n)}}extract(){const e=this.getNodes(),t=e.length,n=t-1,r=this.anchor,o=this.focus;let i=e[0],s=e[n];const[l,a]=Pr(this);if(0===t)return[];if(1===t){if(Tr(i)&&!this.isCollapsed()){const e=l>a?a:l,t=l>a?l:a,n=i.splitText(e,t),r=0===e?n[0]:n[1];return null!=r?[r]:[]}return[i]}const c=r.isBefore(o);if(Tr(i)){const t=c?l:a;t===i.getTextContentSize()?e.shift():0!==t&&([,i]=i.splitText(t),e[0]=i)}if(Tr(s)){const t=s.getTextContent().length,r=c?a:l;0===r?e.pop():r!==t&&([s]=s.splitText(r),e[n]=s)}return e}modify(e,t,n){const r=this.focus,o=this.anchor,i="move"===e,s=Ct(r,t);if(vo(s)&&!s.isIsolated()){if(i&&s.isKeyboardSelectable()){const e=Hr();return e.add(s.__key),void Ze(e)}const e=t?s.getPreviousSibling():s.getNextSibling();if(Tr(e)){const n=e.__key,s=t?e.getTextContent().length:0;return r.set(n,s,"text"),void(i&&o.set(n,s,"text"))}{const n=s.getParentOrThrow();let l,a;return wo(e)?(a=e.__key,l=t?e.getChildrenSize():0):(l=s.getIndexWithinParent(),a=n.__key,t||l++),r.set(a,l,"element"),void(i&&o.set(a,l,"element"))}}const l=uo(),a=Pt(l._window);if(!a)return;const c=l._blockCursorElement,d=l._rootElement;if(null===d||null===c||!wo(s)||s.isInline()||s.canBeEmpty()||It(c,l,d),function(e,t,n,r){e.modify(t,n,r)}(a,e,t?"backward":"forward",n),a.rangeCount>0){const e=a.getRangeAt(0),n=this.anchor.getNode(),r=Ao(n)?n:vt(n);if(this.applyDOMRange(e),this.dirty=!0,!i){const n=this.getNodes(),o=[];let i=!1;for(let e=0;e<n.length;e++){const t=n[e];bt(t,r)?o.push(t):i=!0}if(i&&o.length>0)if(t){const e=o[0];wo(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{const e=o[o.length-1];wo(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}a.anchorNode===e.startContainer&&a.anchorOffset===e.startOffset||function(e){const t=e.focus,n=e.anchor,r=n.key,o=n.offset,i=n.type;Ar(n,t.key,t.offset,t.type),Ar(t,r,o,i),e._cachedNodes=null}(this)}}}forwardDeletion(e,t,n){if(!n&&("element"===e.type&&wo(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){const e=t.getParent(),n=t.getNextSibling()||(null===e?null:e.getNextSibling());if(wo(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const t=this.anchor;let r=t.getNode();if(this.forwardDeletion(t,r,e))return;const o=this.focus,i=Ct(o,e);if(vo(i)&&!i.isIsolated()){if(i.isKeyboardSelectable()&&wo(r)&&0===r.getChildrenSize()){r.remove();const e=Hr();e.add(i.__key),Ze(e)}else{i.remove();uo().dispatchCommand(n,void 0)}return}if(!e&&wo(i)&&wo(r)&&r.isEmpty())return r.remove(),void i.selectStart();if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset){if(("element"===t.type?t.getNode():t.getNode().getParentOrThrow()).collapseAtStart(this))return}}else{const n="text"===o.type?o.getNode():null;if(r="text"===t.type?t.getNode():null,null!==n&&n.isSegmented()){const t=o.offset,i=n.getTextContentSize();if(n.is(r)||e&&t!==i||!e&&0!==t)return void $r(n,e,t)}else if(null!==r&&r.isSegmented()){const o=t.offset,i=r.getTextContentSize();if(r.is(n)||e&&0!==o||!e&&o!==i)return void $r(r,e,o)}!function(e,t){const n=e.anchor,r=e.focus,o=n.getNode(),i=r.getNode();if(o===i&&"text"===n.type&&"text"===r.type){const e=n.offset,i=r.offset,s=e<i,l=s?e:i,a=s?i:e,c=a-1;if(l!==c){nt(o.getTextContent().slice(l,a))||(t?r.offset=c:n.offset=c)}}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){const e=this.anchor.getNode();e.isEmpty()&&Ao(e.getParent())&&0===e.getIndexWithinParent()&&e.collapseAtStart(this)}}deleteLine(e){if(this.isCollapsed()){const t="element"===this.anchor.type;t&&this.insertText(" "),this.modify("extend",e,"lineboundary");if(0===(e?this.focus:this.anchor).offset&&this.modify("extend",e,"character"),t){const t=e?this.anchor:this.focus;t.set(t.key,t.offset+1,t.type)}}this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Ir(e){return e instanceof Dr}function Lr(e){const t=e.offset;if("text"===e.type)return t;const n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function Pr(e){const t=e.getStartEndPoints();if(null===t)return[0,0];const[n,r]=t;return"element"===n.type&&"element"===r.type&&n.key===r.key&&n.offset===r.offset?[0,0]:[Lr(n),Lr(r)]}function $r(e,t,n){const r=e,o=r.getTextContent().split(/(?=\s)/g),i=o.length;let s=0,l=0;for(let e=0;e<i;e++){const r=e===i-1;if(l=s,s+=o[e].length,t&&s===n||s>n||r){o.splice(e,1),r&&(l=void 0);break}}const a=o.join("").trim();""===a?r.remove():(r.setTextContent(a),r.select(l,l))}function Fr(e,t,n,r){let o,i=t;if(1===e.nodeType){let s=!1;const l=e.childNodes,a=l.length,c=r._blockCursorElement;i===a&&(s=!0,i=a-1);let d=l[i],u=!1;if(d===c)d=l[i+1],u=!0;else if(null!==c){const n=c.parentNode;if(e===n){t>Array.prototype.indexOf.call(n.children,c)&&i--}}if(o=et(d),Tr(o))i=tt(o,s);else{let r=et(e);if(null===r)return null;if(wo(r)){i=Math.min(r.getChildrenSize(),i);let e=r.getChildAtIndex(i);if(wo(e)&&function(e,t,n){const r=e.getParent();return null===n||null===r||!r.canBeEmpty()||r!==n.getNode()}(e,0,n)){const t=s?e.getLastDescendant():e.getFirstDescendant();null===t?r=e:(e=t,r=wo(e)?e:e.getParentOrThrow()),i=0}Tr(e)?(o=e,r=null,i=tt(e,s)):e!==r&&s&&!u&&i++}else{const n=r.getIndexWithinParent();i=0===t&&vo(r)&&et(e)===r?n:n+1,r=r.getParentOrThrow()}if(wo(r))return Or(r.__key,i,"element")}}else o=et(e);return Tr(o)?Or(o.__key,i,"text"):null}function Kr(e,t,n){const r=e.offset,o=e.getNode();if(0===r){const r=o.getPreviousSibling(),i=o.getParent();if(t){if((n||!t)&&null===r&&wo(i)&&i.isInline()){const t=i.getPreviousSibling();Tr(t)&&(e.key=t.__key,e.offset=t.getTextContent().length)}}else wo(r)&&!n&&r.isInline()?(e.key=r.__key,e.offset=r.getChildrenSize(),e.type="element"):Tr(r)&&(e.key=r.__key,e.offset=r.getTextContent().length)}else if(r===o.getTextContent().length){const r=o.getNextSibling(),i=o.getParent();if(t&&wo(r)&&r.isInline())e.key=r.__key,e.offset=0,e.type="element";else if((n||t)&&null===r&&wo(i)&&i.isInline()&&!i.canInsertTextAfter()){const t=i.getNextSibling();Tr(t)&&(e.key=t.__key,e.offset=0)}}}function Br(e,t,n){if("text"===e.type&&"text"===t.type){const r=e.isBefore(t),o=e.is(t);Kr(e,r,o),Kr(t,!r,o),o&&(t.key=e.key,t.offset=e.offset,t.type=e.type);const i=uo();if(i.isComposing()&&i._compositionKey!==e.key&&Rr(n)){const r=n.anchor,o=n.focus;Ar(e,r.key,r.offset,r.type),Ar(t,o.key,o.offset,o.type)}}}function Wr(e,t,n,r,o,i){if(null===e||null===n||!ke(o,e,n))return null;const s=Fr(e,t,Rr(i)?i.anchor:null,o);if(null===s)return null;const l=Fr(n,r,Rr(i)?i.focus:null,o);if(null===l)return null;if("element"===s.type&&"element"===l.type){const t=et(e),r=et(n);if(vo(t)&&vo(r))return null}return Br(s,l,i),[s,l]}function zr(e,t,n,r,o,i){const s=co(),l=new kr(Or(e,t,o),Or(n,r,i),0,"");return l.dirty=!0,s._selection=l,l}function Hr(){return new Dr(new Set)}function Ur(e,t,n,r){const o=n._window;if(null===o)return null;const i=r||o.event,s=i?i.type:void 0,l="selectionchange"===s,a=!pe&&(l||"beforeinput"===s||"compositionstart"===s||"compositionend"===s||"click"===s&&i&&3===i.detail||"drop"===s||void 0===s);let c,d,u,f;if(Rr(e)&&!a)return e.clone();if(null===t)return null;if(c=t.anchorNode,d=t.focusNode,u=t.anchorOffset,f=t.focusOffset,l&&Rr(e)&&!ke(n,c,d))return e.clone();const h=Wr(c,u,d,f,n,e);if(null===h)return null;const[g,_]=h;return new kr(g,_,Rr(e)?e.format:0,Rr(e)?e.style:"")}function Yr(){return co()._selection}function Jr(){return uo()._editorState._selection}function jr(e,t,n,r=1){const o=e.anchor,i=e.focus,s=o.getNode(),l=i.getNode();if(!t.is(s)&&!t.is(l))return;const a=t.__key;if(e.isCollapsed()){const t=o.offset;if(n<=t&&r>0||n<t&&r<0){const n=Math.max(0,t+r);o.set(a,n,"element"),i.set(a,n,"element"),Gr(e)}}else{const s=e.isBackward(),l=s?i:o,c=l.getNode(),d=s?o:i,u=d.getNode();if(t.is(c)){const e=l.offset;(n<=e&&r>0||n<e&&r<0)&&l.set(a,Math.max(0,e+r),"element")}if(t.is(u)){const e=d.offset;(n<=e&&r>0||n<e&&r<0)&&d.set(a,Math.max(0,e+r),"element")}}Gr(e)}function Gr(e){const t=e.anchor,n=t.offset,r=e.focus,o=r.offset,i=t.getNode(),s=r.getNode();if(e.isCollapsed()){if(!wo(i))return;const e=i.getChildrenSize(),o=n>=e,s=o?i.getChildAtIndex(e-1):i.getChildAtIndex(n);if(Tr(s)){let e=0;o&&(e=s.getTextContentSize()),t.set(s.__key,e,"text"),r.set(s.__key,e,"text")}}else{if(wo(i)){const e=i.getChildrenSize(),r=n>=e,o=r?i.getChildAtIndex(e-1):i.getChildAtIndex(n);if(Tr(o)){let e=0;r&&(e=o.getTextContentSize()),t.set(o.__key,e,"text")}}if(wo(s)){const e=s.getChildrenSize(),t=o>=e,n=t?s.getChildAtIndex(e-1):s.getChildAtIndex(o);if(Tr(n)){let e=0;t&&(e=n.getTextContentSize()),r.set(n.__key,e,"text")}}}}function Xr(e,t,n,r,o){let i=null,s=0,l=null;null!==r?(i=r.__key,Tr(r)?(s=r.getTextContentSize(),l="text"):wo(r)&&(s=r.getChildrenSize(),l="element")):null!==o&&(i=o.__key,Tr(o)?l="text":wo(o)&&(l="element")),null!==i&&null!==l?e.set(i,s,l):(s=t.getIndexWithinParent(),-1===s&&(s=n.getChildrenSize()),e.set(n.__key,s,"element"))}function Vr(e,t,n,r,o){"text"===e.type?(e.key=n,t||(e.offset+=o)):e.offset>r.getIndexWithinParent()&&(e.offset-=1)}function qr(e,t,n,r,o,i,s){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,d=r.focusOffset,u=document.activeElement;if(o.has("collaboration")&&u!==i||null!==u&&Re(u))return;if(!Rr(t))return void(null!==e&&ke(n,l,a)&&r.removeAllRanges());const f=t.anchor,h=t.focus,g=f.key,_=h.key,p=xt(n,g),m=xt(n,_),N=f.offset,y=h.offset,C=t.format,T=t.style,E=t.isCollapsed();let S=p,x=m,w=!1;if("text"===f.type){S=Ke(p);const e=f.getNode();w=e.getFormat()!==C||e.getStyle()!==T}else Rr(e)&&"text"===e.anchor.type&&(w=!0);var b,O,v,M,A;if(("text"===h.type&&(x=Ke(m)),null!==S&&null!==x)&&(E&&(null===e||w||Rr(e)&&(e.format!==C||e.style!==T))&&(b=C,O=T,v=N,M=g,A=performance.now(),Bn=[b,O,v,M,A]),c!==N||d!==y||l!==S||a!==x||"Range"===r.type&&E||(null!==u&&i.contains(u)||i.focus({preventScroll:!0}),"element"===f.type))){try{r.setBaseAndExtent(S,N,x,y)}catch(e){console.warn(e)}if(!o.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==i&&i===document.activeElement){const e=t instanceof kr&&"element"===t.anchor.type?S.childNodes[N]||null:r.rangeCount>0?r.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){const n=document.createRange();n.selectNode(e),t=n.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,n){const r=n.ownerDocument,o=r.defaultView;if(null===o)return;let{top:i,bottom:s}=t,l=0,a=0,c=n;for(;null!==c;){const t=c===r.body;if(t)l=0,a=Ot(e).innerHeight;else{const e=c.getBoundingClientRect();l=e.top,a=e.bottom}let n=0;if(i<l?n=-(l-i):s>a&&(n=s-a),0!==n)if(t)o.scrollBy(0,n);else{const e=c.scrollTop;c.scrollTop+=n;const t=c.scrollTop-e;i-=t,s-=t}if(t)break;c=wt(c)}}(n,t,i)}}Pn=!0}}function Qr(e){let t=e;e.isCollapsed()||t.removeText();const n=Yr();if(Rr(n)&&(t=n),!Rr(t))throw Error("Unexpected dirty selection to be null");const r=t.anchor;let o=r.getNode(),i=r.offset;for(;!Bt(o);)[o,i]=Zr(o,i);return i}function Zr(e,t){const n=e.getParent();if(!n){const e=$o();return qe().append(e),e.select(),[qe(),0]}if(Tr(e)){const r=e.splitText(t);if(0===r.length)return[n,e.getIndexWithinParent()];const o=0===t?0:1;return[n,r[0].getIndexWithinParent()+o]}if(!wo(e)||0===t)return[n,e.getIndexWithinParent()];const r=e.getChildAtIndex(t);if(r){const n=new kr(Or(e.__key,t,"element"),Or(e.__key,t,"element"),0,""),o=e.insertNewAfter(n);o&&o.append(r,...r.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}let eo=null,to=null,no=!1,ro=!1,oo=0;const io={characterData:!0,childList:!0,subtree:!0};function so(){return no||null!==eo&&eo._readOnly}function lo(){if(no)throw Error("Cannot use method in read-only mode.")}function ao(){if(oo>99)throw Error("One or more transforms are endlessly triggering additional transforms. May have encountered infinite recursion caused by transforms that have their preconditions too lose and/or conflict with each other.")}function co(){if(null===eo)throw Error("Unable to find an active editor state. State helpers or node methods can only be used synchronously during the callback of editor.update(), editor.read(), or editorState.read()."+fo());return eo}function uo(){if(null===to)throw Error("Unable to find an active editor. This method can only be used synchronously during the callback of editor.update() or editor.read()."+fo());return to}function fo(){let e=0;const t=new Set,n=Bo.version;if("undefined"!=typeof window)for(const r of document.querySelectorAll("[contenteditable]")){const o=Pe(r);if(Ie(o))e++;else if(o){let e=String(o.constructor.version||"<0.17.1");e===n&&(e+=" (separately built, likely a bundler configuration issue)"),t.add(e)}}let r=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(r+=" and incompatible editors with versions "+Array.from(t).join(", ")),r}function ho(){return to}function go(e,t,n){const r=t.__type,o=function(e,t){const n=e._nodes.get(t);if(void 0===n)throw Error(`registeredNode: Type ${t} not found`);return n}(e,r);let i=n.get(r);void 0===i&&(i=Array.from(o.transforms),n.set(r,i));const s=i.length;for(let e=0;e<s&&(i[e](t),t.isAttached());e++);}function _o(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function po(e,t){const n=e.type,r=t.get(n);if(void 0===r)throw Error(`parseEditorState: type "${n}" + not found`);const o=r.klass;if(e.type!==o.getType())throw Error(`LexicalNode: Node ${o.name} does not implement .importJSON().`);const i=o.importJSON(e),s=e.children;if(wo(i)&&Array.isArray(s))for(let e=0;e<s.length;e++){const n=po(s[e],t);i.append(n)}return i}function mo(e,t,n){const r=eo,o=no,i=to;eo=t,no=!0,to=e;try{return n()}finally{eo=r,no=o,to=i}}function No(e){const t=e._nodeMap;t.set=()=>{throw new Error("Cannot call set() on a frozen Lexical node map")},t.clear=()=>{throw new Error("Cannot call clear() on a frozen Lexical node map")},t.delete=()=>{throw new Error("Cannot call delete() on a frozen Lexical node map")}}function yo(e,t){const r=e._pendingEditorState,o=e._rootElement,i=e._headless||null===o;if(null===r)return;const s=e._editorState,l=s._selection,a=r._selection,c=0!==e._dirtyType,d=eo,u=no,f=to,h=e._updating,g=e._observer;let _=null;if(e._pendingEditorState=null,e._editorState=r,!i&&c&&null!==g){to=e,eo=r,no=!1,e._updating=!0;try{const t=e._dirtyType,n=e._dirtyElements,i=e._dirtyLeaves;g.disconnect(),_=On(s,r,e,t,n,i)}catch(t){if(t instanceof Error&&e._onError(t),ro)throw t;return Ko(e,null,o,r),xe(e),e._dirtyType=2,ro=!0,yo(e,s),void(ro=!1)}finally{g.observe(o,io),e._updating=h,eo=d,no=u,to=f}}r._readOnly||(r._readOnly=!0,No(r),Rr(a)&&(Object.freeze(a.anchor),Object.freeze(a.focus)),Object.freeze(a));const p=e._dirtyLeaves,m=e._dirtyElements,N=e._normalizedNodes,y=e._updateTags,C=e._deferred;c&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){const n=e._decorators;let r=e._pendingDecorators||n;const o=t._nodeMap;let i;for(i in r)o.has(i)||(r===n&&(r=Xe(e)),delete r[i])}(e,r);const T=i?null:Pt(e._window);if(e._editable&&null!==T&&(c||null===a||a.dirty)){to=e,eo=r;try{if(null!==g&&g.disconnect(),c||null===a||a.dirty){const t=e._blockCursorElement;null!==t&&It(t,e,o),qr(l,a,e,T,y,o)}Lt(e,o,a),null!==g&&g.observe(o,io)}finally{to=f,eo=d}}null!==_&&function(e,t,n,r,o){const i=Array.from(e._listeners.mutation),s=i.length;for(let e=0;e<s;e++){const[s,l]=i[e],a=t.get(l);void 0!==a&&s(a,{dirtyLeaves:r,prevEditorState:o,updateTags:n})}}(e,_,y,p,s),Rr(a)||null===a||null!==l&&l.is(a)||e.dispatchCommand(n,void 0);const E=e._pendingDecorators;null!==E&&(e._decorators=E,e._pendingDecorators=null,Co("decorator",e,!0,E)),function(e,t,n){const r=Ve(t),o=Ve(n);r!==o&&Co("textcontent",e,!0,o)}(e,t||s,r),Co("update",e,!0,{dirtyElements:m,dirtyLeaves:p,editorState:r,normalizedNodes:N,prevEditorState:t||s,tags:y}),function(e,t){if(e._deferred=[],0!==t.length){const n=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=n}}}(e,C),function(e){const t=e._updates;if(0!==t.length){const n=t.shift();if(n){const[t,r]=n;Eo(e,t,r)}}}(e)}function Co(e,t,n,...r){const o=t._updating;t._updating=n;try{const n=Array.from(t._listeners[e]);for(let e=0;e<n.length;e++)n[e].apply(null,r)}finally{t._updating=o}}function To(e,t){const n=e._updates;let r=t||!1;for(;0!==n.length;){const t=n.shift();if(t){const[n,o]=t;let i,s;if(void 0!==o){if(i=o.onUpdate,s=o.tag,o.skipTransforms&&(r=!0),o.discrete){const t=e._pendingEditorState;if(null===t)throw Error("Unexpected empty pending editor state on discrete nested update");t._flushSync=!0}i&&e._deferred.push(i),s&&e._updateTags.add(s)}n()}}return r}function Eo(e,t,n){const r=e._updateTags;let o,i,s=!1,l=!1;void 0!==n&&(o=n.onUpdate,i=n.tag,null!=i&&r.add(i),s=n.skipTransforms||!1,l=n.discrete||!1),o&&e._deferred.push(o);const a=e._editorState;let c=e._pendingEditorState,d=!1;(null===c||c._readOnly)&&(c=e._pendingEditorState=new ko(new Map((c||a)._nodeMap)),d=!0),c._flushSync=l;const u=eo,f=no,h=to,g=e._updating;eo=c,no=!1,e._updating=!0,to=e;try{d&&(e._headless?null!==a._selection&&(c._selection=a._selection.clone()):c._selection=function(e){const t=e.getEditorState()._selection,n=Pt(e._window);return Rr(t)||null==t?Ur(t,n,e,null):t.clone()}(e));const n=e._compositionKey;t(),s=To(e,s),function(e,t){const n=t.getEditorState()._selection,r=e._selection;if(Rr(r)){const e=r.anchor,t=r.focus;let o;if("text"===e.type&&(o=e.getNode(),o.selectionTransform(n,r)),"text"===t.type){const e=t.getNode();o!==e&&e.selectionTransform(n,r)}}}(c,e),0!==e._dirtyType&&(s?function(e,t){const n=t._dirtyLeaves,r=e._nodeMap;for(const e of n){const t=r.get(e);Tr(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&Oe(t)}}(c,e):function(e,t){const n=t._dirtyLeaves,r=t._dirtyElements,o=e._nodeMap,i=Ye(),s=new Map;let l=n,a=l.size,c=r,d=c.size;for(;a>0||d>0;){if(a>0){t._dirtyLeaves=new Set;for(const e of l){const r=o.get(e);Tr(r)&&r.isAttached()&&r.isSimpleText()&&!r.isUnmergeable()&&Oe(r),void 0!==r&&_o(r,i)&&go(t,r,s),n.add(e)}if(l=t._dirtyLeaves,a=l.size,a>0){oo++;continue}}t._dirtyLeaves=new Set,t._dirtyElements=new Map;for(const e of c){const n=e[0],l=e[1];if("root"!==n&&!l)continue;const a=o.get(n);void 0!==a&&_o(a,i)&&go(t,a,s),r.set(n,l)}l=t._dirtyLeaves,a=l.size,c=t._dirtyElements,d=c.size,oo++}t._dirtyLeaves=n,t._dirtyElements=r}(c,e),To(e),function(e,t,n,r){const o=e._nodeMap,i=t._nodeMap,s=[];for(const[e]of r){const t=i.get(e);void 0!==t&&(t.isAttached()||(wo(t)&&Jt(t,e,o,i,s,r),o.has(e)||r.delete(e),s.push(e)))}for(const e of s)i.delete(e);for(const e of n){const t=i.get(e);void 0===t||t.isAttached()||(o.has(e)||n.delete(e),i.delete(e))}}(a,c,e._dirtyLeaves,e._dirtyElements));n!==e._compositionKey&&(c._flushSync=!0);const r=c._selection;if(Rr(r)){const e=c._nodeMap,t=r.anchor.key,n=r.focus.key;if(void 0===e.get(t)||void 0===e.get(n))throw Error("updateEditor: selection has been lost because the previously selected nodes have been removed and selection wasn't moved to another node. Ensure selection changes after removing/replacing a selected node.")}else Ir(r)&&0===r._nodes.size&&(c._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=a,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void yo(e)}finally{eo=u,no=f,to=h,e._updating=g,oo=0}0!==e._dirtyType||function(e,t){const n=t.getEditorState()._selection,r=e._selection;if(null!==r){if(r.dirty||!r.is(n))return!0}else if(null!==n)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,yo(e)):d&&De(()=>{yo(e)}):(c._flushSync=!1,d&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function So(e,t,n){e._updating?e._updates.push([t,n]):Eo(e,t,n)}class xo extends Zn{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null}afterCloneFrom(e){super.afterCloneFrom(e),this.__first=e.__first,this.__last=e.__last,this.__size=e.__size,this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return fe[e]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){const e=[];let t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){const e=uo()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){const e=[];let t=this.getFirstChild();for(;null!==t;){if(Tr(t)&&e.push(t),wo(t)){const n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;wo(e);){const t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;wo(e);){const t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){const t=this.getChildren(),n=t.length;if(e>=n){const e=t[n-1];return wo(e)&&e.getLastDescendant()||e||null}const r=t[e];return wo(r)&&r.getFirstDescendant()||r||null}getFirstChild(){const e=this.getLatest().__first;return null===e?null:Je(e)}getFirstChildOrThrow(){const e=this.getFirstChild();if(null===e)throw Error(`Expected node ${this.__key} to have a first child.`);return e}getLastChild(){const e=this.getLatest().__last;return null===e?null:Je(e)}getLastChildOrThrow(){const e=this.getLastChild();if(null===e)throw Error(`Expected node ${this.__key} to have a last child.`);return e}getChildAtIndex(e){const t=this.getChildrenSize();let n,r;if(e<t/2){for(n=this.getFirstChild(),r=0;null!==n&&r<=e;){if(r===e)return n;n=n.getNextSibling(),r++}return null}for(n=this.getLastChild(),r=t-1;null!==n&&r>=e;){if(r===e)return n;n=n.getPreviousSibling(),r--}return null}getTextContent(){let e="";const t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){const o=t[r];e+=o.getTextContent(),wo(o)&&r!==n-1&&!o.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0;const t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){const o=t[r];e+=o.getTextContentSize(),wo(o)&&r!==n-1&&!o.isInline()&&(e+="\n\n".length)}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){if(""!==e){const t=ue[e];return 0!=(this.getFormat()&t)}return!1}select(e,t){lo();const n=Yr();let r=e,o=t;const i=this.getChildrenSize();if(!this.canBeEmpty())if(0===e&&0===t){const e=this.getFirstChild();if(Tr(e)||wo(e))return e.select(0,0)}else if(!(void 0!==e&&e!==i||void 0!==t&&t!==i)){const e=this.getLastChild();if(Tr(e)||wo(e))return e.select()}void 0===r&&(r=i),void 0===o&&(o=i);const s=this.__key;return Rr(n)?(n.anchor.set(s,r,"element"),n.focus.set(s,o,"element"),n.dirty=!0,n):zr(s,r,s,o,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?ue[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){const r=n.length,o=this.getChildrenSize(),i=this.getWritable(),s=i.__key,l=[],a=[],c=this.getChildAtIndex(e+t);let d=null,u=o-t+r;if(0!==e)if(e===o)d=this.getLastChild();else{const t=this.getChildAtIndex(e);null!==t&&(d=t.getPreviousSibling())}if(t>0){let e=null===d?this.getFirstChild():d.getNextSibling();for(let n=0;n<t;n++){if(null===e)throw Error("splice: sibling not found");const t=e.getNextSibling(),n=e.__key;ze(e.getWritable()),a.push(n),e=t}}let f=d;for(let e=0;e<r;e++){const t=n[e];null!==f&&t.is(f)&&(d=f=f.getPreviousSibling());const r=t.getWritable();r.__parent===s&&u--,ze(r);const o=t.__key;if(null===f)i.__first=o,r.__prev=null;else{const e=f.getWritable();e.__next=o,r.__prev=e.__key}if(t.__key===s)throw Error("append: attempting to append self");r.__parent=s,l.push(o),f=t}if(e+t===o){if(null!==f){f.getWritable().__next=null,i.__last=f.__key}}else if(null!==c){const e=c.getWritable();if(null!==f){const t=f.getWritable();e.__prev=f.__key,t.__next=c.__key}else e.__prev=null}if(i.__size=u,a.length){const e=Yr();if(Rr(e)){const t=new Set(a),n=new Set(l),{anchor:r,focus:o}=e;bo(r,t,n)&&Xr(r,r.getNode(),this,d,c),bo(o,t,n)&&Xr(o,o.getNode(),this,d,c),0!==u||this.canBeEmpty()||Mt(this)||this.remove()}}return i}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,n){return!1}canMergeWhenEmpty(){return!1}}function wo(e){return e instanceof xo}function bo(e,t,n){let r=e.getNode();for(;r;){const e=r.__key;if(t.has(e)&&!n.has(e))return!0;r=r.getParent()}return!1}class Oo extends Zn{constructor(e){super(e)}decorate(e,t){throw Error("decorate: base method not extended")}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function vo(e){return e instanceof Oo}class Mo extends xo{static getType(){return"root"}static clone(){return new Mo}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){throw Error("getTopLevelElementOrThrow: root nodes are not top level elements")}getTextContent(){const e=this.__cachedText;return!so()&&0!==uo()._dirtyType||null===e?super.getTextContent():e}remove(){throw Error("remove: cannot be called on root nodes")}replace(e){throw Error("replace: cannot be called on root nodes")}insertBefore(e){throw Error("insertBefore: cannot be called on root nodes")}insertAfter(e){throw Error("insertAfter: cannot be called on root nodes")}updateDOM(e,t){return!1}append(...e){for(let t=0;t<e.length;t++){const n=e[t];if(!wo(n)&&!vo(n))throw Error("rootNode.append: Only element or decorator nodes can be appended to the root node")}return super.append(...e)}static importJSON(e){const t=qe();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function Ao(e){return e instanceof Mo}function Do(){return new ko(new Map([["root",new Mo]]))}function Ro(e){const t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType())throw Error(`LexicalNode: Node ${n.name} does not match the serialized type. Check if .exportJSON() is implemented and it is returning the correct type.`);if(wo(e)){const r=t.children;if(!Array.isArray(r))throw Error(`LexicalNode: Node ${n.name} is an element but .exportJSON() does not have a children array.`);const o=e.getChildren();for(let e=0;e<o.length;e++){const t=Ro(o[e]);r.push(t)}}return t}class ko{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e,t){return mo(t&&t.editor||null,this,e)}clone(e){const t=new ko(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return mo(null,this,()=>({root:Ro(qe())}))}}class Io extends xo{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class Lo extends xo{constructor(e){super(e),this.__textFormat=0,this.__textStyle=""}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(e){const t=this.getWritable();return t.__textFormat=e,t}hasTextFormat(e){const t=ce[e];return 0!=(this.getTextFormat()&t)}getTextStyle(){return this.getLatest().__textStyle}setTextStyle(e){const t=this.getWritable();return t.__textStyle=e,t}static clone(e){return new Lo(e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}createDOM(e){const t=document.createElement("p"),n=mt(e.theme,"paragraph");if(void 0!==n){t.classList.add(...n)}return t}updateDOM(e,t,n){return!1}static importDOM(){return{p:e=>({conversion:Po,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(t&&$t(t)){this.isEmpty()&&t.append(document.createElement("br"));const e=this.getFormatType();t.style.textAlign=e;const n=this.getDirection();n&&(t.dir=n);const r=this.getIndent();r>0&&(t.style.textIndent=20*r+"px")}return{element:t}}static importJSON(e){const t=$o();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t.setTextFormat(e.textFormat),t}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle(),type:"paragraph",version:1}}insertNewAfter(e,t){const n=$o();n.setTextFormat(e.format),n.setTextStyle(e.style);const r=this.getDirection();return n.setDirection(r),n.setFormat(this.getFormatType()),n.setStyle(this.getTextStyle()),this.insertAfter(n,t),n}collapseAtStart(){const e=this.getChildren();if(0===e.length||Tr(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function Po(e){const t=$o();if(e.style){t.setFormat(e.style.textAlign);const n=parseInt(e.style.textIndent,10)/20;n>0&&t.setIndent(n)}return{node:t}}function $o(){return Dt(new Lo)}function Fo(e){return e instanceof Lo}function Ko(e,t,n,r){const o=e._keyToDOMMap;o.clear(),e._editorState=Do(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const i=e._observer;null!==i&&(i.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",o.set("root",n))}class Bo{constructor(e,t,n,r,o,i,s){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=ot(),this._onError=o,this._htmlConversions=i,this._editable=s,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){if(void 0===n)throw Error('Listener for type "command" requires a "priority".');const r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);const o=r.get(e);if(void 0===o)throw Error(`registerCommand: Command ${String(e)} not found in command map`);const i=o[n];return i.add(t),()=>{i.delete(t),o.every(e=>0===e.size)&&r.delete(e)}}registerMutationListener(e,t,n){const r=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,o=this._listeners.mutation;o.set(t,r);const i=n&&n.skipInitialization;return void 0===i||i||this.initializeMutationListener(t,r),()=>{o.delete(t)}}getRegisteredNode(e){const t=this._nodes.get(e.getType());if(void 0===t)throw Error(`Node ${e.name} has not been registered. Ensure node has been passed to createEditor.`);return t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){const n=this._editorState,r=Ut(n).get(t.getType());if(!r)return;const o=new Map;for(const e of r.keys())o.set(e,"created");o.size>0&&e(o,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){const n=this.getRegisteredNode(e);return n.transforms.add(t),n}registerNodeTransform(e,t){const n=this.registerNodeTransformToKlass(e,t),r=[n],o=n.replaceWithKlass;if(null!=o){const e=this.registerNodeTransformToKlass(o,t);r.push(e)}var i,s;return i=this,s=e.getType(),So(i,()=>{const e=co();if(e.isEmpty())return;if("root"===s)return void qe().markDirty();const t=e._nodeMap;for(const[,e]of t)e.markDirty()},null===i._pendingEditorState?{tag:"history-merge"}:void 0),()=>{r.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return Et(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const n=mt(this._config.theme,"root"),r=this._pendingEditorState||this._editorState;if(this._rootElement=e,Ko(this,t,e,r),null!==t&&(this._config.disableEvents||qn(t),null!=n&&t.classList.remove(...n)),null!==e){const t=function(e){const t=e.ownerDocument;return t&&t.defaultView||null}(e),r=e.style;r.userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=2,xe(this),this._updateTags.add("history-merge"),yo(this),this._config.disableEvents||function(e,t){const n=e.ownerDocument,r=Ln.get(n);(void 0===r||r<1)&&n.addEventListener("selectionchange",Gn),Ln.set(n,(r||0)+1),e.__lexicalEditor=t;const o=Jn(e);for(let n=0;n<An.length;n++){const[r,i]=An[n],s="function"==typeof i?e=>{Vn(e)||(Xn(e),(t.isEditable()||"click"===r)&&i(e,t))}:e=>{if(Vn(e))return;Xn(e);const n=t.isEditable();switch(r){case"cut":return n&&Et(t,F,e);case"copy":return Et(t,$,e);case"paste":return n&&Et(t,c,e);case"dragstart":return n&&Et(t,I,e);case"dragover":return n&&Et(t,L,e);case"dragend":return n&&Et(t,P,e);case"focus":return n&&Et(t,U,e);case"blur":return n&&Et(t,Y,e);case"drop":return n&&Et(t,R,e)}};e.addEventListener(r,s),o.push(()=>{e.removeEventListener(r,s)})}}(e,this),null!=n&&e.classList.add(...n)}else this._editorState=r,this._pendingEditorState=null,this._window=null;Co("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){if(e.isEmpty())throw Error("setEditorState: the editor state is empty. Ensure the editor state's root node never becomes empty.");Se(this);const n=this._pendingEditorState,r=this._updateTags,o=void 0!==t?t.tag:null;null===n||n.isEmpty()||(null!=o&&r.add(o),yo(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=o&&r.add(o),yo(this)}parseEditorState(e,t){return function(e,t,n){const r=Do(),o=eo,i=no,s=to,l=t._dirtyElements,a=t._dirtyLeaves,c=t._cloneNotNeeded,d=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._cloneNotNeeded=new Set,t._dirtyType=0,eo=r,no=!1,to=t;try{const u=t._nodes;po(e.root,u),n&&n(),r._readOnly=!0,No(r)}catch(e){e instanceof Error&&t._onError(e)}finally{t._dirtyElements=l,t._dirtyLeaves=a,t._cloneNotNeeded=c,t._dirtyType=d,eo=o,no=i,to=s}return r}("string"==typeof e?JSON.parse(e):e,this,t)}read(e){return yo(this),this.getEditorState().read(e,{editor:this})}update(e,t){So(this,e,t)}focus(e,t={}){const n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),So(this,()=>{const e=Yr(),n=qe();null!==e?e.dirty=!0:0!==n.getChildrenSize()&&("rootStart"===t.defaultSelection?n.selectStart():n.selectEnd())},{onUpdate:()=>{n.removeAttribute("autocapitalize"),e&&e()},tag:"focus"}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;null!==e&&e.blur();const t=Pt(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,Co("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}Bo.version="0.17.1+dev.esm";var Wo=Object.freeze({$addUpdateTag:function(e){lo(),uo()._updateTags.add(e)},$applyNodeReplacement:Dt,$cloneWithProperties:Yt,$copyNode:At,$createLineBreakNode:nr,$createNodeSelection:Hr,$createParagraphNode:$o,$createPoint:Or,$createRangeSelection:function(){const e=Or("root",0,"element"),t=Or("root",0,"element");return new kr(e,t,0,"")},$createRangeSelectionFromDom:function(e,t){return Ur(null,e,t,null)},$createTabNode:xr,$createTextNode:Cr,$getAdjacentNode:Ct,$getCharacterOffsets:Pr,$getEditor:function(){return uo()},$getNearestNodeFromDOMNode:Ge,$getNearestRootOrShadowRoot:vt,$getNodeByKey:Je,$getNodeByKeyOrThrow:function(e){const t=Je(e);if(null===t)throw Error(`Expected node with key ${e} to exist but it's not in the nodeMap.`);return t},$getPreviousSelection:Jr,$getRoot:qe,$getSelection:Yr,$getTextContent:function(){const e=Yr();return null===e?"":e.getTextContent()},$hasAncestor:bt,$hasUpdateTag:function(e){return uo()._updateTags.has(e)},$insertNodes:function(e){let t=Yr()||Jr();null===t&&(t=qe().selectEnd()),t.insertNodes(e)},$isBlockElementNode:function(e){return wo(e)&&!e.isInline()},$isDecoratorNode:vo,$isElementNode:wo,$isInlineElementOrDecoratorNode:function(e){return wo(e)&&e.isInline()||vo(e)&&e.isInline()},$isLeafNode:function(e){return Tr(e)||rr(e)||vo(e)},$isLineBreakNode:rr,$isNodeSelection:Ir,$isParagraphNode:Fo,$isRangeSelection:Rr,$isRootNode:Ao,$isRootOrShadowRoot:Mt,$isTabNode:wr,$isTextNode:Tr,$isTokenOrSegmented:$e,$nodesOfType:function(e){const t=e.getType(),n=co();if(n._readOnly){const e=Ut(n).get(t);return e?Array.from(e.values()):[]}const r=n._nodeMap,o=[];for(const[,n]of r)n instanceof e&&n.__type===t&&n.isAttached()&&o.push(n);return o},$normalizeSelection__EXPERIMENTAL:ve,$parseSerializedNode:function(e){return po(e,uo()._nodes)},$selectAll:function(){const e=qe();Ze(ve(e.select(0,e.getChildrenSize())))},$setCompositionKey:Ue,$setSelection:Ze,$splitNode:function(e,t){let n=e.getChildAtIndex(t);if(null==n&&(n=e),Mt(e))throw Error("Can not call $splitNode() on root element");const r=e=>{const t=e.getParentOrThrow(),o=Mt(t),i=e!==n||o?At(e):e;if(o){if(!wo(e)||!wo(i))throw Error("Children of a root must be ElementNode");return e.insertAfter(i),[e,i,i]}{const[n,o,s]=r(t),l=e.getNextSiblings();return s.append(i,...l),[n,o,i]}},[o,i]=r(n);return[o,i]},ArtificialNode__DO_NOT_USE:Io,BLUR_COMMAND:Y,CAN_REDO_COMMAND:z,CAN_UNDO_COMMAND:H,CLEAR_EDITOR_COMMAND:B,CLEAR_HISTORY_COMMAND:W,CLICK_COMMAND:o,COMMAND_PRIORITY_CRITICAL:4,COMMAND_PRIORITY_EDITOR:0,COMMAND_PRIORITY_HIGH:3,COMMAND_PRIORITY_LOW:1,COMMAND_PRIORITY_NORMAL:2,CONTROLLED_TEXT_INSERTION_COMMAND:a,COPY_COMMAND:$,CUT_COMMAND:F,DELETE_CHARACTER_COMMAND:i,DELETE_LINE_COMMAND:f,DELETE_WORD_COMMAND:u,DRAGEND_COMMAND:P,DRAGOVER_COMMAND:L,DRAGSTART_COMMAND:I,DROP_COMMAND:R,DecoratorNode:Oo,ElementNode:xo,FOCUS_COMMAND:U,FORMAT_ELEMENT_COMMAND:k,FORMAT_TEXT_COMMAND:h,INDENT_CONTENT_COMMAND:A,INSERT_LINE_BREAK_COMMAND:s,INSERT_PARAGRAPH_COMMAND:l,INSERT_TAB_COMMAND:M,IS_ALL_FORMATTING:255,IS_BOLD:1,IS_CODE:16,IS_HIGHLIGHT:128,IS_ITALIC:2,IS_STRIKETHROUGH:4,IS_SUBSCRIPT:32,IS_SUPERSCRIPT:64,IS_UNDERLINE:8,KEY_ARROW_DOWN_COMMAND:E,KEY_ARROW_LEFT_COMMAND:y,KEY_ARROW_RIGHT_COMMAND:m,KEY_ARROW_UP_COMMAND:T,KEY_BACKSPACE_COMMAND:w,KEY_DELETE_COMMAND:O,KEY_DOWN_COMMAND:p,KEY_ENTER_COMMAND:S,KEY_ESCAPE_COMMAND:b,KEY_MODIFIER_COMMAND:J,KEY_SPACE_COMMAND:x,KEY_TAB_COMMAND:v,LineBreakNode:er,MOVE_TO_END:N,MOVE_TO_START:C,OUTDENT_CONTENT_COMMAND:D,PASTE_COMMAND:c,ParagraphNode:Lo,REDO_COMMAND:_,REMOVE_TEXT_COMMAND:d,RootNode:Mo,SELECTION_CHANGE_COMMAND:n,SELECTION_INSERT_CLIPBOARD_NODES_COMMAND:r,SELECT_ALL_COMMAND:K,TEXT_TYPE_TO_FORMAT:ce,TabNode:Sr,TextNode:ur,UNDO_COMMAND:g,createCommand:t,createEditor:function(e){const t=e||{},n=ho(),r=t.theme||{},o=void 0===e?n:t.parentEditor||null,i=t.disableEvents||!1,s=Do(),l=t.namespace||(null!==o?o._config.namespace:ot()),a=t.editorState,c=[Mo,ur,er,Sr,Lo,Io,...t.nodes||[]],{onError:d,html:u}=t,f=void 0===t.editable||t.editable;let h;if(void 0===e&&null!==n)h=n._nodes;else{h=new Map;for(let e=0;e<c.length;e++){let t=c[e],n=null,r=null;if("function"!=typeof t){const e=t;t=e.replace,n=e.with,r=e.withKlass||null}{const e=Object.prototype.hasOwnProperty.call(t,"getType")&&t.getType(),n=t.name;if(r&&!(r.prototype instanceof t))throw Error(`${r.name} doesn't extend the ${n}`);if("RootNode"!==n&&"root"!==e&&"artificial"!==e){const e=t.prototype;["getType","clone"].forEach(e=>{t.hasOwnProperty(e)||console.warn(`${n} must implement static "${e}" method`)}),!t.hasOwnProperty("importDOM")&&t.hasOwnProperty("exportDOM")&&console.warn(n+' should implement "importDOM" if using a custom "exportDOM" method to ensure HTML serialization (important for copy & paste) works as expected'),e instanceof Oo&&(e.hasOwnProperty("decorate")||console.warn(e.constructor.name+' must implement "decorate" method')),t.hasOwnProperty("importJSON")||console.warn(n+' should implement "importJSON" method to ensure JSON and default HTML serialization works as expected'),e.hasOwnProperty("exportJSON")||console.warn(n+' should implement "exportJSON" method to ensure JSON and default HTML serialization works as expected')}}const o=t.getType(),i=t.transform(),s=new Set;null!==i&&s.add(i),h.set(o,{exportDOM:u&&u.export?u.export.get(t):void 0,klass:t,replace:n,replaceWithKlass:r,transforms:s})}}const g=new Bo(s,o,h,{disableEvents:i,namespace:l,theme:r},d||console.error,function(e,t){const n=new Map,r=new Set,o=e=>{Object.keys(e).forEach(t=>{let r=n.get(t);void 0===r&&(r=[],n.set(t,r)),r.push(e[t])})};return e.forEach(e=>{const t=e.klass.importDOM;if(null==t||r.has(t))return;r.add(t);const n=t.call(e.klass);null!==n&&o(n)}),t&&o(t),n}(h,u?u.import:void 0),f);return void 0!==a&&(g._pendingEditorState=a,g._dirtyType=2),g},getEditorPropertyFromDOMNode:Pe,getNearestEditorFromDOMNode:Le,isBlockDomNode:Kt,isCurrentlyReadOnlyMode:so,isHTMLAnchorElement:function(e){return $t(e)&&"A"===e.tagName},isHTMLElement:$t,isInlineDomNode:Ft,isLexicalEditor:Ie,isSelectionCapturedInDecoratorInput:Re,isSelectionWithinEditor:ke,resetRandomKey:function(){Ae=1}});const zo="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ho=zo&&"documentMode"in document?document.documentMode:null,Uo=(zo&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),zo&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),!(!zo||!("InputEvent"in window)||Ho)&&new window.InputEvent("input"),zo&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),zo&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,zo&&/Android/.test(navigator.userAgent),zo&&/^(?=.*Chrome).*/i.test(navigator.userAgent));zo&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}((function(e){const t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));Object.freeze({});const Yo=Wo,Jo=Yo.$addUpdateTag,jo=Yo.$applyNodeReplacement,Go=Yo.$cloneWithProperties,Xo=Yo.$copyNode,Vo=Yo.$createLineBreakNode,qo=Yo.$createNodeSelection,Qo=Yo.$createParagraphNode,Zo=Yo.$createPoint,ei=Yo.$createRangeSelection,ti=Yo.$createRangeSelectionFromDom,ni=Yo.$createTabNode,ri=Yo.$createTextNode,oi=Yo.$getAdjacentNode,ii=Yo.$getCharacterOffsets,si=Yo.$getEditor,li=Yo.$getNearestNodeFromDOMNode,ai=Yo.$getNearestRootOrShadowRoot,ci=Yo.$getNodeByKey,di=Yo.$getNodeByKeyOrThrow,ui=Yo.$getPreviousSelection,fi=Yo.$getRoot,hi=Yo.$getSelection,gi=Yo.$getTextContent,_i=Yo.$hasAncestor,pi=Yo.$hasUpdateTag,mi=Yo.$insertNodes,Ni=Yo.$isBlockElementNode,yi=Yo.$isDecoratorNode,Ci=Yo.$isElementNode,Ti=Yo.$isInlineElementOrDecoratorNode,Ei=Yo.$isLeafNode,Si=Yo.$isLineBreakNode,xi=Yo.$isNodeSelection,wi=Yo.$isParagraphNode,bi=Yo.$isRangeSelection,Oi=Yo.$isRootNode,vi=Yo.$isRootOrShadowRoot,Mi=Yo.$isTabNode,Ai=Yo.$isTextNode,Di=Yo.$isTokenOrSegmented,Ri=Yo.$nodesOfType,ki=Yo.$normalizeSelection__EXPERIMENTAL,Ii=Yo.$parseSerializedNode,Li=Yo.$selectAll,Pi=Yo.$setCompositionKey,$i=Yo.$setSelection,Fi=Yo.$splitNode,Ki=Yo.ArtificialNode__DO_NOT_USE,Bi=Yo.BLUR_COMMAND,Wi=Yo.CAN_REDO_COMMAND,zi=Yo.CAN_UNDO_COMMAND,Hi=Yo.CLEAR_EDITOR_COMMAND,Ui=Yo.CLEAR_HISTORY_COMMAND,Yi=Yo.CLICK_COMMAND,Ji=Yo.COMMAND_PRIORITY_CRITICAL,ji=Yo.COMMAND_PRIORITY_EDITOR,Gi=Yo.COMMAND_PRIORITY_HIGH,Xi=Yo.COMMAND_PRIORITY_LOW,Vi=Yo.COMMAND_PRIORITY_NORMAL,qi=Yo.CONTROLLED_TEXT_INSERTION_COMMAND,Qi=Yo.COPY_COMMAND,Zi=Yo.CUT_COMMAND,es=Yo.DELETE_CHARACTER_COMMAND,ts=Yo.DELETE_LINE_COMMAND,ns=Yo.DELETE_WORD_COMMAND,rs=Yo.DRAGEND_COMMAND,os=Yo.DRAGOVER_COMMAND,is=Yo.DRAGSTART_COMMAND,ss=Yo.DROP_COMMAND,ls=Yo.DecoratorNode,as=Yo.ElementNode,cs=Yo.FOCUS_COMMAND,ds=Yo.FORMAT_ELEMENT_COMMAND,us=Yo.FORMAT_TEXT_COMMAND,fs=Yo.INDENT_CONTENT_COMMAND,hs=Yo.INSERT_LINE_BREAK_COMMAND,gs=Yo.INSERT_PARAGRAPH_COMMAND,_s=Yo.INSERT_TAB_COMMAND,ps=Yo.IS_ALL_FORMATTING,ms=Yo.IS_BOLD,Ns=Yo.IS_CODE,ys=Yo.IS_HIGHLIGHT,Cs=Yo.IS_ITALIC,Ts=Yo.IS_STRIKETHROUGH,Es=Yo.IS_SUBSCRIPT,Ss=Yo.IS_SUPERSCRIPT,xs=Yo.IS_UNDERLINE,ws=Yo.KEY_ARROW_DOWN_COMMAND,bs=Yo.KEY_ARROW_LEFT_COMMAND,Os=Yo.KEY_ARROW_RIGHT_COMMAND,vs=Yo.KEY_ARROW_UP_COMMAND,Ms=Yo.KEY_BACKSPACE_COMMAND,As=Yo.KEY_DELETE_COMMAND,Ds=Yo.KEY_DOWN_COMMAND,Rs=Yo.KEY_ENTER_COMMAND,ks=Yo.KEY_ESCAPE_COMMAND,Is=Yo.KEY_MODIFIER_COMMAND,Ls=Yo.KEY_SPACE_COMMAND,Ps=Yo.KEY_TAB_COMMAND,$s=Yo.LineBreakNode,Fs=Yo.MOVE_TO_END,Ks=Yo.MOVE_TO_START,Bs=Yo.OUTDENT_CONTENT_COMMAND,Ws=Yo.PASTE_COMMAND,zs=Yo.ParagraphNode,Hs=Yo.REDO_COMMAND,Us=Yo.REMOVE_TEXT_COMMAND,Ys=Yo.RootNode,Js=Yo.SELECTION_CHANGE_COMMAND,js=Yo.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,Gs=Yo.SELECT_ALL_COMMAND,Xs=Yo.TEXT_TYPE_TO_FORMAT,Vs=Yo.TabNode,qs=Yo.TextNode,Qs=Yo.UNDO_COMMAND,Zs=Yo.createCommand,el=Yo.createEditor,tl=Yo.getEditorPropertyFromDOMNode,nl=Yo.getNearestEditorFromDOMNode,rl=Yo.isBlockDomNode,ol=Yo.isCurrentlyReadOnlyMode,il=Yo.isHTMLAnchorElement,sl=Yo.isHTMLElement,ll=Yo.isInlineDomNode,al=Yo.isLexicalEditor,cl=Yo.isSelectionCapturedInDecoratorInput,dl=Yo.isSelectionWithinEditor,ul=Yo.resetRandomKey;var fl=Object.freeze({$addUpdateTag:Jo,$applyNodeReplacement:jo,$cloneWithProperties:Go,$copyNode:Xo,$createLineBreakNode:Vo,$createNodeSelection:qo,$createParagraphNode:Qo,$createPoint:Zo,$createRangeSelection:ei,$createRangeSelectionFromDom:ti,$createTabNode:ni,$createTextNode:ri,$getAdjacentNode:oi,$getCharacterOffsets:ii,$getEditor:si,$getNearestNodeFromDOMNode:li,$getNearestRootOrShadowRoot:ai,$getNodeByKey:ci,$getNodeByKeyOrThrow:di,$getPreviousSelection:ui,$getRoot:fi,$getSelection:hi,$getTextContent:gi,$hasAncestor:_i,$hasUpdateTag:pi,$insertNodes:mi,$isBlockElementNode:Ni,$isDecoratorNode:yi,$isElementNode:Ci,$isInlineElementOrDecoratorNode:Ti,$isLeafNode:Ei,$isLineBreakNode:Si,$isNodeSelection:xi,$isParagraphNode:wi,$isRangeSelection:bi,$isRootNode:Oi,$isRootOrShadowRoot:vi,$isTabNode:Mi,$isTextNode:Ai,$isTokenOrSegmented:Di,$nodesOfType:Ri,$normalizeSelection__EXPERIMENTAL:ki,$parseSerializedNode:Ii,$selectAll:Li,$setCompositionKey:Pi,$setSelection:$i,$splitNode:Fi,ArtificialNode__DO_NOT_USE:Ki,BLUR_COMMAND:Bi,CAN_REDO_COMMAND:Wi,CAN_UNDO_COMMAND:zi,CLEAR_EDITOR_COMMAND:Hi,CLEAR_HISTORY_COMMAND:Ui,CLICK_COMMAND:Yi,COMMAND_PRIORITY_CRITICAL:Ji,COMMAND_PRIORITY_EDITOR:ji,COMMAND_PRIORITY_HIGH:Gi,COMMAND_PRIORITY_LOW:Xi,COMMAND_PRIORITY_NORMAL:Vi,CONTROLLED_TEXT_INSERTION_COMMAND:qi,COPY_COMMAND:Qi,CUT_COMMAND:Zi,DELETE_CHARACTER_COMMAND:es,DELETE_LINE_COMMAND:ts,DELETE_WORD_COMMAND:ns,DRAGEND_COMMAND:rs,DRAGOVER_COMMAND:os,DRAGSTART_COMMAND:is,DROP_COMMAND:ss,DecoratorNode:ls,ElementNode:as,FOCUS_COMMAND:cs,FORMAT_ELEMENT_COMMAND:ds,FORMAT_TEXT_COMMAND:us,INDENT_CONTENT_COMMAND:fs,INSERT_LINE_BREAK_COMMAND:hs,INSERT_PARAGRAPH_COMMAND:gs,INSERT_TAB_COMMAND:_s,IS_ALL_FORMATTING:ps,IS_BOLD:ms,IS_CODE:Ns,IS_HIGHLIGHT:ys,IS_ITALIC:Cs,IS_STRIKETHROUGH:Ts,IS_SUBSCRIPT:Es,IS_SUPERSCRIPT:Ss,IS_UNDERLINE:xs,KEY_ARROW_DOWN_COMMAND:ws,KEY_ARROW_LEFT_COMMAND:bs,KEY_ARROW_RIGHT_COMMAND:Os,KEY_ARROW_UP_COMMAND:vs,KEY_BACKSPACE_COMMAND:Ms,KEY_DELETE_COMMAND:As,KEY_DOWN_COMMAND:Ds,KEY_ENTER_COMMAND:Rs,KEY_ESCAPE_COMMAND:ks,KEY_MODIFIER_COMMAND:Is,KEY_SPACE_COMMAND:Ls,KEY_TAB_COMMAND:Ps,LineBreakNode:$s,MOVE_TO_END:Fs,MOVE_TO_START:Ks,OUTDENT_CONTENT_COMMAND:Bs,PASTE_COMMAND:Ws,ParagraphNode:zs,REDO_COMMAND:Hs,REMOVE_TEXT_COMMAND:Us,RootNode:Ys,SELECTION_CHANGE_COMMAND:Js,SELECTION_INSERT_CLIPBOARD_NODES_COMMAND:js,SELECT_ALL_COMMAND:Gs,TEXT_TYPE_TO_FORMAT:Xs,TabNode:Vs,TextNode:qs,UNDO_COMMAND:Qs,createCommand:Zs,createEditor:el,getEditorPropertyFromDOMNode:tl,getNearestEditorFromDOMNode:nl,isBlockDomNode:rl,isCurrentlyReadOnlyMode:ol,isHTMLAnchorElement:il,isHTMLElement:sl,isInlineDomNode:ll,isLexicalEditor:al,isSelectionCapturedInDecoratorInput:cl,isSelectionWithinEditor:dl,resetRandomKey:ul});const hl=new Map;function gl(e){let t=e;for(;null!=t;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild}return null}function _l(e){const t=e.parentNode;if(null==t)throw new Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}function pl(e){const t={},n=e.split(";");for(const e of n)if(""!==e){const[n,r]=e.split(/:([^]+)/);n&&r&&(t[n.trim()]=r.trim())}return t}function ml(e){let t=hl.get(e);return void 0===t&&(t=pl(e),hl.set(e,t)),Object.freeze(t),t}function Nl(e,t,n){let r=t.getNode(),o=n;if(Ci(r)){const e=r.getDescendantByIndex(t.offset);null!==e&&(r=e)}for(;o>0&&null!==r;){if(Ci(r)){const e=r.getLastDescendant();null!==e&&(r=e)}let n=r.getPreviousSibling(),i=0;if(null===n){let e=r.getParentOrThrow(),t=e.getPreviousSibling();for(;null===t;){if(e=e.getParent(),null===e){n=null;break}t=e.getPreviousSibling()}null!==e&&(i=e.isInline()?0:2,n=t)}let s=r.getTextContent();""===s&&Ci(r)&&!r.isInline()&&(s="\n\n");const l=s.length;if(!Ai(r)||o>=l){const e=r.getParent();r.remove(),null==e||0!==e.getChildrenSize()||Oi(e)||e.remove(),o-=l+i,r=n}else{const n=r.getKey(),i=e.getEditorState().read(()=>{const e=ci(n);return Ai(e)&&e.isSimpleText()?e.getTextContent():null}),a=l-o,c=s.slice(0,a);if(null!==i&&i!==s){const e=ui();let t=r;if(r.isSimpleText())r.setTextContent(i);else{const e=ri(i);r.replace(e),t=e}if(bi(e)&&e.isCollapsed()){const n=e.anchor.offset;t.select(n,n)}}else if(r.isSimpleText()){const e=t.key===n;let i=t.offset;i<o&&(i=l);const s=e?i-o:0,c=e?i:a;if(e&&0===s){const[e]=r.splitText(s,c);e.remove()}else{const[,e]=r.splitText(s,c);e.remove()}}else{const e=ri(c);r.replace(e)}o=0}}}function yl(e,t){const n=ml("getStyle"in e?e.getStyle():e.style),r=Object.entries(t).reduce((t,[r,o])=>("function"==typeof o?t[r]=o(n[r],e):null===o?delete t[r]:t[r]=o,t),{...n}||{}),o=function(e){let t="";for(const n in e)n&&(t+=`${n}: ${e[n]};`);return t}(r);e.setStyle(o),hl.set(o,r)}function Cl(e){return e.getNode().isAttached()}function Tl(e){let t=e;for(;null!==t&&!vi(t);){const e=t.getLatest(),n=t.getParent();0===e.getChildrenSize()&&t.remove(!0),t=n}}function El(e,t,n,r,o=null){if(0===t.length)return;const i=t[0],s=new Map,l=[];let a=Ci(i)?i:i.getParentOrThrow();a.isInline()&&(a=a.getParentOrThrow());let c=!1;for(;null!==a;){const e=a.getPreviousSibling();if(null!==e){a=e,c=!0;break}if(a=a.getParentOrThrow(),vi(a))break}const d=new Set;for(let e=0;e<n;e++){const n=t[e];Ci(n)&&0===n.getChildrenSize()&&d.add(n.getKey())}const u=new Set;for(let e=0;e<n;e++){const n=t[e];let o=n.getParent();if(null!==o&&o.isInline()&&(o=o.getParent()),null!==o&&Ei(n)&&!u.has(n.getKey())){const e=o.getKey();if(void 0===s.get(e)){const t=r();t.setFormat(o.getFormatType()),t.setIndent(o.getIndent()),l.push(t),s.set(e,t),o.getChildren().forEach(e=>{t.append(e),u.add(e.getKey()),Ci(e)&&e.getChildrenKeys().forEach(e=>u.add(e))}),Tl(o)}}else if(d.has(n.getKey())){if(!Ci(n))throw Error("Expected node in emptyElements to be an ElementNode");const e=r();e.setFormat(n.getFormatType()),e.setIndent(n.getIndent()),l.push(e),n.remove(!0)}}if(null!==o)for(let e=0;e<l.length;e++){const t=l[e];o.append(t)}let f=null;if(vi(a))if(c)if(null!==o)a.insertAfter(o);else for(let e=l.length-1;e>=0;e--){const t=l[e];a.insertAfter(t)}else{const e=a.getFirstChild();if(Ci(e)&&(a=e),null===e)if(o)a.append(o);else for(let e=0;e<l.length;e++){const t=l[e];a.append(t),f=t}else if(null!==o)e.insertBefore(o);else for(let t=0;t<l.length;t++){const n=l[t];e.insertBefore(n),f=n}}else if(o)a.insertAfter(o);else for(let e=l.length-1;e>=0;e--){const t=l[e];a.insertAfter(t),f=t}const h=ui();bi(h)&&Cl(h.anchor)&&Cl(h.focus)?$i(h.clone()):null!==f?f.selectEnd():e.dirty=!0}function Sl(e,t,n,r){e.modify(t?"extend":"move",n,r)}function xl(e){const t=e.anchor.getNode();return"rtl"===(Oi(t)?t:t.getParentOrThrow()).getDirection()}function wl(e,t,n){const r=ml(e.getStyle());return null!==r&&r[t]||n}function bl(e){if(yi(e))return!1;if(!Ci(e)||vi(e))return!1;const t=e.getFirstChild(),n=null===t||Si(t)||Ai(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}const Ol=Nl;var vl=Object.freeze({$addNodeStyle:function(e){const t=e.getStyle(),n=pl(t);hl.set(t,n)},$getSelectionStyleValueForProperty:function(e,t,n=""){let r=null;const o=e.getNodes(),i=e.anchor,s=e.focus,l=e.isBackward(),a=l?s.offset:i.offset,c=l?s.getNode():i.getNode();if(bi(e)&&e.isCollapsed()&&""!==e.style){const n=ml(e.style);if(null!==n&&t in n)return n[t]}for(let e=0;e<o.length;e++){const i=o[e];if((0===e||0!==a||!i.is(c))&&Ai(i)){const e=wl(i,t,n);if(null===r)r=e;else if(r!==e){r="";break}}}return null===r?n:r},$isAtNodeEnd:function(e){if("text"===e.type)return e.offset===e.getNode().getTextContentSize();const t=e.getNode();if(!Ci(t))throw Error("isAtNodeEnd: node must be a TextNode or ElementNode");return e.offset===t.getChildrenSize()},$isParentElementRTL:xl,$moveCaretSelection:Sl,$moveCharacter:function(e,t,n){const r=xl(e);Sl(e,t,n?!r:r,"character")},$patchStyleText:function(e,t){const n=e.getNodes(),r=n.length,o=e.getStartEndPoints();if(null===o)return;const[i,s]=o,l=r-1;let a=n[0],c=n[l];if(e.isCollapsed()&&bi(e))return void yl(e,t);const d=a.getTextContent().length,u=s.offset;let f=i.offset;const h=i.isBefore(s);let g=h?f:u,_=h?u:f;const p=h?i.type:s.type,m=h?s.type:i.type,N=h?s.key:i.key;if(Ai(a)&&g===d){const e=a.getNextSibling();Ai(e)&&(f=0,g=0,a=e)}if(1===n.length){if(Ai(a)&&a.canHaveFormat()){if(g="element"===p?0:f>u?u:f,_="element"===m?d:f>u?f:u,g===_)return;if(Di(a)||0===g&&_===d)yl(a,t),a.select(g,_);else{const e=a.splitText(g,_),n=0===g?e[0]:e[1];yl(n,t),n.select(0,_-g)}}}else{if(Ai(a)&&g<a.getTextContentSize()&&a.canHaveFormat()&&(0===g||Di(a)||(a=a.splitText(g)[1],g=0,h?i.set(a.getKey(),g,"text"):s.set(a.getKey(),g,"text")),yl(a,t)),Ai(c)&&c.canHaveFormat()){const e=c.getTextContent().length;c.__key!==N&&0!==_&&(_=e),_===e||Di(c)||([c]=c.splitText(_)),0===_&&"element"!==m||yl(c,t)}for(let e=1;e<l;e++){const r=n[e],o=r.getKey();Ai(r)&&r.canHaveFormat()&&o!==a.getKey()&&o!==c.getKey()&&!r.isToken()&&yl(r,t)}}},$selectAll:function(e){const t=e.anchor,n=e.focus,r=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();let o=r.getFirstDescendant(),i=r.getLastDescendant(),s="element",l="element",a=0;Ai(o)?s="text":Ci(o)||null===o||(o=o.getParentOrThrow()),Ai(i)?(l="text",a=i.getTextContentSize()):Ci(i)||null===i||(i=i.getParentOrThrow()),o&&i&&(t.set(o.getKey(),0,s),n.set(i.getKey(),a,l))},$setBlocksType:function(e,t){if(null===e)return;const n=e.getStartEndPoints(),r=n?n[0]:null;if(null!==r&&"root"===r.key){const e=t(),n=fi(),r=n.getFirstChild();return void(r?r.replace(e,!0):n.append(e))}const o=e.getNodes(),i=null!==r&&function(e,t){let n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}(r.getNode(),bl);i&&-1===o.indexOf(i)&&o.push(i);for(let e=0;e<o.length;e++){const n=o[e];if(!bl(n))continue;if(!Ci(n))throw Error("Expected block node to be an ElementNode");const r=t();r.setFormat(n.getFormatType()),r.setIndent(n.getIndent()),n.replace(r,!0)}},$shouldOverrideDefaultCharacterSelection:function(e,t){const n=oi(e.focus,t);return yi(n)&&!n.isIsolated()||Ci(n)&&!n.isInline()&&!n.canBeEmpty()},$sliceSelectedTextNodeContent:function(e,t){const n=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&null!==n){const[r,o]=n,i=e.isBackward(),s=r.getNode(),l=o.getNode(),a=t.is(s),c=t.is(l);if(a||c){const[n,r]=ii(e),o=s.is(l),a=t.is(i?l:s),c=t.is(i?s:l);let d=0,u=void 0;if(o)d=n>r?r:n,u=n>r?n:r;else if(a){d=i?r:n,u=void 0}else if(c){d=0,u=i?n:r}return t.__text=t.__text.slice(d,u),t}}return t},$trimTextContentFromAnchor:Nl,$wrapNodes:function(e,t,n=null){const r=e.getStartEndPoints(),o=r?r[0]:null,i=e.getNodes(),s=i.length;if(null!==o&&(0===s||1===s&&"element"===o.type&&0===o.getNode().getChildrenSize())){const e="text"===o.type?o.getNode().getParentOrThrow():o.getNode(),r=e.getChildren();let i=t();return i.setFormat(e.getFormatType()),i.setIndent(e.getIndent()),r.forEach(e=>i.append(e)),n&&(i=n.append(i)),void e.replace(i)}let l=null,a=[];for(let r=0;r<s;r++){const o=i[r];vi(o)?(El(e,a,a.length,t,n),a=[],l=o):null===l||null!==l&&_i(o,l)?a.push(o):(El(e,a,a.length,t,n),a=[o])}El(e,a,a.length,t,n)},createDOMRange:function(e,t,n,r,o){const i=t.getKey(),s=r.getKey(),l=document.createRange();let a=e.getElementByKey(i),c=e.getElementByKey(s),d=n,u=o;if(Ai(t)&&(a=gl(a)),Ai(r)&&(c=gl(c)),void 0===t||void 0===r||null===a||null===c)return null;"BR"===a.nodeName&&([a,d]=_l(a)),"BR"===c.nodeName&&([c,u]=_l(c));const f=a.firstChild;a===c&&null!=f&&"BR"===f.nodeName&&0===d&&0===u&&(u=1);try{l.setStart(a,d),l.setEnd(c,u)}catch(e){return null}return!l.collapsed||d===u&&i===s||(l.setStart(c,u),l.setEnd(a,d)),l},createRectsFromDOMRange:function(e,t){const n=e.getRootElement();if(null===n)return[];const r=n.getBoundingClientRect(),o=getComputedStyle(n),i=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),s=Array.from(t.getClientRects());let l,a=s.length;s.sort((e,t)=>{const n=e.top-t.top;return Math.abs(n)<=3?e.left-t.left:n});for(let e=0;e<a;e++){const t=s[e],n=l&&l.top<=t.top&&l.top+l.height>t.top&&l.left+l.width>t.left,o=t.width+i===r.width;n||o?(s.splice(e--,1),a--):l=t}return s},getStyleObjectFromCSS:ml,trimTextContentFromAnchor:Ol,$cloneWithProperties:Go});!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}((function(e){const t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const Ml=vl,Al=Ml.$addNodeStyle,Dl=Ml.$cloneWithProperties,Rl=Ml.$getSelectionStyleValueForProperty,kl=Ml.$isAtNodeEnd,Il=Ml.$isParentElementRTL,Ll=Ml.$moveCaretSelection,Pl=Ml.$moveCharacter,$l=Ml.$patchStyleText,Fl=Ml.$selectAll,Kl=Ml.$setBlocksType,Bl=Ml.$shouldOverrideDefaultCharacterSelection,Wl=Ml.$sliceSelectedTextNodeContent,zl=Ml.$trimTextContentFromAnchor,Hl=Ml.$wrapNodes,Ul=Ml.createDOMRange,Yl=Ml.createRectsFromDOMRange,Jl=Ml.getStyleObjectFromCSS,jl=Ml.trimTextContentFromAnchor;var Gl=Object.freeze({$addNodeStyle:Al,$cloneWithProperties:Dl,$getSelectionStyleValueForProperty:Rl,$isAtNodeEnd:kl,$isParentElementRTL:Il,$moveCaretSelection:Ll,$moveCharacter:Pl,$patchStyleText:$l,$selectAll:Fl,$setBlocksType:Kl,$shouldOverrideDefaultCharacterSelection:Bl,$sliceSelectedTextNodeContent:Wl,$trimTextContentFromAnchor:zl,$wrapNodes:Hl,createDOMRange:Ul,createRectsFromDOMRange:Yl,getStyleObjectFromCSS:Jl,trimTextContentFromAnchor:jl});const Xl="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Vl=Xl&&"documentMode"in document?document.documentMode:null,ql=Xl&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Ql=Xl&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Zl=!(!Xl||!("InputEvent"in window)||Vl)&&"getTargetRanges"in new window.InputEvent("input"),ea=Xl&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),ta=Xl&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,na=Xl&&/Android/.test(navigator.userAgent),ra=Xl&&/^(?=.*Chrome).*/i.test(navigator.userAgent),oa=Xl&&na&&ra,ia=Xl&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!ra;function sa(...e){const t=[];for(const n of e)if(n&&"string"==typeof n)for(const[e]of n.matchAll(/\S+/g))t.push(e);return t}function la(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function aa(e){return e+"px"}const ca={attributes:!0,characterData:!0,childList:!0,subtree:!0};function da(e,t,n){let r=null,o=null,i=null,s=[];const l=document.createElement("div");function a(){if(null===r)throw Error("Unexpected null rootDOMNode");if(null===o)throw Error("Unexpected null parentDOMNode");const{left:i,top:a}=r.getBoundingClientRect(),c=o,d=Yl(e,t);l.isConnected||c.append(l);let u=!1;for(let e=0;e<d.length;e++){const t=d[e],n=s[e]||document.createElement("div"),r=n.style;"absolute"!==r.position&&(r.position="absolute",u=!0);const o=aa(t.left-i);r.left!==o&&(r.left=o,u=!0);const c=aa(t.top-a);r.top!==c&&(n.style.top=c,u=!0);const f=aa(t.width);r.width!==f&&(n.style.width=f,u=!0);const h=aa(t.height);r.height!==h&&(n.style.height=h,u=!0),n.parentNode!==l&&(l.append(n),u=!0),s[e]=n}for(;s.length>d.length;)s.pop();u&&n(s)}function c(){o=null,r=null,null!==i&&i.disconnect(),i=null,l.remove();for(const e of s)e.remove();s=[]}const d=e.registerRootListener((function t(){const n=e.getRootElement();if(null===n)return c();const s=n.parentElement;if(!(s instanceof HTMLElement))return c();c(),r=n,o=s,i=new MutationObserver(n=>{const i=e.getRootElement(),s=i&&i.parentElement;if(i!==r||s!==o)return t();for(const e of n)if(!l.contains(e.target))return a()}),i.observe(s,ca),a()}));return()=>{d(),c()}}const ua=Zl,fa=Xl,ha=na,ga=oa,_a=ql,pa=ia,ma=ra,Na=Ql,ya=ta,Ca=ea;function Ta(e,t){for(const n of t)if(e.type.startsWith(n))return!0;return!1}const Ea=(e,t)=>{let n=e;for(;n!==fi()&&null!=n;){if(t(n))return n;n=n.getParent()}return null};var Sa=Object.freeze({$dfs:function(e,t){const n=[],r=(e||fi()).getLatest(),o=t||Ci(r)&&r.getLastDescendant()||r;let i=r,s=function(e){let t=e,n=0;for(;null!==(t=t.getParent());)n++;return n}(i);for(;null!==i&&!i.is(o);)if(n.push({depth:s,node:i}),Ci(i)&&i.getChildrenSize()>0)i=i.getFirstChild(),s++;else{let e=null;for(;null===e&&null!==i;)e=i.getNextSibling(),null===e?(i=i.getParent(),s--):i=e}return null!==i&&i.is(o)&&n.push({depth:s,node:i}),n},$filter:function(e,t){const n=[];for(let r=0;r<e.length;r++){const o=t(e[r]);null!==o&&n.push(o)}return n},$findMatchingParent:Ea,$getNearestBlockElementAncestorOrThrow:function(e){const t=Ea(e,e=>Ci(e)&&!e.isInline());if(!Ci(t))throw Error(`Expected node ${e.__key} to have closest block element node.`);return t},$getNearestNodeOfType:function(e,t){let n=e;for(;null!=n;){if(n instanceof t)return n;n=n.getParent()}return null},$getNextRightPreorderNode:function(e){let t=e;if(Ci(t)&&t.getChildrenSize()>0)t=t.getLastChild();else{let e=null;for(;null===e&&null!==t;)e=t.getPreviousSibling(),t=null===e?t.getParent():e}return t},$insertFirst:function(e,t){const n=e.getFirstChild();null!==n?n.insertBefore(t):e.append(t)},$insertNodeToNearestRoot:function(e){const t=hi()||ui();if(bi(t)){const{focus:n}=t,r=n.getNode(),o=n.offset;if(vi(r)){const t=r.getChildAtIndex(o);null==t?r.append(e):t.insertBefore(e),e.selectNext()}else{let t,n;Ai(r)?(t=r.getParentOrThrow(),n=r.getIndexWithinParent(),o>0&&(n+=1,r.splitText(o))):(t=r,n=o);const[,i]=Fi(t,n);i.insertBefore(e),i.selectStart()}}else{if(null!=t){const n=t.getNodes();n[n.length-1].getTopLevelElementOrThrow().insertAfter(e)}else{fi().append(e)}const n=Qo();e.insertAfter(n),n.select()}return e.getLatest()},$isEditorIsNestedEditor:function(e){return null!==e._parentEditor},$restoreEditorState:function(e,t){const n=new Map,r=e._pendingEditorState;for(const[e,r]of t._nodeMap)n.set(e,Go(r));r&&(r._nodeMap=n),e._dirtyType=2;const o=t._selection;$i(null===o?null:o.clone())},$wrapNodeInElement:function(e,t){const n=t();return e.replace(n),n.append(e),n},CAN_USE_BEFORE_INPUT:ua,CAN_USE_DOM:fa,IS_ANDROID:ha,IS_ANDROID_CHROME:ga,IS_APPLE:_a,IS_APPLE_WEBKIT:pa,IS_CHROME:ma,IS_FIREFOX:Na,IS_IOS:ya,IS_SAFARI:Ca,addClassNamesToElement:function(e,...t){const n=sa(...t);n.length>0&&e.classList.add(...n)},calculateZoomLevel:function(e){if(Na)return 1;let t=1;for(;e;)t*=Number(window.getComputedStyle(e).getPropertyValue("zoom")),e=e.parentElement;return t},isMimeType:Ta,markSelection:function(e,t){let n=null,r=null,o=null,i=null,s=()=>{};function l(l){l.read(()=>{const l=hi();if(!bi(l))return n=null,r=null,o=null,i=null,s(),void(s=()=>{});const{anchor:a,focus:c}=l,d=a.getNode(),u=d.getKey(),f=a.offset,h=c.getNode(),g=h.getKey(),_=c.offset,p=e.getElementByKey(u),m=e.getElementByKey(g),N=null===n||null===p||f!==r||u!==n.getKey()||d!==n&&(!(n instanceof qs)||d.updateDOM(n,p,e._config)),y=null===o||null===m||_!==i||g!==o.getKey()||h!==o&&(!(o instanceof qs)||h.updateDOM(o,m,e._config));if(N||y){const n=e.getElementByKey(a.getNode().getKey()),r=e.getElementByKey(c.getNode().getKey());if(null!==n&&null!==r&&"SPAN"===n.tagName&&"SPAN"===r.tagName){const o=document.createRange();let i,l,d,u;c.isBefore(a)?(i=r,l=c.offset,d=n,u=a.offset):(i=n,l=a.offset,d=r,u=c.offset);const f=i.firstChild;if(null===f)throw Error("Expected text node to be first child of span");const h=d.firstChild;if(null===h)throw Error("Expected text node to be first child of span");o.setStart(f,l),o.setEnd(h,u),s(),s=da(e,o,e=>{for(const t of e){const e=t.style;"Highlight"!==e.background&&(e.background="Highlight"),"HighlightText"!==e.color&&(e.color="HighlightText"),"-1"!==e.zIndex&&(e.zIndex="-1"),"none"!==e.pointerEvents&&(e.pointerEvents="none"),e.marginTop!==aa(-1.5)&&(e.marginTop=aa(-1.5)),e.paddingTop!==aa(4)&&(e.paddingTop=aa(4)),e.paddingBottom!==aa(0)&&(e.paddingBottom=aa(0))}void 0!==t&&t(e)})}}n=d,r=f,o=h,i=_})}return l(e.getEditorState()),la(e.registerUpdateListener(({editorState:e})=>l(e)),s,()=>{s()})},mediaFileReader:function(e,t){const n=e[Symbol.iterator]();return new Promise((e,r)=>{const o=[],i=()=>{const{done:s,value:l}=n.next();if(s)return e(o);const a=new FileReader;a.addEventListener("error",r),a.addEventListener("load",()=>{const e=a.result;"string"==typeof e&&o.push({file:l,result:e}),i()}),Ta(l,t)?a.readAsDataURL(l):i()};i()})},mergeRegister:la,objectKlassEquals:function(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name},positionNodeOnRange:da,registerNestedElementResolver:function(e,t,n,r){const o=e=>e instanceof t;return e.registerNodeTransform(t,e=>{const t=(e=>{const t=e.getChildren();for(let e=0;e<t.length;e++){const n=t[e];if(o(n))return null}let n=e,r=e;for(;null!==n;)if(r=n,n=n.getParent(),o(n))return{child:r,parent:n};return null})(e);if(null!==t){const{child:o,parent:i}=t;if(o.is(e)){r(i,e);const t=o.getNextSiblings(),s=t.length;if(i.insertAfter(o),0!==s){const e=n(i);o.insertAfter(e);for(let n=0;n<s;n++)e.append(t[n])}i.canBeEmpty()||0!==i.getChildrenSize()||i.remove()}}})},removeClassNamesFromElement:function(e,...t){const n=sa(...t);n.length>0&&e.classList.remove(...n)},$splitNode:Fi,isBlockDomNode:rl,isHTMLAnchorElement:il,isHTMLElement:sl,isInlineDomNode:ll});!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}((function(e){const t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const xa="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,wa=xa&&"documentMode"in document?document.documentMode:null,ba=(xa&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),xa&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),!(!xa||!("InputEvent"in window)||wa)&&new window.InputEvent("input"),xa&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),xa&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,xa&&/Android/.test(navigator.userAgent),xa&&/^(?=.*Chrome).*/i.test(navigator.userAgent)),Oa=(xa&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent),Sa),va=Oa.$dfs,Ma=Oa.$filter,Aa=Oa.$findMatchingParent,Da=Oa.$getNearestBlockElementAncestorOrThrow,Ra=Oa.$getNearestNodeOfType,ka=Oa.$getNextRightPreorderNode,Ia=Oa.$insertFirst,La=Oa.$insertNodeToNearestRoot,Pa=Oa.$isEditorIsNestedEditor,$a=Oa.$restoreEditorState,Fa=Oa.$splitNode,Ka=Oa.$wrapNodeInElement,Ba=Oa.CAN_USE_BEFORE_INPUT,Wa=Oa.CAN_USE_DOM,za=Oa.IS_ANDROID,Ha=Oa.IS_ANDROID_CHROME,Ua=Oa.IS_APPLE,Ya=Oa.IS_APPLE_WEBKIT,Ja=Oa.IS_CHROME,ja=Oa.IS_FIREFOX,Ga=Oa.IS_IOS,Xa=Oa.IS_SAFARI,Va=Oa.addClassNamesToElement,qa=Oa.calculateZoomLevel,Qa=Oa.isBlockDomNode,Za=Oa.isHTMLAnchorElement,ec=Oa.isHTMLElement,tc=Oa.isInlineDomNode,nc=Oa.isMimeType,rc=Oa.markSelection,oc=Oa.mediaFileReader,ic=Oa.mergeRegister,sc=Oa.objectKlassEquals,lc=Oa.positionNodeOnRange,ac=Oa.registerNestedElementResolver,cc=Oa.removeClassNamesFromElement;var dc=Object.freeze({$dfs:va,$filter:Ma,$findMatchingParent:Aa,$getNearestBlockElementAncestorOrThrow:Da,$getNearestNodeOfType:Ra,$getNextRightPreorderNode:ka,$insertFirst:Ia,$insertNodeToNearestRoot:La,$isEditorIsNestedEditor:Pa,$restoreEditorState:$a,$splitNode:Fa,$wrapNodeInElement:Ka,CAN_USE_BEFORE_INPUT:Ba,CAN_USE_DOM:Wa,IS_ANDROID:za,IS_ANDROID_CHROME:Ha,IS_APPLE:Ua,IS_APPLE_WEBKIT:Ya,IS_CHROME:Ja,IS_FIREFOX:ja,IS_IOS:Ga,IS_SAFARI:Xa,addClassNamesToElement:Va,calculateZoomLevel:qa,isBlockDomNode:Qa,isHTMLAnchorElement:Za,isHTMLElement:ec,isInlineDomNode:tc,isMimeType:nc,markSelection:rc,mediaFileReader:oc,mergeRegister:ic,objectKlassEquals:sc,positionNodeOnRange:lc,registerNestedElementResolver:ac,removeClassNamesFromElement:cc});function uc(e,t,n,r=null){let o=null===r||t.isSelected(r);const i=Ci(t)&&t.excludeFromCopy("html");let s=t;if(null!==r){let e=Go(t);e=Ai(e)&&null!==r?Wl(r,e):e,s=e}const l=Ci(s)?s.getChildren():[],a=e._nodes.get(s.getType());let c;c=a&&void 0!==a.exportDOM?a.exportDOM(e,s):s.exportDOM(e);const{element:d,after:u}=c;if(!d)return!1;const f=document.createDocumentFragment();for(let n=0;n<l.length;n++){const i=l[n],s=uc(e,i,f,r);!o&&Ci(t)&&s&&t.extractWithChild(i,r,"html")&&(o=!0)}if(o&&!i){if(ec(d)&&d.append(f),n.append(d),u){const e=u.call(s,d);e&&d.replaceWith(e)}}else n.append(f);return o}const fc=new Set(["STYLE","SCRIPT"]);function hc(e,t,n,r,o=new Map,i){let s=[];if(fc.has(e.nodeName))return s;let l=null;const a=function(e,t){const{nodeName:n}=e,r=t._htmlConversions.get(n.toLowerCase());let o=null;if(void 0!==r)for(const t of r){const n=t(e);null!==n&&(null===o||(o.priority||0)<(n.priority||0))&&(o=n)}return null!==o?o.conversion:null}(e,t),c=a?a(e):null;let d=null;if(null!==c){d=c.after;const t=c.node;if(l=Array.isArray(t)?t[t.length-1]:t,null!==l){for(const[,e]of o)if(l=e(l,i),!l)break;l&&s.push(...Array.isArray(t)?t:[l])}null!=c.forChild&&o.set(e.nodeName,c.forChild)}const u=e.childNodes;let f=[];const h=(null==l||!vi(l))&&(null!=l&&Ni(l)||r);for(let e=0;e<u.length;e++)f.push(...hc(u[e],t,n,h,new Map(o),l));return null!=d&&(f=d(f)),Qa(e)&&(f=gc(e,f,h?()=>{const e=new Ki;return n.push(e),e}:Qo)),null==l?f.length>0?s=s.concat(f):Qa(e)&&function(e){if(null==e.nextSibling||null==e.previousSibling)return!1;return ll(e.nextSibling)&&ll(e.previousSibling)}(e)&&(s=s.concat(Vo())):Ci(l)&&l.append(...f),s}function gc(e,t,n){const r=e.style.textAlign,o=[];let i=[];for(let e=0;e<t.length;e++){const s=t[e];if(Ni(s))r&&!s.getFormat()&&s.setFormat(r),o.push(s);else if(i.push(s),e===t.length-1||e<t.length-1&&Ni(t[e+1])){const e=n();e.setFormat(r),e.append(...i),o.push(e),i=[]}}return o}const _c=Object.freeze({$generateHtmlFromNodes:function(e,t){if("undefined"==typeof document||"undefined"==typeof window&&void 0===global.window)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=fi().getChildren();for(let o=0;o<r.length;o++){uc(e,r[o],n,t)}return n.innerHTML},$generateNodesFromDOM:function(e,t){const n=t.body?t.body.childNodes:[];let r=[];const o=[];for(let t=0;t<n.length;t++){const i=n[t];if(!fc.has(i.nodeName)){const t=hc(i,e,o,!1);null!==t&&(r=r.concat(t))}}return function(e){for(const t of e)t.getNextSibling()instanceof Ki&&t.insertAfter(Vo());for(const t of e){const e=t.getChildren();for(const n of e)t.insertBefore(n);t.remove()}}(o),r}}),pc=_c.$generateHtmlFromNodes,mc=_c.$generateNodesFromDOM;var Nc=Object.freeze({$generateHtmlFromNodes:pc,$generateNodesFromDOM:mc});function yc(e){let t=1,n=e.getParent();for(;null!=n;){if($c(n)){const e=n.getParent();if(Uc(e)){t++,n=e.getParent();continue}throw Error("A ListItemNode must have a ListNode for a parent.")}return t}return t}function Cc(e){let t=e.getParent();if(!Uc(t))throw Error("A ListItemNode must have a ListNode for a parent.");let n=t;for(;null!==n;)n=n.getParent(),Uc(n)&&(t=n);return t}function Tc(e){let t=[];const n=e.getChildren().filter($c);for(let e=0;e<n.length;e++){const r=n[e],o=r.getFirstChild();Uc(o)?t=t.concat(Tc(o)):t.push(r)}return t}function Ec(e){return $c(e)&&Uc(e.getFirstChild())}function Sc(e){return Pc().append(e)}function xc(e,t){return $c(e)&&(0===t.length||1===t.length&&e.is(t[0])&&0===e.getChildrenSize())}function wc(e,t){e.splice(e.getChildrenSize(),0,t)}function bc(e,t){if(Uc(e))return e;const n=e.getPreviousSibling(),r=e.getNextSibling(),o=Pc();if(o.setFormat(e.getFormatType()),o.setIndent(e.getIndent()),wc(o,e.getChildren()),Uc(n)&&t===n.getListType())return n.append(o),e.remove(),Uc(r)&&t===r.getListType()&&(wc(n,r.getChildren()),r.remove()),n;if(Uc(r)&&t===r.getListType())return r.getFirstChildOrThrow().insertBefore(o),e.remove(),r;{const n=Hc(t);return n.append(o),e.replace(n),n}}function Oc(e,t){const n=e.getLastChild(),r=t.getFirstChild();n&&r&&Ec(n)&&Ec(r)&&(Oc(n.getFirstChild(),r.getFirstChild()),r.remove());const o=t.getChildren();o.length>0&&e.append(...o),t.remove()}function vc(e){const t=new Set;if(Ec(e)||t.has(e.getKey()))return;const n=e.getParent(),r=e.getNextSibling(),o=e.getPreviousSibling();if(Ec(r)&&Ec(o)){const n=o.getFirstChild();if(Uc(n)){n.append(e);const o=r.getFirstChild();if(Uc(o)){wc(n,o.getChildren()),r.remove(),t.add(r.getKey())}}}else if(Ec(r)){const t=r.getFirstChild();if(Uc(t)){const n=t.getFirstChild();null!==n&&n.insertBefore(e)}}else if(Ec(o)){const t=o.getFirstChild();Uc(t)&&t.append(e)}else if(Uc(n)){const t=Pc(),i=Hc(n.getListType());t.append(i),i.append(e),o?o.insertAfter(t):r?r.insertBefore(t):n.append(t)}}function Mc(e){if(Ec(e))return;const t=e.getParent(),n=t?t.getParent():void 0;if(Uc(n?n.getParent():void 0)&&$c(n)&&Uc(t)){const r=t?t.getFirstChild():void 0,o=t?t.getLastChild():void 0;if(e.is(r))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(o))n.insertAfter(e),t.isEmpty()&&n.remove();else{const r=t.getListType(),o=Pc(),i=Hc(r);o.append(i),e.getPreviousSiblings().forEach(e=>i.append(e));const s=Pc(),l=Hc(r);s.append(l),wc(l,e.getNextSiblings()),n.insertBefore(o),n.insertAfter(s),n.replace(e)}}}function Ac(...e){const t=[];for(const n of e)if(n&&"string"==typeof n)for(const[e]of n.matchAll(/\S+/g))t.push(e);return t}class Dc extends as{static getType(){return"listitem"}static clone(e){return new Dc(e.__value,e.__checked,e.__key)}constructor(e,t,n){super(n),this.__value=void 0===e?1:e,this.__checked=t}createDOM(e){const t=document.createElement("li"),n=this.getParent();return Uc(n)&&"check"===n.getListType()&&kc(t,this,null),t.value=this.__value,Rc(t,e.theme,this),t}updateDOM(e,t,n){const r=this.getParent();return Uc(r)&&"check"===r.getListType()&&kc(t,this,e),t.value=this.__value,Rc(t,n.theme,this),!1}static transform(){return e=>{if(!$c(e))throw Error("node is not a ListItemNode");if(null==e.__checked)return;const t=e.getParent();Uc(t)&&"check"!==t.getListType()&&null!=e.getChecked()&&e.setChecked(void 0)}}static importDOM(){return{li:()=>({conversion:Ic,priority:0})}}static importJSON(e){const t=Pc();return t.setChecked(e.checked),t.setValue(e.value),t.setFormat(e.format),t.setDirection(e.direction),t}exportDOM(e){const t=this.createDOM(e._config);return t.style.textAlign=this.getFormatType(),{element:t}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...e){for(let t=0;t<e.length;t++){const n=e[t];if(Ci(n)&&this.canMergeWith(n)){const e=n.getChildren();this.append(...e),n.remove()}else super.append(n)}return this}replace(e,t){if($c(e))return super.replace(e);this.setIndent(0);const n=this.getParentOrThrow();if(!Uc(n))return e;if(n.__first===this.getKey())n.insertBefore(e);else if(n.__last===this.getKey())n.insertAfter(e);else{const t=Hc(n.getListType());let r=this.getNextSibling();for(;r;){const e=r;r=r.getNextSibling(),t.append(e)}n.insertAfter(e),e.insertAfter(t)}if(t){if(!Ci(e))throw Error("includeChildren should only be true for ElementNodes");this.getChildren().forEach(t=>{e.append(t)})}return this.remove(),0===n.getChildrenSize()&&n.remove(),e}insertAfter(e,t=!0){const n=this.getParentOrThrow();if(!Uc(n))throw Error("insertAfter: list node is not parent of list item node");if($c(e))return super.insertAfter(e,t);const r=this.getNextSiblings();if(n.insertAfter(e,t),0!==r.length){const o=Hc(n.getListType());r.forEach(e=>o.append(e)),e.insertAfter(o,t)}return e}remove(e){const t=this.getPreviousSibling(),n=this.getNextSibling();super.remove(e),t&&n&&Ec(t)&&Ec(n)&&(Oc(t.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(e,t=!0){const n=Pc(null==this.__checked&&void 0);return this.insertAfter(n,t),n}collapseAtStart(e){const t=Qo();this.getChildren().forEach(e=>t.append(e));const n=this.getParentOrThrow(),r=n.getParentOrThrow(),o=$c(r);if(1===n.getChildrenSize())if(o)n.remove(),r.select();else{n.insertBefore(t),n.remove();const r=e.anchor,o=e.focus,i=t.getKey();"element"===r.type&&r.getNode().is(this)&&r.set(i,r.offset,"element"),"element"===o.type&&o.getNode().is(this)&&o.set(i,o.offset,"element")}else n.insertBefore(t),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){this.getWritable().__value=e}getChecked(){const e=this.getLatest();let t;const n=this.getParent();return Uc(n)&&(t=n.getListType()),"check"===t?Boolean(e.__checked):void 0}setChecked(e){this.getWritable().__checked=e}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){const e=this.getParent();if(null===e)return this.getLatest().__indent;let t=e.getParentOrThrow(),n=0;for(;$c(t);)t=t.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(e){if("number"!=typeof e)throw Error("Invalid indent value.");if(!((e=Math.floor(e))>=0))throw Error("Indent value must be non-negative.");let t=this.getIndent();for(;t!==e;)t<e?(vc(this),t++):(Mc(this),t--);return this}canInsertAfter(e){return $c(e)}canReplaceWith(e){return $c(e)}canMergeWith(e){return wi(e)||$c(e)}extractWithChild(e,t){if(!bi(t))return!1;const n=t.anchor.getNode(),r=t.focus.getNode();return this.isParentOf(n)&&this.isParentOf(r)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return Hc("bullet")}canMergeWhenEmpty(){return!0}}function Rc(e,t,n){const r=[],o=[],i=t.list,s=i?i.listitem:void 0;let l;if(i&&i.nested&&(l=i.nested.listitem),void 0!==s&&r.push(...Ac(s)),i){const e=n.getParent(),t=Uc(e)&&"check"===e.getListType(),s=n.getChecked();t&&!s||o.push(i.listitemUnchecked),t&&s||o.push(i.listitemChecked),t&&r.push(s?i.listitemChecked:i.listitemUnchecked)}if(void 0!==l){const e=Ac(l);n.getChildren().some(e=>Uc(e))?r.push(...e):o.push(...e)}o.length>0&&cc(e,...o),r.length>0&&Va(e,...r)}function kc(e,t,n,r){Uc(t.getFirstChild())?(e.removeAttribute("role"),e.removeAttribute("tabIndex"),e.removeAttribute("aria-checked")):(e.setAttribute("role","checkbox"),e.setAttribute("tabIndex","-1"),n&&t.__checked===n.__checked||e.setAttribute("aria-checked",t.getChecked()?"true":"false"))}function Ic(e){if(e.classList.contains("task-list-item"))for(const t of e.children)if("INPUT"===t.tagName)return Lc(t);const t=e.getAttribute("aria-checked");return{node:Pc("true"===t||"false"!==t&&void 0)}}function Lc(e){if(!("checkbox"===e.getAttribute("type")))return{node:null};return{node:Pc(e.hasAttribute("checked"))}}function Pc(e){return jo(new Dc(void 0,e))}function $c(e){return e instanceof Dc}class Fc extends as{static getType(){return"list"}static clone(e){const t=e.__listType||zc[e.__tag];return new Fc(t,e.__start,e.__key)}constructor(e,t,n){super(n);const r=zc[e]||e;this.__listType=r,this.__tag="number"===r?"ol":"ul",this.__start=t}getTag(){return this.__tag}setListType(e){const t=this.getWritable();t.__listType=e,t.__tag="number"===e?"ol":"ul"}getListType(){return this.__listType}getStart(){return this.__start}createDOM(e,t){const n=this.__tag,r=document.createElement(n);return 1!==this.__start&&r.setAttribute("start",String(this.__start)),r.__lexicalListType=this.__listType,Kc(r,e.theme,this),r}updateDOM(e,t,n){return e.__tag!==this.__tag||(Kc(t,n.theme,this),!1)}static transform(){return e=>{if(!Uc(e))throw Error("node is not a ListNode");!function(e){const t=e.getNextSibling();Uc(t)&&e.getListType()===t.getListType()&&Oc(e,t)}(e),function(e){const t="check"!==e.getListType();let n=e.getStart();for(const r of e.getChildren())$c(r)&&(r.getValue()!==n&&r.setValue(n),t&&null!=r.getLatest().__checked&&r.setChecked(void 0),Uc(r.getFirstChild())||n++)}(e)}}static importDOM(){return{ol:()=>({conversion:Wc,priority:0}),ul:()=>({conversion:Wc,priority:0})}}static importJSON(e){const t=Hc(e.listType,e.start);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&ec(t)&&(1!==this.__start&&t.setAttribute("start",String(this.__start)),"check"===this.__listType&&t.setAttribute("__lexicalListType","check")),{element:t}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...e){for(let t=0;t<e.length;t++){const n=e[t];if($c(n))super.append(n);else{const e=Pc();if(Uc(n))e.append(n);else if(Ci(n)){const t=ri(n.getTextContent());e.append(t)}else e.append(n);super.append(e)}}return this}extractWithChild(e){return $c(e)}}function Kc(e,t,n){const r=[],o=[],i=t.list;if(void 0!==i){const e=i[n.__tag+"Depth"]||[],t=yc(n)-1,s=t%e.length,l=e[s],a=i[n.__tag];let c;const d=i.nested,u=i.checklist;if(void 0!==d&&d.list&&(c=d.list),void 0!==a&&r.push(a),void 0!==u&&"check"===n.__listType&&r.push(u),void 0!==l){r.push(...Ac(l));for(let t=0;t<e.length;t++)t!==s&&o.push(n.__tag+t)}if(void 0!==c){const e=Ac(c);t>1?r.push(...e):o.push(...e)}}o.length>0&&cc(e,...o),r.length>0&&Va(e,...r)}function Bc(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if($c(r)){t.push(r);const e=r.getChildren();e.length>1&&e.forEach(e=>{Uc(e)&&t.push(Sc(e))})}else t.push(Sc(r))}return t}function Wc(e){const t=e.nodeName.toLowerCase();let n=null;if("ol"===t){n=Hc("number",e.start)}else"ul"===t&&(n=function(e){if("check"===e.getAttribute("__lexicallisttype")||e.classList.contains("contains-task-list"))return!0;for(const t of e.childNodes)if(ec(t)&&t.hasAttribute("aria-checked"))return!0;return!1}(e)?Hc("check"):Hc("bullet"));return{after:Bc,node:n}}const zc={ol:"number",ul:"bullet"};function Hc(e,t=1){return jo(new Fc(e,t))}function Uc(e){return e instanceof Fc}const Yc=Zs("INSERT_UNORDERED_LIST_COMMAND"),Jc=Zs("INSERT_ORDERED_LIST_COMMAND"),jc=Zs("INSERT_CHECK_LIST_COMMAND"),Gc=Zs("REMOVE_LIST_COMMAND");var Xc=Object.freeze({$createListItemNode:Pc,$createListNode:Hc,$getListDepth:yc,$handleListInsertParagraph:function(){const e=hi();if(!bi(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!$c(t)||0!==t.getChildrenSize())return!1;const n=Cc(t),r=t.getParent();if(!Uc(r))throw Error("A ListItemNode must have a ListNode for a parent.");const o=r.getParent();let i;if(vi(o))i=Qo(),n.insertAfter(i);else{if(!$c(o))return!1;i=Pc(),o.insertAfter(i)}i.select();const s=t.getNextSiblings();if(s.length>0){const e=Hc(r.getListType());if(wi(i))i.insertAfter(e);else{const t=Pc();t.append(e),i.insertAfter(t)}s.forEach(t=>{t.remove(),e.append(t)})}return function(e){let t=e;for(;null==t.getNextSibling()&&null==t.getPreviousSibling();){const e=t.getParent();if(null==e||!$c(t)&&!Uc(t))break;t=e}t.remove()}(t),!0},$isListItemNode:$c,$isListNode:Uc,INSERT_CHECK_LIST_COMMAND:jc,INSERT_ORDERED_LIST_COMMAND:Jc,INSERT_UNORDERED_LIST_COMMAND:Yc,ListItemNode:Dc,ListNode:Fc,REMOVE_LIST_COMMAND:Gc,insertList:function(e,t){e.update(()=>{const e=hi();if(null!==e){const n=e.getNodes();if(bi(e)){const r=e.getStartEndPoints();if(null===r)throw Error("insertList: anchor should be defined");const[o]=r,i=o.getNode(),s=i.getParent();if(xc(i,n)){const e=Hc(t);if(vi(s)){i.replace(e);const t=Pc();Ci(i)&&(t.setFormat(i.getFormatType()),t.setIndent(i.getIndent())),e.append(t)}else if($c(i)){const t=i.getParentOrThrow();wc(e,t.getChildren()),t.replace(e)}return}}const r=new Set;for(let e=0;e<n.length;e++){const o=n[e];if(!Ci(o)||!o.isEmpty()||$c(o)||r.has(o.getKey())){if(Ei(o)){let e=o.getParent();for(;null!=e;){const n=e.getKey();if(Uc(e)){if(!r.has(n)){const o=Hc(t);wc(o,e.getChildren()),e.replace(o),r.add(n)}break}{const o=e.getParent();if(vi(o)&&!r.has(n)){r.add(n),bc(e,t);break}e=o}}}}else bc(o,t)}}})},removeList:function(e){e.update(()=>{const e=hi();if(bi(e)){const t=new Set,n=e.getNodes(),r=e.anchor.getNode();if(xc(r,n))t.add(Cc(r));else for(let e=0;e<n.length;e++){const r=n[e];if(Ei(r)){const e=Ra(r,Dc);null!=e&&t.add(Cc(e))}}for(const n of t){let t=n;const r=Tc(n);for(const n of r){const r=Qo();wc(r,n.getChildren()),t.insertAfter(r),t=r,n.__key===e.anchor.key&&e.anchor.set(r.getKey(),0,"element"),n.__key===e.focus.key&&e.focus.set(r.getKey(),0,"element"),n.remove()}n.remove()}}})}});!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}((function(e){const t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));Zs("INSERT_UNORDERED_LIST_COMMAND"),Zs("INSERT_ORDERED_LIST_COMMAND"),Zs("INSERT_CHECK_LIST_COMMAND"),Zs("REMOVE_LIST_COMMAND");const Vc=Xc,qc=Vc.$createListItemNode,Qc=Vc.$createListNode,Zc=Vc.$getListDepth,ed=Vc.$handleListInsertParagraph,td=Vc.$isListItemNode,nd=Vc.$isListNode,rd=Vc.INSERT_CHECK_LIST_COMMAND,od=Vc.INSERT_ORDERED_LIST_COMMAND,id=Vc.INSERT_UNORDERED_LIST_COMMAND,sd=Vc.ListItemNode,ld=Vc.ListNode,ad=Vc.REMOVE_LIST_COMMAND,cd=Vc.insertList,dd=Vc.removeList;var ud=Object.freeze({$createListItemNode:qc,$createListNode:Qc,$getListDepth:Zc,$handleListInsertParagraph:ed,$isListItemNode:td,$isListNode:nd,INSERT_CHECK_LIST_COMMAND:rd,INSERT_ORDERED_LIST_COMMAND:od,INSERT_UNORDERED_LIST_COMMAND:id,ListItemNode:sd,ListNode:ld,REMOVE_LIST_COMMAND:ad,insertList:cd,removeList:dd});const fd=new Set(["http:","https:","mailto:","sms:","tel:"]);class hd extends as{static getType(){return"link"}static clone(e){return new hd(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e,t={},n){super(n);const{target:r=null,rel:o=null,title:i=null}=t;this.__url=e,this.__target=r,this.__rel=o,this.__title=i}createDOM(e){const t=document.createElement("a");return t.href=this.sanitizeUrl(this.__url),null!==this.__target&&(t.target=this.__target),null!==this.__rel&&(t.rel=this.__rel),null!==this.__title&&(t.title=this.__title),Va(t,e.theme.link),t}updateDOM(e,t,n){if(t instanceof HTMLAnchorElement){const n=this.__url,r=this.__target,o=this.__rel,i=this.__title;n!==e.__url&&(t.href=n),r!==e.__target&&(r?t.target=r:t.removeAttribute("target")),o!==e.__rel&&(o?t.rel=o:t.removeAttribute("rel")),i!==e.__title&&(i?t.title=i:t.removeAttribute("title"))}return!1}static importDOM(){return{a:e=>({conversion:gd,priority:1})}}static importJSON(e){const t=_d(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}sanitizeUrl(e){try{const t=new URL(e);if(!fd.has(t.protocol))return"about:blank"}catch(t){return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(e){this.getWritable().__url=e}getTarget(){return this.getLatest().__target}setTarget(e){this.getWritable().__target=e}getRel(){return this.getLatest().__rel}setRel(e){this.getWritable().__rel=e}getTitle(){return this.getLatest().__title}setTitle(e){this.getWritable().__title=e}insertNewAfter(e,t=!0){const n=_d(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!bi(t))return!1;const r=t.anchor.getNode(),o=t.focus.getNode();return this.isParentOf(r)&&this.isParentOf(o)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function gd(e){let t=null;if(Za(e)){const n=e.textContent;(null!==n&&""!==n||e.children.length>0)&&(t=_d(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function _d(e,t){return jo(new hd(e,t))}function pd(e){return e instanceof hd}class md extends hd{constructor(e,t={},n){super(e,t,n),this.__isUnlinked=void 0!==t.isUnlinked&&null!==t.isUnlinked&&t.isUnlinked}static getType(){return"autolink"}static clone(e){return new md(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){const t=this.getWritable();return t.__isUnlinked=e,t}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,t,n){return super.updateDOM(e,t,n)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){const t=Nd(e.url,{isUnlinked:e.isUnlinked,rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked,type:"autolink",version:1}}insertNewAfter(e,t=!0){const n=this.getParentOrThrow().insertNewAfter(e,t);if(Ci(n)){const e=Nd(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(e),e}return null}}function Nd(e,t){return jo(new md(e,t))}function yd(e){return e instanceof md}const Cd=Zs("TOGGLE_LINK_COMMAND");function Td(e,t={}){const{target:n,title:r}=t,o=void 0===t.rel?"noreferrer":t.rel,i=hi();if(!bi(i))return;const s=i.extract();if(null===e)s.forEach(e=>{const t=e.getParent();if(!yd(t)&&pd(t)){const e=t.getChildren();for(let n=0;n<e.length;n++)t.insertBefore(e[n]);t.remove()}});else{if(1===s.length){const t=function(e,t){let n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}(s[0],pd);if(null!==t)return t.setURL(e),void 0!==n&&t.setTarget(n),null!==o&&t.setRel(o),void(void 0!==r&&t.setTitle(r))}let t=null,i=null;s.forEach(s=>{const l=s.getParent();if(l!==i&&null!==l&&(!Ci(s)||s.isInline())){if(pd(l))return i=l,l.setURL(e),void 0!==n&&l.setTarget(n),null!==o&&i.setRel(o),void(void 0!==r&&i.setTitle(r));if(l.is(t)||(t=l,i=_d(e,{rel:o,target:n,title:r}),pd(l)?null===s.getPreviousSibling()?l.insertBefore(i):l.insertAfter(i):s.insertBefore(i)),pd(s)){if(s.is(i))return;if(null!==i){const e=s.getChildren();for(let t=0;t<e.length;t++)i.append(e[t])}s.remove()}else null!==i&&i.append(s)}})}}const Ed=Td;var Sd=Object.freeze({$createAutoLinkNode:Nd,$createLinkNode:_d,$isAutoLinkNode:yd,$isLinkNode:pd,$toggleLink:Td,AutoLinkNode:md,LinkNode:hd,TOGGLE_LINK_COMMAND:Cd,toggleLink:Ed});Zs("TOGGLE_LINK_COMMAND");const xd=Sd,wd=xd.$createAutoLinkNode,bd=xd.$createLinkNode,Od=xd.$isAutoLinkNode,vd=xd.$isLinkNode,Md=xd.$toggleLink,Ad=xd.AutoLinkNode,Dd=xd.LinkNode,Rd=xd.TOGGLE_LINK_COMMAND,kd=xd.toggleLink;var Id=Object.freeze({$createAutoLinkNode:wd,$createLinkNode:bd,$isAutoLinkNode:Od,$isLinkNode:vd,$toggleLink:Md,AutoLinkNode:Ad,LinkNode:Dd,TOGGLE_LINK_COMMAND:Rd,toggleLink:kd});const Ld="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Pd=e=>Ld?(e||window).getSelection():null;function $d(e,t=hi()){if(null==t)throw Error("Expected valid LexicalSelection");return bi(t)&&t.isCollapsed()||0===t.getNodes().length?"":pc(e,t)}function Fd(e,t=hi()){if(null==t)throw Error("Expected valid LexicalSelection");return bi(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(Wd(e,t))}function Kd(e,t,n){e.dispatchCommand(js,{nodes:t,selection:n})||n.insertNodes(t)}function Bd(e,t,n,r=[]){let o=null===t||n.isSelected(t);const i=Ci(n)&&n.excludeFromCopy("html");let s=n;if(null!==t){let e=Go(n);e=Ai(e)&&null!==t?Wl(t,e):e,s=e}const l=Ci(s)?s.getChildren():[],a=function(e){const t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType())throw Error(`LexicalNode: Node ${n.name} does not implement .exportJSON().`);if(Ci(e)){const e=t.children;if(!Array.isArray(e))throw Error(`LexicalNode: Node ${n.name} is an element but .exportJSON() does not have a children array.`)}return t}(s);if(Ai(s)){const e=s.__text;e.length>0?a.text=e:o=!1}for(let r=0;r<l.length;r++){const i=l[r],s=Bd(e,t,i,a.children);!o&&Ci(n)&&s&&n.extractWithChild(i,t,"clone")&&(o=!0)}if(o&&!i)r.push(a);else if(Array.isArray(a.children))for(let e=0;e<a.children.length;e++){const t=a.children[e];r.push(t)}return o}function Wd(e,t){const n=[],r=fi().getChildren();for(let o=0;o<r.length;o++){Bd(e,t,r[o],n)}return{namespace:e._config.namespace,nodes:n}}function zd(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],o=Ii(r);Ai(o)&&Al(o),t.push(o)}return t}let Hd=null;function Ud(e,t,n){if(void 0===n){const t=Pd(e._window);if(!t)return!1;const r=t.anchorNode,o=t.focusNode;if(null!==r&&null!==o&&!dl(e,r,o))return!1;const i=hi();if(null===i)return!1;n=Jd(i)}t.preventDefault();const r=t.clipboardData;return null!==r&&(jd(r,n),!0)}const Yd=[["text/html",$d],["application/x-lexical-editor",Fd]];function Jd(e=hi()){const t={"text/plain":e?e.getTextContent():""};if(e){const n=si();for(const[r,o]of Yd){const i=o(n,e);null!==i&&(t[r]=i)}}return t}function jd(e,t){for(const n in t){const r=t[n];void 0!==r&&e.setData(n,r)}}var Gd=Object.freeze({$generateJSONFromSelectedNodes:Wd,$generateNodesFromSerializedNodes:zd,$getClipboardDataFromSelection:Jd,$getHtmlContent:$d,$getLexicalContent:Fd,$insertDataTransferForPlainText:function(e,t){const n=e.getData("text/plain")||e.getData("text/uri-list");null!=n&&t.insertRawText(n)},$insertDataTransferForRichText:function(e,t,n){const r=e.getData("application/x-lexical-editor");if(r)try{const e=JSON.parse(r);if(e.namespace===n._config.namespace&&Array.isArray(e.nodes)){return Kd(n,zd(e.nodes),t)}}catch(e){}const o=e.getData("text/html");if(o)try{const e=(new DOMParser).parseFromString(o,"text/html");return Kd(n,mc(n,e),t)}catch(e){}const i=e.getData("text/plain")||e.getData("text/uri-list");if(null!=i)if(bi(t)){const e=i.split(/(\r?\n|\t)/);""===e[e.length-1]&&e.pop();for(let t=0;t<e.length;t++){const n=hi();if(bi(n)){const r=e[t];"\n"===r||"\r\n"===r?n.insertParagraph():"\t"===r?n.insertNodes([ni()]):n.insertText(r)}}}else t.insertRawText(i)},$insertGeneratedNodes:Kd,copyToClipboard:async function(e,t,n){if(null!==Hd)return!1;if(null!==t)return new Promise((r,o)=>{e.update(()=>{r(Ud(e,t,n))})});const r=e.getRootElement(),o=null==e._window?window.document:e._window.document,i=Pd(e._window);if(null===r||null===i)return!1;const s=o.createElement("span");s.style.cssText="position: fixed; top: -1000px;",s.append(o.createTextNode("#")),r.append(s);const l=new Range;return l.setStart(s,0),l.setEnd(s,1),i.removeAllRanges(),i.addRange(l),new Promise((t,r)=>{const i=e.registerCommand(Qi,r=>(sc(r,ClipboardEvent)&&(i(),null!==Hd&&(window.clearTimeout(Hd),Hd=null),t(Ud(e,r,n))),!0),Ji);Hd=window.setTimeout(()=>{i(),Hd=null,t(!1)},50),o.execCommand("copy"),s.remove()})},setLexicalClipboardDataTransfer:jd});!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}((function(e){const t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;const Xd=Gd,Vd=Xd.$generateJSONFromSelectedNodes,qd=Xd.$generateNodesFromSerializedNodes,Qd=Xd.$getClipboardDataFromSelection,Zd=Xd.$getHtmlContent,eu=Xd.$getLexicalContent,tu=Xd.$insertDataTransferForPlainText,nu=Xd.$insertDataTransferForRichText,ru=Xd.$insertGeneratedNodes,ou=Xd.copyToClipboard,iu=Xd.setLexicalClipboardDataTransfer;var su=Object.freeze({$generateJSONFromSelectedNodes:Vd,$generateNodesFromSerializedNodes:qd,$getClipboardDataFromSelection:Qd,$getHtmlContent:Zd,$getLexicalContent:eu,$insertDataTransferForPlainText:tu,$insertDataTransferForRichText:nu,$insertGeneratedNodes:ru,copyToClipboard:ou,setLexicalClipboardDataTransfer:iu});function lu(e,t,n,r,o){if(null===e||0===n.size&&0===r.size&&!o)return 0;const i=t._selection,s=e._selection;if(o)return 1;if(!(bi(i)&&bi(s)&&s.isCollapsed()&&i.isCollapsed()))return 0;const l=function(e,t,n){const r=e._nodeMap,o=[];for(const e of t){const t=r.get(e);void 0!==t&&o.push(t)}for(const[e,t]of n){if(!t)continue;const n=r.get(e);void 0===n||Oi(n)||o.push(n)}return o}(t,n,r);if(0===l.length)return 0;if(l.length>1){const n=t._nodeMap,r=n.get(i.anchor.key),o=n.get(s.anchor.key);return r&&o&&!e._nodeMap.has(r.__key)&&Ai(r)&&1===r.__text.length&&1===i.anchor.offset?2:0}const a=l[0],c=e._nodeMap.get(a.__key);if(!Ai(c)||!Ai(a)||c.__mode!==a.__mode)return 0;const d=c.__text,u=a.__text;if(d===u)return 0;const f=i.anchor,h=s.anchor;if(f.key!==h.key||"text"!==f.type)return 0;const g=f.offset,_=h.offset,p=u.length-d.length;return 1===p&&_===g-1?2:-1===p&&_===g+1?3:-1===p&&_===g?4:0}function au(e,t){let n=Date.now(),r=0;return(o,i,s,l,a,c)=>{const d=Date.now();if(c.has("historic"))return r=0,n=d,2;const u=lu(o,i,l,a,e.isComposing()),f=(()=>{const f=null===s||s.editor===e,h=c.has("history-push");if(!h&&f&&c.has("history-merge"))return 0;if(null===o)return 1;const g=i._selection;if(!(l.size>0||a.size>0))return null!==g?0:2;if(!1===h&&0!==u&&u===r&&d<n+t&&f)return 0;if(1===l.size){if(function(e,t,n){const r=t._nodeMap.get(e),o=n._nodeMap.get(e),i=t._selection,s=n._selection;return!(bi(i)&&bi(s)&&"element"===i.anchor.type&&"element"===i.focus.type&&"text"===s.anchor.type&&"text"===s.focus.type||!Ai(r)||!Ai(o)||r.__parent!==o.__parent)&&JSON.stringify(t.read(()=>r.exportJSON()))===JSON.stringify(n.read(()=>o.exportJSON()))}(Array.from(l)[0],o,i))return 0}return 1})();return n=d,r=u,f}}function cu(e){e.undoStack=[],e.redoStack=[],e.current=null}const du=Object.freeze({createEmptyHistoryState:function(){return{current:null,redoStack:[],undoStack:[]}},registerHistory:function(e,t,n){const r=au(e,n);return ic(e.registerCommand(Qs,()=>(function(e,t){const n=t.redoStack,r=t.undoStack;if(0!==r.length){const o=t.current,i=r.pop();null!==o&&(n.push(o),e.dispatchCommand(Wi,!0)),0===r.length&&e.dispatchCommand(zi,!1),t.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:"historic"})}}(e,t),!0),ji),e.registerCommand(Hs,()=>(function(e,t){const n=t.redoStack,r=t.undoStack;if(0!==n.length){const o=t.current;null!==o&&(r.push(o),e.dispatchCommand(zi,!0));const i=n.pop();0===n.length&&e.dispatchCommand(Wi,!1),t.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:"historic"})}}(e,t),!0),ji),e.registerCommand(Hi,()=>(cu(t),!1),ji),e.registerCommand(Ui,()=>(cu(t),e.dispatchCommand(Wi,!1),e.dispatchCommand(zi,!1),!0),ji),e.registerUpdateListener(({editorState:n,prevEditorState:o,dirtyLeaves:i,dirtyElements:s,tags:l})=>{const a=t.current,c=t.redoStack,d=t.undoStack,u=null===a?null:a.editorState;if(null!==a&&n===u)return;const f=r(o,n,a,i,s,l);if(1===f)0!==c.length&&(t.redoStack=[],e.dispatchCommand(Wi,!1)),null!==a&&(d.push({...a}),e.dispatchCommand(zi,!0));else if(2===f)return;t.current={editor:e,editorState:n}}))}}),uu=du.createEmptyHistoryState,fu=du.registerHistory;var hu=Object.freeze({createEmptyHistoryState:uu,registerHistory:fu});function gu(){return fi().getTextContent()}function _u(e,t=!0){if(e)return!1;let n=gu();return t&&(n=n.trim()),""===n}function pu(e){if(!_u(e,!1))return!1;const t=fi().getChildren(),n=t.length;if(n>1)return!1;for(let e=0;e<n;e++){const n=t[e];if(yi(n))return!1;if(Ci(n)){if(!wi(n))return!1;if(0!==n.__indent)return!1;const t=n.getChildren(),r=t.length;for(let n=0;n<r;n++){const n=t[e];if(!Ai(n))return!1}}}return!0}var mu=Object.freeze({$canShowPlaceholder:pu,$canShowPlaceholderCurry:function(e){return()=>pu(e)},$findTextIntersectionFromCharacters:function(e,t){let n=e.getFirstChild(),r=0;e:for(;null!==n;){if(Ci(n)){const e=n.getFirstChild();if(null!==e){n=e;continue}}else if(Ai(n)){const e=n.getTextContentSize();if(r+e>t)return{node:n,offset:t-r};r+=e}const e=n.getNextSibling();if(null!==e){n=e;continue}let o=n.getParent();for(;null!==o;){const e=o.getNextSibling();if(null!==e){n=e;continue e}o=o.getParent()}break}return null},$isRootTextContentEmpty:_u,$isRootTextContentEmptyCurry:function(e,t){return()=>_u(e,t)},$rootTextContent:gu,registerLexicalTextEntity:function(e,t,n,r){const o=e=>e instanceof n,i=e=>{const t=ri(e.getTextContent());t.setFormat(e.getFormat()),e.replace(t)};return[e.registerNodeTransform(qs,e=>{if(!e.isSimpleText())return;let n,s=e.getPreviousSibling(),l=e.getTextContent(),a=e;if(Ai(s)){const n=s.getTextContent(),r=t(n+l);if(o(s)){if(null===r||0!==(e=>e.getLatest().__mode)(s))return void i(s);{const t=r.end-n.length;if(t>0){const r=n+l.slice(0,t);if(s.select(),s.setTextContent(r),t===l.length)e.remove();else{const n=l.slice(t);e.setTextContent(n)}return}}}else if(null===r||r.start<n.length)return}let c=0;for(;;){n=t(l);let e,d=null===n?"":l.slice(n.end);if(l=d,""===d){const e=a.getNextSibling();if(Ai(e)){d=a.getTextContent()+e.getTextContent();const n=t(d);if(null===n)return void(o(e)?i(e):e.markDirty());if(0!==n.start)return}}if(null===n)return;if(0===n.start&&Ai(s)&&s.isTextEntity()){c+=n.end;continue}if(0===n.start?[e,a]=a.splitText(n.end):[,e,a]=a.splitText(n.start+c,n.end+c),void 0===e)throw Error("nodeToReplace should not be undefined. You may want to check splitOffsets passed to the splitText.");const u=r(e);if(u.setFormat(e.getFormat()),e.replace(u),null==a)return;c=0,s=u}}),e.registerNodeTransform(n,e=>{const n=e.getTextContent(),r=t(n);if(null===r||0!==r.start)return void i(e);if(n.length>r.end)return void e.splitText(r.end);const s=e.getPreviousSibling();Ai(s)&&s.isTextEntity()&&(i(s),i(e));const l=e.getNextSibling();Ai(l)&&l.isTextEntity()&&(i(l),o(e)&&i(e))})]}});!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}((function(e){const t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const Nu=mu,yu=Nu.$canShowPlaceholder,Cu=Nu.$canShowPlaceholderCurry,Tu=Nu.$findTextIntersectionFromCharacters,Eu=Nu.$isRootTextContentEmpty,Su=Nu.$isRootTextContentEmptyCurry,xu=Nu.$rootTextContent,wu=Nu.registerLexicalTextEntity;var bu=Object.freeze({$canShowPlaceholder:yu,$canShowPlaceholderCurry:Cu,$findTextIntersectionFromCharacters:Tu,$isRootTextContentEmpty:Eu,$isRootTextContentEmptyCurry:Su,$rootTextContent:xu,registerLexicalTextEntity:wu});function Ou(e,t){if(void 0!==document.caretRangeFromPoint){const n=document.caretRangeFromPoint(e,t);return null===n?null:{node:n.startContainer,offset:n.startOffset}}if("undefined"!==document.caretPositionFromPoint){const n=document.caretPositionFromPoint(e,t);return null===n?null:{node:n.offsetNode,offset:n.offset}}return null}const vu="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Mu=vu&&"documentMode"in document?document.documentMode:null,Au=!(!vu||!("InputEvent"in window)||Mu)&&"getTargetRanges"in new window.InputEvent("input"),Du=vu&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Ru=vu&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ku=vu&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Iu=vu&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!ku,Lu=Zs("DRAG_DROP_PASTE_FILE");class Pu extends as{static getType(){return"quote"}static clone(e){return new Pu(e.__key)}constructor(e){super(e)}createDOM(e){const t=document.createElement("blockquote");return Va(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:Wu,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(t&&ec(t)){this.isEmpty()&&t.append(document.createElement("br"));const e=this.getFormatType();t.style.textAlign=e;const n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){const t=$u();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(e,t){const n=Qo(),r=this.getDirection();return n.setDirection(r),this.insertAfter(n,t),n}collapseAtStart(){const e=Qo();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}canMergeWhenEmpty(){return!0}}function $u(){return jo(new Pu)}class Fu extends as{static getType(){return"heading"}static clone(e){return new Fu(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}createDOM(e){const t=this.__tag,n=document.createElement(t),r=e.theme.heading;if(void 0!==r){const e=r[t];Va(n,e)}return n}updateDOM(e,t){return!1}static importDOM(){return{h1:e=>({conversion:Bu,priority:0}),h2:e=>({conversion:Bu,priority:0}),h3:e=>({conversion:Bu,priority:0}),h4:e=>({conversion:Bu,priority:0}),h5:e=>({conversion:Bu,priority:0}),h6:e=>({conversion:Bu,priority:0}),p:e=>{const t=e.firstChild;return null!==t&&Ku(t)?{conversion:()=>({node:null}),priority:3}:null},span:e=>Ku(e)?{conversion:e=>({node:zu("h1")}),priority:3}:null}}exportDOM(e){const{element:t}=super.exportDOM(e);if(t&&ec(t)){this.isEmpty()&&t.append(document.createElement("br"));const e=this.getFormatType();t.style.textAlign=e;const n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){const t=zu(e.tag);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(e,t=!0){const n=e?e.anchor.offset:0,r=this.getLastDescendant(),o=!r||e&&e.anchor.key===r.getKey()&&n===r.getTextContentSize()||!e?Qo():zu(this.getTag()),i=this.getDirection();if(o.setDirection(i),this.insertAfter(o,t),0===n&&!this.isEmpty()&&e){const e=Qo();e.select(),this.replace(e,!0)}return o}collapseAtStart(){const e=this.isEmpty()?Qo():zu(this.getTag());return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}extractWithChild(){return!0}}function Ku(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function Bu(e){const t=e.nodeName.toLowerCase();let n=null;return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t||(n=zu(t),null!==e.style&&n.setFormat(e.style.textAlign)),{node:n}}function Wu(e){const t=$u();return null!==e.style&&t.setFormat(e.style.textAlign),{node:t}}function zu(e){return jo(new Fu(e))}function Hu(e){let t=null;if(sc(e,DragEvent)?t=e.dataTransfer:sc(e,ClipboardEvent)&&(t=e.clipboardData),null===t)return[!1,[],!1];const n=t.types,r=n.includes("Files"),o=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(t.files),o]}function Uu(e){const t=hi();if(!bi(t))return!1;const n=new Set,r=t.getNodes();for(let t=0;t<r.length;t++){const o=r[t],i=o.getKey();if(n.has(i))continue;const s=Aa(o,e=>Ci(e)&&!e.isInline());if(null===s)continue;const l=s.getKey();s.canIndent()&&!n.has(l)&&(n.add(l),e(s))}return n.size>0}function Yu(e){const t=li(e);return yi(t)}var Ju=Object.freeze({$createHeadingNode:zu,$createQuoteNode:$u,$isHeadingNode:function(e){return e instanceof Fu},$isQuoteNode:function(e){return e instanceof Pu},DRAG_DROP_PASTE:Lu,HeadingNode:Fu,QuoteNode:Pu,eventFiles:Hu,registerRichText:function(e){return ic(e.registerCommand(Yi,e=>{const t=hi();return!!xi(t)&&(t.clear(),!0)},0),e.registerCommand(es,e=>{const t=hi();return!!bi(t)&&(t.deleteCharacter(e),!0)},ji),e.registerCommand(ns,e=>{const t=hi();return!!bi(t)&&(t.deleteWord(e),!0)},ji),e.registerCommand(ts,e=>{const t=hi();return!!bi(t)&&(t.deleteLine(e),!0)},ji),e.registerCommand(qi,t=>{const n=hi();if("string"==typeof t)null!==n&&n.insertText(t);else{if(null===n)return!1;const r=t.dataTransfer;if(null!=r)nu(r,n,e);else if(bi(n)){const e=t.data;return e&&n.insertText(e),!0}}return!0},ji),e.registerCommand(Us,()=>{const e=hi();return!!bi(e)&&(e.removeText(),!0)},ji),e.registerCommand(us,e=>{const t=hi();return!!bi(t)&&(t.formatText(e),!0)},ji),e.registerCommand(ds,e=>{const t=hi();if(!bi(t)&&!xi(t))return!1;const n=t.getNodes();for(const t of n){const n=Aa(t,e=>Ci(e)&&!e.isInline());null!==n&&n.setFormat(e)}return!0},ji),e.registerCommand(hs,e=>{const t=hi();return!!bi(t)&&(t.insertLineBreak(e),!0)},ji),e.registerCommand(gs,()=>{const e=hi();return!!bi(e)&&(e.insertParagraph(),!0)},ji),e.registerCommand(_s,()=>(mi([ni()]),!0),ji),e.registerCommand(fs,()=>Uu(e=>{const t=e.getIndent();e.setIndent(t+1)}),ji),e.registerCommand(Bs,()=>Uu(e=>{const t=e.getIndent();t>0&&e.setIndent(t-1)}),ji),e.registerCommand(vs,e=>{const t=hi();if(xi(t)&&!Yu(e.target)){const e=t.getNodes();if(e.length>0)return e[0].selectPrevious(),!0}else if(bi(t)){const n=oi(t.focus,!0);if(!e.shiftKey&&yi(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),e.preventDefault(),!0}return!1},ji),e.registerCommand(ws,e=>{const t=hi();if(xi(t)){const e=t.getNodes();if(e.length>0)return e[0].selectNext(0,0),!0}else if(bi(t)){if(function(e){const t=e.focus;return"root"===t.key&&t.offset===fi().getChildrenSize()}(t))return e.preventDefault(),!0;const n=oi(t.focus,!1);if(!e.shiftKey&&yi(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),e.preventDefault(),!0}return!1},ji),e.registerCommand(bs,e=>{const t=hi();if(xi(t)){const n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectPrevious(),!0}if(!bi(t))return!1;if(Bl(t,!0)){const n=e.shiftKey;return e.preventDefault(),Pl(t,n,!0),!0}return!1},ji),e.registerCommand(Os,e=>{const t=hi();if(xi(t)&&!Yu(e.target)){const n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectNext(0,0),!0}if(!bi(t))return!1;const n=e.shiftKey;return!!Bl(t,!1)&&(e.preventDefault(),Pl(t,n,!1),!0)},ji),e.registerCommand(Ms,t=>{if(Yu(t.target))return!1;const n=hi();if(!bi(n))return!1;t.preventDefault();const{anchor:r}=n,o=r.getNode();if(n.isCollapsed()&&0===r.offset&&!Oi(o)){if(Da(o).getIndent()>0)return e.dispatchCommand(Bs,void 0)}return e.dispatchCommand(es,!0)},ji),e.registerCommand(As,t=>{if(Yu(t.target))return!1;const n=hi();return!!bi(n)&&(t.preventDefault(),e.dispatchCommand(es,!1))},ji),e.registerCommand(Rs,t=>{const n=hi();if(!bi(n))return!1;if(null!==t){if((Ru||Du||Iu)&&Au)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(hs,!1)}return e.dispatchCommand(gs,void 0)},ji),e.registerCommand(ks,()=>{const t=hi();return!!bi(t)&&(e.blur(),!0)},ji),e.registerCommand(ss,t=>{const[,n]=Hu(t);if(n.length>0){const r=Ou(t.clientX,t.clientY);if(null!==r){const{offset:t,node:o}=r,i=li(o);if(null!==i){const e=ei();if(Ai(i))e.anchor.set(i.getKey(),t,"text"),e.focus.set(i.getKey(),t,"text");else{const t=i.getParentOrThrow().getKey(),n=i.getIndexWithinParent()+1;e.anchor.set(t,n,"element"),e.focus.set(t,n,"element")}const n=ki(e);$i(n)}e.dispatchCommand(Lu,n)}return t.preventDefault(),!0}const r=hi();return!!bi(r)},ji),e.registerCommand(is,e=>{const[t]=Hu(e),n=hi();return!(t&&!bi(n))},ji),e.registerCommand(os,e=>{const[t]=Hu(e),n=hi();if(t&&!bi(n))return!1;const r=Ou(e.clientX,e.clientY);if(null!==r){const t=li(r.node);yi(t)&&e.preventDefault()}return!0},ji),e.registerCommand(Gs,()=>(Li(),!0),ji),e.registerCommand(Qi,t=>(ou(e,sc(t,ClipboardEvent)?t:null),!0),ji),e.registerCommand(Zi,t=>(async function(e,t){await ou(t,sc(e,ClipboardEvent)?e:null),t.update(()=>{const e=hi();bi(e)?e.removeText():xi(e)&&e.getNodes().forEach(e=>e.remove())})}(t,e),!0),ji),e.registerCommand(Ws,t=>{const[,n,r]=Hu(t);if(n.length>0&&!r)return e.dispatchCommand(Lu,n),!0;if(cl(t.target))return!1;return null!==hi()&&(function(e,t){e.preventDefault(),t.update(()=>{const n=hi(),r=sc(e,InputEvent)||sc(e,KeyboardEvent)?null:e.clipboardData;null!=r&&null!==n&&nu(r,n,t)},{tag:"paste"})}(t,e),!0)},ji))}});const ju="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Gu=ju&&"documentMode"in document?document.documentMode:null,Xu=(!(!ju||!("InputEvent"in window)||Gu)&&new window.InputEvent("input"),ju&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),ju&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,ju&&/^(?=.*Chrome).*/i.test(navigator.userAgent)),Vu=(ju&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent),Zs("DRAG_DROP_PASTE_FILE"),Ju),qu=Vu.$createHeadingNode,Qu=Vu.$createQuoteNode,Zu=Vu.$isHeadingNode,ef=Vu.$isQuoteNode,tf=Vu.DRAG_DROP_PASTE,nf=Vu.HeadingNode,rf=Vu.QuoteNode,of=Vu.eventFiles,sf=Vu.registerRichText;var lf=Object.freeze({$createHeadingNode:qu,$createQuoteNode:Qu,$isHeadingNode:Zu,$isQuoteNode:ef,DRAG_DROP_PASTE:tf,HeadingNode:nf,QuoteNode:rf,eventFiles:of,registerRichText:sf});const af=/^(\d+(?:\.\d+)?)px$/,cf={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1};class df extends as{static getType(){return"tablecell"}static clone(e){const t=new df(e.__headerState,e.__colSpan,e.__width,e.__key);return t.__rowSpan=e.__rowSpan,t.__backgroundColor=e.__backgroundColor,t}static importDOM(){return{td:e=>({conversion:uf,priority:0}),th:e=>({conversion:uf,priority:0})}}static importJSON(e){const t=e.colSpan||1,n=e.rowSpan||1,r=ff(e.headerState,t,e.width||void 0);return r.__rowSpan=n,r.__backgroundColor=e.backgroundColor||null,r}constructor(e=cf.NO_STATUS,t=1,n,r){super(r),this.__colSpan=t,this.__rowSpan=1,this.__headerState=e,this.__width=n,this.__backgroundColor=null}createDOM(e){const t=document.createElement(this.getTag());return this.__width&&(t.style.width=this.__width+"px"),this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(t.style.backgroundColor=this.__backgroundColor),Va(t,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),t}exportDOM(e){const{element:t}=super.exportDOM(e);if(t){const e=t;e.style.border="1px solid black",this.__colSpan>1&&(e.colSpan=this.__colSpan),this.__rowSpan>1&&(e.rowSpan=this.__rowSpan),e.style.width=(this.getWidth()||75)+"px",e.style.verticalAlign="top",e.style.textAlign="start";const n=this.getBackgroundColor();null!==n?e.style.backgroundColor=n:this.hasHeader()&&(e.style.backgroundColor="#f2f3f5")}return{element:t}}exportJSON(){return{...super.exportJSON(),backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,type:"tablecell",width:this.getWidth()}}getColSpan(){return this.__colSpan}setColSpan(e){return this.getWritable().__colSpan=e,this}getRowSpan(){return this.__rowSpan}setRowSpan(e){return this.getWritable().__rowSpan=e,this}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e){return this.getWritable().__headerState=e,this.__headerState}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){return this.getWritable().__width=e,this.__width}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(e){this.getWritable().__backgroundColor=e}toggleHeaderStyle(e){const t=this.getWritable();return(t.__headerState&e)===e?t.__headerState-=e:t.__headerState+=e,t}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return this.getLatest().__headerState!==cf.NO_STATUS}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function uf(e){const t=e,n=e.nodeName.toLowerCase();let r=void 0;af.test(t.style.width)&&(r=parseFloat(t.style.width));const o=ff("th"===n?cf.ROW:cf.NO_STATUS,t.colSpan,r);o.__rowSpan=t.rowSpan;const i=t.style.backgroundColor;""!==i&&(o.__backgroundColor=i);const s=t.style,l=s.textDecoration.split(" "),a="700"===s.fontWeight||"bold"===s.fontWeight,c=l.includes("line-through"),d="italic"===s.fontStyle,u=l.includes("underline");return{after:e=>(0===e.length&&e.push(Qo()),e),forChild:(e,t)=>{if(hf(t)&&!Ci(e)){const t=Qo();return Si(e)&&"\n"===e.getTextContent()?null:(Ai(e)&&(a&&e.toggleFormat("bold"),c&&e.toggleFormat("strikethrough"),d&&e.toggleFormat("italic"),u&&e.toggleFormat("underline")),t.append(e),t)}return e},node:o}}function ff(e,t=1,n){return jo(new df(e,t,n))}function hf(e){return e instanceof df}const gf=Zs("INSERT_TABLE_COMMAND");class _f extends as{static getType(){return"tablerow"}static clone(e){return new _f(e.__height,e.__key)}static importDOM(){return{tr:e=>({conversion:pf,priority:0})}}static importJSON(e){return mf(e.height)}constructor(e,t){super(t),this.__height=e}exportJSON(){return{...super.exportJSON(),...this.getHeight()&&{height:this.getHeight()},type:"tablerow",version:1}}createDOM(e){const t=document.createElement("tr");return this.__height&&(t.style.height=this.__height+"px"),Va(t,e.theme.tableRow),t}isShadowRoot(){return!0}setHeight(e){return this.getWritable().__height=e,this.__height}getHeight(){return this.getLatest().__height}updateDOM(e){return e.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function pf(e){const t=e;let n=void 0;return af.test(t.style.height)&&(n=parseFloat(t.style.height)),{node:mf(n)}}function mf(e){return jo(new _f(e))}function Nf(e){return e instanceof _f}const yf="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function Cf(e){const t=Aa(e,e=>Nf(e));if(Nf(t))return t;throw new Error("Expected table cell to be inside of table row.")}function Tf(e){const t=Aa(e,e=>th(e));if(th(t))return t;throw new Error("Expected table cell to be inside of table.")}function Ef(e,t){const n=Tf(e),{x:r,y:o}=n.getCordsFromCellNode(e,t);return{above:n.getCellNodeFromCords(r,o-1,t),below:n.getCellNodeFromCords(r,o+1,t),left:n.getCellNodeFromCords(r-1,o,t),right:n.getCellNodeFromCords(r+1,o,t)}}const Sf=(e,t)=>e===cf.BOTH||e===t?t:cf.NO_STATUS;function xf(e){const t=e.getFirstDescendant();null==t?e.selectStart():t.getParentOrThrow().selectStart()}function wf(e,t){const n=e.getFirstChild();null!==n?n.insertBefore(t):e.append(t)}function bf(e,t,n){const[r,o,i]=Of(e,t,n);if(null===o)throw Error("Anchor not found in Grid");if(null===i)throw Error("Focus not found in Grid");return[r,o,i]}function Of(e,t,n){const r=[];let o=null,i=null;function s(e,s,l){const a={cell:l,startColumn:s,startRow:e},c=l.__rowSpan,d=l.__colSpan;for(let t=0;t<c;t++){void 0===r[e+t]&&(r[e+t]=[]);for(let n=0;n<d;n++)r[e+t][s+n]=a}null!==t&&t.is(l)&&(o=a),null!==n&&n.is(l)&&(i=a)}function l(e,t){return void 0===r[e]||void 0===r[e][t]}const a=e.getChildren();for(let e=0;e<a.length;e++){const t=a[e];if(!Nf(t))throw Error("Expected GridNode children to be TableRowNode");const n=t.getChildren();let r=0;for(const t of n){if(!hf(t))throw Error("Expected TableRowNode children to be TableCellNode");for(;!l(e,r);)r++;s(e,r,t),r+=t.__colSpan}}return[r,o,i]}function vf(e){let t;if(e instanceof df)t=e;else if("__type"in e){const n=Aa(e,hf);if(!hf(n))throw Error("Expected to find a parent TableCellNode");t=n}else{const n=Aa(e.getNode(),hf);if(!hf(n))throw Error("Expected to find a parent TableCellNode");t=n}const n=t.getParent();if(!Nf(n))throw Error("Expected TableCellNode to have a parent TableRowNode");const r=n.getParent();if(!th(r))throw Error("Expected TableRowNode to have a parent GridNode");return[t,n,r]}function Mf(e){const[t,,n]=vf(e),r=n.getChildren(),o=r.length,i=r[0].getChildren().length,s=new Array(o);for(let e=0;e<o;e++)s[e]=new Array(i);for(let e=0;e<o;e++){const n=r[e].getChildren();let o=0;for(let r=0;r<n.length;r++){for(;s[e][o];)o++;const i=n[r],l=i.__rowSpan||1,a=i.__colSpan||1;for(let t=0;t<l;t++)for(let n=0;n<a;n++)s[e+t][o+n]=i;if(t===i)return{colSpan:a,columnIndex:o,rowIndex:e,rowSpan:l};o+=a}}return null}class Af{constructor(e,t,n){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e}getStartEndPoints(){return[this.anchor,this.focus]}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!Df(e)&&(this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus))}set(e,t,n){this.dirty=!0,this.tableKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null}clone(){return new Af(this.tableKey,this.anchor,this.focus)}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.focus.getNode();if(!Ci(t))throw Error("Expected TableSelection focus to be an ElementNode");ki(t.select(0,t.getChildrenSize())).insertNodes(e)}getShape(){const e=ci(this.anchor.key);if(!hf(e))throw Error("Expected TableSelection anchor to be (or a child of) TableCellNode");const t=Mf(e);if(null===t)throw Error("getCellRect: expected to find AnchorNode");const n=ci(this.focus.key);if(!hf(n))throw Error("Expected TableSelection focus to be (or a child of) TableCellNode");const r=Mf(n);if(null===r)throw Error("getCellRect: expected to find focusCellNode");const o=Math.min(t.columnIndex,r.columnIndex),i=Math.max(t.columnIndex,r.columnIndex),s=Math.min(t.rowIndex,r.rowIndex),l=Math.max(t.rowIndex,r.rowIndex);return{fromX:Math.min(o,i),fromY:Math.min(s,l),toX:Math.max(o,i),toY:Math.max(s,l)}}getNodes(){const e=this._cachedNodes;if(null!==e)return e;const t=this.anchor.getNode(),n=this.focus.getNode(),r=Aa(t,hf),o=Aa(n,hf);if(!hf(r))throw Error("Expected TableSelection anchor to be (or a child of) TableCellNode");if(!hf(o))throw Error("Expected TableSelection focus to be (or a child of) TableCellNode");const i=r.getParent();if(!Nf(i))throw Error("Expected anchorCell to have a parent TableRowNode");const s=i.getParent();if(!th(s))throw Error("Expected tableNode to have a parent TableNode");const l=o.getParents()[1];if(l!==s){if(s.isParentOf(o)){const e=l.getParent();if(null==e)throw Error("Expected focusCellParent to have a parent");this.set(this.tableKey,o.getKey(),e.getKey())}else{const e=s.getParent();if(null==e)throw Error("Expected gridParent to have a parent");this.set(this.tableKey,e.getKey(),o.getKey())}return this.getNodes()}const[a,c,d]=bf(s,r,o);let u=Math.min(c.startColumn,d.startColumn),f=Math.min(c.startRow,d.startRow),h=Math.max(c.startColumn+c.cell.__colSpan-1,d.startColumn+d.cell.__colSpan-1),g=Math.max(c.startRow+c.cell.__rowSpan-1,d.startRow+d.cell.__rowSpan-1),_=u,p=f,m=u,N=f;function y(e){const{cell:t,startColumn:n,startRow:r}=e;u=Math.min(u,n),f=Math.min(f,r),h=Math.max(h,n+t.__colSpan-1),g=Math.max(g,r+t.__rowSpan-1)}for(;u<_||f<p||h>m||g>N;){if(u<_){const e=N-p,t=_-1;for(let n=0;n<=e;n++)y(a[p+n][t]);_=t}if(f<p){const e=m-_,t=p-1;for(let n=0;n<=e;n++)y(a[t][_+n]);p=t}if(h>m){const e=N-p,t=m+1;for(let n=0;n<=e;n++)y(a[p+n][t]);m=t}if(g>N){const e=m-_,t=N+1;for(let n=0;n<=e;n++)y(a[t][_+n]);N=t}}const C=[s];let T=null;for(let e=f;e<=g;e++)for(let t=u;t<=h;t++){const{cell:n}=a[e][t],r=n.getParent();if(!Nf(r))throw Error("Expected TableCellNode parent to be a TableRowNode");r!==T&&C.push(r),C.push(n,...kf(n)),T=r}return ol()||(this._cachedNodes=C),C}getTextContent(){const e=this.getNodes().filter(e=>hf(e));let t="";for(let n=0;n<e.length;n++){const r=e[n],o=r.__parent,i=(e[n+1]||{}).__parent;t+=r.getTextContent()+(i!==o?"\n":"\t")}return t}}function Df(e){return e instanceof Af}function Rf(){const e=Zo("root",0,"element"),t=Zo("root",0,"element");return new Af("root",e,t)}function kf(e){const t=[],n=[e];for(;n.length>0;){const r=n.pop();if(void 0===r)throw Error("Stack.length > 0; can't be undefined");Ci(r)&&n.unshift(...r.getChildren()),r!==e&&t.push(r)}return t}class If{constructor(e,t){this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.listenersToRemove=new Set,this.tableNodeKey=t,this.editor=e,this.table={columns:0,domRows:[],rows:0},this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.trackTable(),this.isSelecting=!1}getTable(){return this.table}removeListeners(){Array.from(this.listenersToRemove).forEach(e=>e())}trackTable(){const e=new MutationObserver(e=>{this.editor.update(()=>{let t=!1;for(let n=0;n<e.length;n++){const r=e[n].target.nodeName;if("TABLE"===r||"TBODY"===r||"THEAD"===r||"TR"===r){t=!0;break}}if(!t)return;const n=this.editor.getElementByKey(this.tableNodeKey);if(!n)throw new Error("Expected to find TableElement in DOM");this.table=$f(n)})});this.editor.update(()=>{const t=this.editor.getElementByKey(this.tableNodeKey);if(!t)throw new Error("Expected to find TableElement in DOM");this.table=$f(t),e.observe(t,{attributes:!0,childList:!0,subtree:!0})})}clearHighlight(){const e=this.editor;this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.enableHighlightStyle(),e.update(()=>{if(!th(ci(this.tableNodeKey)))throw new Error("Expected TableNode.");const t=e.getElementByKey(this.tableNodeKey);if(!t)throw new Error("Expected to find TableElement in DOM");const n=$f(t);Ff(e,n,null),$i(null),e.dispatchCommand(Js,void 0)})}enableHighlightStyle(){const e=this.editor;e.update(()=>{const t=e.getElementByKey(this.tableNodeKey);if(!t)throw new Error("Expected to find TableElement in DOM");cc(t,e._config.theme.tableSelection),t.classList.remove("disable-selection"),this.hasHijackedSelectionStyles=!1})}disableHighlightStyle(){const e=this.editor;e.update(()=>{const t=e.getElementByKey(this.tableNodeKey);if(!t)throw new Error("Expected to find TableElement in DOM");Va(t,e._config.theme.tableSelection),this.hasHijackedSelectionStyles=!0})}updateTableTableSelection(e){if(null!==e&&e.tableKey===this.tableNodeKey){const t=this.editor;this.tableSelection=e,this.isHighlightingCells=!0,this.disableHighlightStyle(),Ff(t,this.table,this.tableSelection)}else null==e?this.clearHighlight():(this.tableNodeKey=e.tableKey,this.updateTableTableSelection(e))}setFocusCellForSelection(e,t=!1){const n=this.editor;n.update(()=>{const r=ci(this.tableNodeKey);if(!th(r))throw new Error("Expected TableNode.");if(!n.getElementByKey(this.tableNodeKey))throw new Error("Expected to find TableElement in DOM");const o=e.x,i=e.y;if(this.focusCell=e,null!==this.anchorCell){const e=Lf(n._window);e&&e.setBaseAndExtent(this.anchorCell.elem,0,this.focusCell.elem,0)}if(this.isHighlightingCells||this.anchorX===o&&this.anchorY===i&&!t){if(o===this.focusX&&i===this.focusY)return}else this.isHighlightingCells=!0,this.disableHighlightStyle();if(this.focusX=o,this.focusY=i,this.isHighlightingCells){const t=li(e.elem);if(null!=this.tableSelection&&null!=this.anchorCellNodeKey&&hf(t)&&r.is(jf(t))){const e=t.getKey();this.tableSelection=this.tableSelection.clone()||Rf(),this.focusCellNodeKey=e,this.tableSelection.set(this.tableNodeKey,this.anchorCellNodeKey,this.focusCellNodeKey),$i(this.tableSelection),n.dispatchCommand(Js,void 0),Ff(n,this.table,this.tableSelection)}}})}setAnchorCellForSelection(e){this.isHighlightingCells=!1,this.anchorCell=e,this.anchorX=e.x,this.anchorY=e.y,this.editor.update(()=>{const t=li(e.elem);if(hf(t)){const e=t.getKey();this.tableSelection=null!=this.tableSelection?this.tableSelection.clone():Rf(),this.anchorCellNodeKey=e}})}formatCells(e){this.editor.update(()=>{const t=hi();if(!Df(t))throw Error("Expected grid selection");const n=ei(),r=n.anchor,o=n.focus;t.getNodes().forEach(t=>{hf(t)&&0!==t.getTextContentSize()&&(r.set(t.getKey(),0,"element"),o.set(t.getKey(),t.getChildrenSize(),"element"),n.formatText(e))}),$i(t),this.editor.dispatchCommand(Js,void 0)})}clearText(){const e=this.editor;e.update(()=>{const t=ci(this.tableNodeKey);if(!th(t))throw new Error("Expected TableNode.");const n=hi();if(!Df(n))throw Error("Expected grid selection");const r=n.getNodes().filter(hf);if(r.length!==this.table.columns*this.table.rows)r.forEach(e=>{if(Ci(e)){const t=Qo(),n=ri();t.append(n),e.append(t),e.getChildren().forEach(e=>{e!==t&&e.remove()})}}),Ff(e,this.table,null),$i(null),e.dispatchCommand(Js,void 0);else{t.selectPrevious(),t.remove();fi().selectStart()}})}}const Lf=e=>yf?(e||window).getSelection():null;function Pf(e){let t=e;for(;null!=t;){const e=t.nodeName;if("TD"===e||"TH"===e){const e=t._cell;return void 0===e?null:e}t=t.parentNode}return null}function $f(e){const t=[],n={columns:0,domRows:t,rows:0};let r=e.firstChild,o=0,i=0;for(t.length=0;null!=r;){const e=r.nodeName;if("TD"===e||"TH"===e){const e={elem:r,hasBackgroundColor:""!==r.style.backgroundColor,highlighted:!1,x:o,y:i};r._cell=e;let n=t[i];void 0===n&&(n=t[i]=[]),n[o]=e}else{const e=r.firstChild;if(null!=e){r=e;continue}}const n=r.nextSibling;if(null!=n){o++,r=n;continue}const s=r.parentNode;if(null!=s){const e=s.nextSibling;if(null==e)break;i++,o=0,r=e}}return n.columns=o+1,n.rows=i+1,n}function Ff(e,t,n){const r=new Set(n?n.getNodes():[]);Kf(t,(t,n)=>{const o=t.elem;r.has(n)?(t.highlighted=!0,Uf(e,t)):(t.highlighted=!1,Yf(e,t),o.getAttribute("style")||o.removeAttribute("style"))})}function Kf(e,t){const{domRows:n}=e;for(let e=0;e<n.length;e++){const r=n[e];if(r)for(let n=0;n<r.length;n++){const o=r[n];if(!o)continue;const i=li(o.elem);null!==i&&t(o,i,{x:n,y:e})}}}function Bf(e,t){t.disableHighlightStyle(),Kf(t.table,t=>{t.highlighted=!0,Uf(e,t)})}const Wf=(e,t,n,r,o)=>{const i="forward"===o;switch(o){case"backward":case"forward":return n!==(i?e.table.columns-1:0)?Hf(t.getCellNodeFromCordsOrThrow(n+(i?1:-1),r,e.table),i):r!==(i?e.table.rows-1:0)?Hf(t.getCellNodeFromCordsOrThrow(i?0:e.table.columns-1,r+(i?1:-1),e.table),i):i?t.selectNext():t.selectPrevious(),!0;case"up":return 0!==r?Hf(t.getCellNodeFromCordsOrThrow(n,r-1,e.table),!1):t.selectPrevious(),!0;case"down":return r!==e.table.rows-1?Hf(t.getCellNodeFromCordsOrThrow(n,r+1,e.table),!0):t.selectNext(),!0;default:return!1}};function zf(e,t){if(bi(e)||Df(e)){const n=t.isParentOf(e.anchor.getNode()),r=t.isParentOf(e.focus.getNode());return n&&r}return!1}function Hf(e,t){t?e.selectStart():e.selectEnd()}function Uf(e,t){const n=t.elem,r=li(n);if(!hf(r))throw Error("Expected to find LexicalNode from Table Cell DOMNode");null===r.getBackgroundColor()?n.style.setProperty("background-color","rgb(172,206,247)"):n.style.setProperty("background-image","linear-gradient(to right, rgba(172,206,247,0.85), rgba(172,206,247,0.85))"),n.style.setProperty("caret-color","transparent")}function Yf(e,t){const n=t.elem,r=li(n);if(!hf(r))throw Error("Expected to find LexicalNode from Table Cell DOMNode");null===r.getBackgroundColor()&&n.style.removeProperty("background-color"),n.style.removeProperty("background-image"),n.style.removeProperty("caret-color")}function Jf(e){const t=Aa(e,hf);return hf(t)?t:null}function jf(e){const t=Aa(e,th);return th(t)?t:null}function Gf(e,t,n,r,o){if(("up"===n||"down"===n)&&function(e){const t=e.getRootElement();if(!t)return!1;return t.hasAttribute("aria-controls")&&"typeahead-menu"===t.getAttribute("aria-controls")}(e))return!1;const i=hi();if(!zf(i,r)){if(bi(i)){if(i.isCollapsed()&&"backward"===n){const e=i.anchor.type,n=i.anchor.offset;if("element"!==e&&("text"!==e||0!==n))return!1;const r=i.anchor.getNode();if(!r)return!1;const o=Aa(r,e=>Ci(e)&&!e.isInline());if(!o)return!1;const s=o.getPreviousSibling();return!(!s||!th(s))&&(Xf(t),s.selectEnd(),!0)}if(t.shiftKey&&("up"===n||"down"===n)){const e=i.focus.getNode();if(vi(e)){const e=i.getNodes()[0];if(e){const t=Aa(e,hf);if(t&&r.isParentOf(t)){const e=r.getFirstDescendant(),t=r.getLastDescendant();if(!e||!t)return!1;const[n]=vf(e),[i]=vf(t),s=r.getCordsFromCellNode(n,o.table),l=r.getCordsFromCellNode(i,o.table),a=r.getDOMCellFromCordsOrThrow(s.x,s.y,o.table),c=r.getDOMCellFromCordsOrThrow(l.x,l.y,o.table);return o.setAnchorCellForSelection(a),o.setFocusCellForSelection(c,!0),!0}}return!1}{const t=Aa(e,e=>Ci(e)&&!e.isInline());if(!t)return!1;const r="down"===n?t.getNextSibling():t.getPreviousSibling();if(th(r)&&o.tableNodeKey===r.getKey()){const e=r.getFirstDescendant(),t=r.getLastDescendant();if(!e||!t)return!1;const[o]=vf(e),[s]=vf(t),l=i.clone();return l.focus.set(("up"===n?o:s).getKey(),"up"===n?0:s.getChildrenSize(),"element"),$i(l),!0}}}}return!1}if(bi(i)&&i.isCollapsed()){const{anchor:s,focus:l}=i,a=Aa(s.getNode(),hf),c=Aa(l.getNode(),hf);if(!hf(a)||!a.is(c))return!1;const d=jf(a);if(d!==r&&null!=d){const r=e.getElementByKey(d.getKey());if(null!=r)return o.table=$f(r),Gf(e,t,n,d,o)}if("backward"===n||"forward"===n){const e=s.type,o=s.offset,l=s.getNode();if(!l)return!1;const a=i.getNodes();return(1!==a.length||!yi(a[0]))&&(!!function(e,t,n,r){return function(e,t,n){return"element"===e&&("backward"===n?null===t.getPreviousSibling():null===t.getNextSibling())}(e,n,r)||function(e,t,n,r){const o=Aa(n,e=>Ci(e)&&!e.isInline());if(!o)return!1;const i="backward"===r?0===t:t===n.getTextContentSize();return"text"===e&&i&&("backward"===r?null===o.getPreviousSibling():null===o.getNextSibling())}(e,t,n,r)}(e,o,l,n)&&function(e,t,n,r){const o=Aa(t,hf);if(!hf(o))return!1;const[i,s]=bf(n,o,o);if(!function(e,t,n){const r=e[0][0],o=e[e.length-1][e[0].length-1],{startColumn:i,startRow:s}=t;return"backward"===n?i===r.startColumn&&s===r.startRow:i===o.startColumn&&s===o.startRow}(i,s,r))return!1;const l=function(e,t,n){const r=Aa(e,e=>Ci(e)&&!e.isInline());if(!r)return;const o="backward"===t?r.getPreviousSibling():r.getNextSibling();return o&&th(o)?o:"backward"===t?n.getPreviousSibling():n.getNextSibling()}(t,r,n);if(!l||th(l))return!1;Xf(e),"backward"===r?l.selectEnd():l.selectStart();return!0}(t,l,r,n))}const u=e.getElementByKey(a.__key),f=e.getElementByKey(s.key);if(null==f||null==u)return!1;let h;if("element"===s.type)h=f.getBoundingClientRect();else{const e=window.getSelection();if(null===e||0===e.rangeCount)return!1;h=e.getRangeAt(0).getBoundingClientRect()}const g="up"===n?a.getFirstChild():a.getLastChild();if(null==g)return!1;const _=e.getElementByKey(g.__key);if(null==_)return!1;const p=_.getBoundingClientRect();if("up"===n?p.top>h.top-h.height:h.bottom+h.height>p.bottom){Xf(t);const e=r.getCordsFromCellNode(a,o.table);if(!t.shiftKey)return Wf(o,r,e.x,e.y,n);{const t=r.getDOMCellFromCordsOrThrow(e.x,e.y,o.table);o.setAnchorCellForSelection(t),o.setFocusCellForSelection(t,!0)}return!0}}else if(Df(i)){const{anchor:s,focus:l}=i,a=Aa(s.getNode(),hf),c=Aa(l.getNode(),hf),[d]=i.getNodes(),u=e.getElementByKey(d.getKey());if(!hf(a)||!hf(c)||!th(d)||null==u)return!1;o.updateTableTableSelection(i);const f=$f(u),h=r.getCordsFromCellNode(a,f),g=r.getDOMCellFromCordsOrThrow(h.x,h.y,f);if(o.setAnchorCellForSelection(g),Xf(t),t.shiftKey){const e=r.getCordsFromCellNode(c,f);return((e,t,n,r,o)=>{const i="forward"===o;switch(o){case"backward":case"forward":return n!==(i?e.table.columns-1:0)&&e.setFocusCellForSelection(t.getDOMCellFromCordsOrThrow(n+(i?1:-1),r,e.table)),!0;case"up":return 0!==r&&(e.setFocusCellForSelection(t.getDOMCellFromCordsOrThrow(n,r-1,e.table)),!0);case"down":return r!==e.table.rows-1&&(e.setFocusCellForSelection(t.getDOMCellFromCordsOrThrow(n,r+1,e.table)),!0);default:return!1}})(o,d,e.x,e.y,n)}return c.selectEnd(),!0}return!1}function Xf(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}function Vf(e,t,n){const r=Qo();"first"===e?t.insertBefore(r):t.insertAfter(r),r.append(...n||[]),r.selectEnd()}function qf(e,t,n){const r=n.getParent();if(!r)return;const o=e.getElementByKey(r.getKey());if(!o)return;const i=window.getSelection();if(!i||i.anchorNode!==o)return;const s=Aa(t.anchor.getNode(),e=>hf(e));if(!s)return;const l=Aa(s,e=>th(e));if(!th(l)||!l.is(n))return;const[a,c]=bf(n,s,s),d=a[0][0],u=a[a.length-1][a[0].length-1],{startRow:f,startColumn:h}=c,g=f===d.startRow&&h===d.startColumn,_=f===u.startRow&&h===u.startColumn;return g?"first":_?"last":void 0}class Qf extends as{static getType(){return"table"}static clone(e){return new Qf(e.__key)}static importDOM(){return{table:e=>({conversion:Zf,priority:1})}}static importJSON(e){return eh()}constructor(e){super(e)}exportJSON(){return{...super.exportJSON(),type:"table",version:1}}createDOM(e,t){const n=document.createElement("table");return Va(n,e.theme.table),n}updateDOM(){return!1}exportDOM(e){return{...super.exportDOM(e),after:e=>{if(e){const t=e.cloneNode(),n=document.createElement("colgroup"),r=document.createElement("tbody");ec(e)&&r.append(...e.children);const o=this.getFirstChildOrThrow();if(!Nf(o))throw new Error("Expected to find row node.");const i=o.getChildrenSize();for(let e=0;e<i;e++){const e=document.createElement("col");n.append(e)}return t.replaceChildren(n,r),t}}}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(e,t){const{rows:n,domRows:r}=t;for(let t=0;t<n;t++){const n=r[t];if(null==n)continue;const o=n.findIndex(t=>{if(!t)return;const{elem:n}=t;return li(n)===e});if(-1!==o)return{x:o,y:t}}throw new Error("Cell not found in table.")}getDOMCellFromCords(e,t,n){const{domRows:r}=n,o=r[t];if(null==o)return null;const i=o[e<o.length?e:o.length-1];return null==i?null:i}getDOMCellFromCordsOrThrow(e,t,n){const r=this.getDOMCellFromCords(e,t,n);if(!r)throw new Error("Cell not found at cords.");return r}getCellNodeFromCords(e,t,n){const r=this.getDOMCellFromCords(e,t,n);if(null==r)return null;const o=li(r.elem);return hf(o)?o:null}getCellNodeFromCordsOrThrow(e,t,n){const r=this.getCellNodeFromCords(e,t,n);if(!r)throw new Error("Node at cords not TableCellNode.");return r}canSelectBefore(){return!0}canIndent(){return!1}}function Zf(e){return{node:eh()}}function eh(){return jo(new Qf)}function th(e){return e instanceof Qf}var nh=Object.freeze({$computeTableMap:bf,$computeTableMapSkipCellCheck:Of,$createTableCellNode:ff,$createTableNode:eh,$createTableNodeWithDimensions:function(e,t,n=!0){const r=eh();for(let o=0;o<e;o++){const e=mf();for(let r=0;r<t;r++){let t=cf.NO_STATUS;"object"==typeof n?(0===o&&n.rows&&(t|=cf.ROW),0===r&&n.columns&&(t|=cf.COLUMN)):n&&(0===o&&(t|=cf.ROW),0===r&&(t|=cf.COLUMN));const i=ff(t),s=Qo();s.append(ri()),i.append(s),e.append(i)}r.append(e)}return r},$createTableRowNode:mf,$createTableSelection:Rf,$deleteTableColumn:function(e,t){const n=e.getChildren();for(let e=0;e<n.length;e++){const r=n[e];if(Nf(r)){const e=r.getChildren();if(t>=e.length||t<0)throw new Error("Table column target index out of range");e[t].remove()}}return e},$deleteTableColumn__EXPERIMENTAL:function(){const e=hi();if(!bi(e)&&!Df(e))throw Error("Expected a RangeSelection or TableSelection");const t=e.anchor.getNode(),n=e.focus.getNode(),[r,,o]=vf(t),[i]=vf(n),[s,l,a]=bf(o,r,i),{startColumn:c}=l,{startRow:d,startColumn:u}=a,f=Math.min(c,u),h=Math.max(c+r.__colSpan-1,u+i.__colSpan-1),g=h-f+1;if(s[0].length===h-f+1)return o.selectPrevious(),void o.remove();const _=s.length;for(let e=0;e<_;e++)for(let t=f;t<=h;t++){const{cell:n,startColumn:r}=s[e][t];if(r<f){if(t===f){const e=f-r;n.setColSpan(n.__colSpan-Math.min(g,n.__colSpan-e))}}else if(r+n.__colSpan-1>h){if(t===h){const e=h-r+1;n.setColSpan(n.__colSpan-e)}}else n.remove()}const p=s[d],m=c>u?p[c+r.__colSpan]:p[u+i.__colSpan];if(void 0!==m){const{cell:e}=m;xf(e)}else{const e=u<c?p[u-1]:p[c-1],{cell:t}=e;xf(t)}},$deleteTableRow__EXPERIMENTAL:function(){const e=hi();if(!bi(e)&&!Df(e))throw Error("Expected a RangeSelection or TableSelection");const t=e.anchor.getNode(),n=e.focus.getNode(),[r,,o]=vf(t),[i]=vf(n),[s,l,a]=bf(o,r,i),{startRow:c}=l,{startRow:d}=a,u=d+i.__rowSpan-1;if(s.length===u-c+1)return void o.remove();const f=s[0].length,h=s[u+1],g=o.getChildAtIndex(u+1);for(let e=u;e>=c;e--){for(let t=f-1;t>=0;t--){const{cell:n,startRow:r,startColumn:o}=s[e][t];if(o===t&&(e===c&&r<c&&n.setRowSpan(n.__rowSpan-(r-c)),r>=c&&r+n.__rowSpan-1>u)){if(n.setRowSpan(n.__rowSpan-(u-r+1)),null===g)throw Error("Expected nextRowNode not to be null");if(0===t)wf(g,n);else{const{cell:e}=h[t-1];e.insertAfter(n)}}}const t=o.getChildAtIndex(e);if(!Nf(t))throw Error(`Expected GridNode childAtIndex(${String(e)}) to be RowNode`);t.remove()}if(void 0!==h){const{cell:e}=h[0];xf(e)}else{const e=s[c-1],{cell:t}=e[0];xf(t)}},$findCellNode:Jf,$findTableNode:jf,$getElementForTableNode:function(e,t){const n=e.getElementByKey(t.getKey());if(null==n)throw new Error("Table Element Not Found");return $f(n)},$getNodeTriplet:vf,$getTableCellNodeFromLexicalNode:function(e){const t=Aa(e,e=>hf(e));return hf(t)?t:null},$getTableCellNodeRect:Mf,$getTableColumnIndexFromTableCellNode:function(e){return Cf(e).getChildren().findIndex(t=>t.is(e))},$getTableNodeFromLexicalNodeOrThrow:Tf,$getTableRowIndexFromTableCellNode:function(e){const t=Cf(e);return Tf(t).getChildren().findIndex(e=>e.is(t))},$getTableRowNodeFromTableCellNodeOrThrow:Cf,$insertTableColumn:function(e,t,n=!0,r,o){const i=e.getChildren(),s=[];for(let e=0;e<i.length;e++){const n=i[e];if(Nf(n))for(let e=0;e<r;e++){const e=n.getChildren();if(t>=e.length||t<0)throw new Error("Table column target index out of range");const r=e[t];if(!hf(r))throw Error("Expected table cell");const{left:i,right:l}=Ef(r,o);let a=cf.NO_STATUS;(i&&i.hasHeaderState(cf.ROW)||l&&l.hasHeaderState(cf.ROW))&&(a|=cf.ROW);const c=ff(a);c.append(Qo()),s.push({newTableCell:c,targetCell:r})}}return s.forEach(({newTableCell:e,targetCell:t})=>{n?t.insertAfter(e):t.insertBefore(e)}),e},$insertTableColumn__EXPERIMENTAL:function(e=!0){const t=hi();if(!bi(t)&&!Df(t))throw Error("Expected a RangeSelection or TableSelection");const n=t.anchor.getNode(),r=t.focus.getNode(),[o]=vf(n),[i,,s]=vf(r),[l,a,c]=bf(s,i,o),d=l.length,u=e?Math.max(a.startColumn,c.startColumn):Math.min(a.startColumn,c.startColumn),f=e?u+i.__colSpan-1:u-1,h=s.getFirstChild();if(!Nf(h))throw Error("Expected firstTable child to be a row");let g=null;function _(e=cf.NO_STATUS){const t=ff(e).append(Qo());return null===g&&(g=t),t}let p=h;e:for(let e=0;e<d;e++){if(0!==e){const e=p.getNextSibling();if(!Nf(e))throw Error("Expected row nextSibling to be a row");p=e}const t=l[e],n=t[f<0?0:f].cell.__headerState,r=Sf(n,cf.ROW);if(f<0){wf(p,_(r));continue}const{cell:o,startColumn:i,startRow:s}=t[f];if(i+o.__colSpan-1<=f){let n=o,i=s,l=f;for(;i!==e&&n.__rowSpan>1;){if(l-=o.__colSpan,!(l>=0)){p.append(_(r));continue e}{const{cell:e,startRow:r}=t[l];n=e,i=r}}n.insertAfter(_(r))}else o.setColSpan(o.__colSpan+1)}null!==g&&xf(g)},$insertTableRow:function(e,t,n=!0,r,o){const i=e.getChildren();if(t>=i.length||t<0)throw new Error("Table row target index out of range");const s=i[t];if(!Nf(s))throw new Error("Row before insertion index does not exist.");for(let e=0;e<r;e++){const e=s.getChildren(),t=e.length,r=mf();for(let n=0;n<t;n++){const t=e[n];if(!hf(t))throw Error("Expected table cell");const{above:i,below:s}=Ef(t,o);let l=cf.NO_STATUS;const a=i&&i.getWidth()||s&&s.getWidth()||void 0;(i&&i.hasHeaderState(cf.COLUMN)||s&&s.hasHeaderState(cf.COLUMN))&&(l|=cf.COLUMN);const c=ff(l,1,a);c.append(Qo()),r.append(c)}n?s.insertAfter(r):s.insertBefore(r)}return e},$insertTableRow__EXPERIMENTAL:function(e=!0){const t=hi();if(!bi(t)&&!Df(t))throw Error("Expected a RangeSelection or TableSelection");const n=t.focus.getNode(),[r,,o]=vf(n),[i,s]=bf(o,r,r),l=i[0].length,{startRow:a}=s;if(e){const e=a+r.__rowSpan-1,t=i[e],n=mf();for(let r=0;r<l;r++){const{cell:o,startRow:i}=t[r];if(i+o.__rowSpan-1<=e){const e=t[r].cell.__headerState,o=Sf(e,cf.COLUMN);n.append(ff(o).append(Qo()))}else o.setRowSpan(o.__rowSpan+1)}const s=o.getChildAtIndex(e);if(!Nf(s))throw Error("focusEndRow is not a TableRowNode");s.insertAfter(n)}else{const e=i[a],t=mf();for(let n=0;n<l;n++){const{cell:r,startRow:o}=e[n];if(o===a){const r=e[n].cell.__headerState,o=Sf(r,cf.COLUMN);t.append(ff(o).append(Qo()))}else r.setRowSpan(r.__rowSpan+1)}const n=o.getChildAtIndex(a);if(!Nf(n))throw Error("focusEndRow is not a TableRowNode");n.insertBefore(t)}},$isTableCellNode:hf,$isTableNode:th,$isTableRowNode:Nf,$isTableSelection:Df,$removeTableRowAtIndex:function(e,t){const n=e.getChildren();if(t>=n.length||t<0)throw new Error("Expected table cell to be inside of table row.");return n[t].remove(),e},$unmergeCell:function(){const e=hi();if(!bi(e)&&!Df(e))throw Error("Expected a RangeSelection or TableSelection");const t=e.anchor.getNode(),[n,r,o]=vf(t),i=n.__colSpan,s=n.__rowSpan;if(i>1){for(let e=1;e<i;e++)n.insertAfter(ff(cf.NO_STATUS).append(Qo()));n.setColSpan(1)}if(s>1){const[e,t]=bf(o,n,n),{startColumn:l,startRow:a}=t;let c;for(let t=1;t<s;t++){const n=a+t,o=e[n];if(c=(c||r).getNextSibling(),!Nf(c))throw Error("Expected row next sibling to be a row");let s=null;for(let e=0;e<l;e++){const t=o[e],r=t.cell;t.startRow===n&&(s=r),r.__colSpan>1&&(e+=r.__colSpan-1)}if(null===s)for(let e=0;e<i;e++)wf(c,ff(cf.NO_STATUS).append(Qo()));else for(let e=0;e<i;e++)s.insertAfter(ff(cf.NO_STATUS).append(Qo()))}n.setRowSpan(1)}},INSERT_TABLE_COMMAND:gf,TableCellHeaderStates:cf,TableCellNode:df,TableNode:Qf,TableObserver:If,TableRowNode:_f,applyTableHandlers:function(e,t,n,r){const o=n.getRootElement();if(null===o)throw new Error("No root element.");const i=new If(n,e.getKey()),s=n._window||window;!function(e,t){e.__lexicalTableSelection=t}(t,i);const l=()=>{const e=()=>{i.isSelecting=!1,s.removeEventListener("mouseup",e),s.removeEventListener("mousemove",t)},t=n=>{setTimeout(()=>{if(1!=(1&n.buttons)&&i.isSelecting)return i.isSelecting=!1,s.removeEventListener("mouseup",e),void s.removeEventListener("mousemove",t);const r=Pf(n.target);null===r||i.anchorX===r.x&&i.anchorY===r.y||(n.preventDefault(),i.setFocusCellForSelection(r))},0)};return{onMouseMove:t,onMouseUp:e}};t.addEventListener("mousedown",e=>{setTimeout(()=>{if(0!==e.button)return;if(!s)return;const t=Pf(e.target);null!==t&&(Xf(e),i.setAnchorCellForSelection(t));const{onMouseUp:n,onMouseMove:r}=l();i.isSelecting=!0,s.addEventListener("mouseup",n),s.addEventListener("mousemove",r)},0)});const a=e=>{0===e.button&&n.update(()=>{const t=hi(),n=e.target;Df(t)&&t.tableKey===i.tableNodeKey&&o.contains(n)&&i.clearHighlight()})};s.addEventListener("mousedown",a),i.listenersToRemove.add(()=>s.removeEventListener("mousedown",a)),i.listenersToRemove.add(n.registerCommand(ws,t=>Gf(n,t,"down",e,i),Gi)),i.listenersToRemove.add(n.registerCommand(vs,t=>Gf(n,t,"up",e,i),Gi)),i.listenersToRemove.add(n.registerCommand(bs,t=>Gf(n,t,"backward",e,i),Gi)),i.listenersToRemove.add(n.registerCommand(Os,t=>Gf(n,t,"forward",e,i),Gi)),i.listenersToRemove.add(n.registerCommand(ks,e=>{const t=hi();if(Df(t)){const n=Aa(t.focus.getNode(),hf);if(hf(n))return Xf(e),n.selectEnd(),!0}return!1},Gi)),[ns,ts,es].forEach(t=>{i.listenersToRemove.add(n.registerCommand(t,(t=>()=>{const n=hi();if(!zf(n,e))return!1;if(Df(n))return i.clearText(),!0;if(bi(n)){const r=Aa(n.anchor.getNode(),e=>hf(e));if(!hf(r))return!1;const o=n.anchor.getNode(),s=n.focus.getNode(),l=e.isParentOf(o),a=e.isParentOf(s);if(l&&!a||a&&!l)return i.clearText(),!0;const c=Aa(n.anchor.getNode(),e=>Ci(e)),d=c&&Aa(c,e=>Ci(e)&&hf(e.getParent()));if(!Ci(d)||!Ci(c))return!1;if(t===ts&&null===d.getPreviousSibling())return!0}return!1})(t),Ji))});const c=t=>{const n=hi();if(!zf(n,e)){const e=n?n.getNodes():null;if(e){const t=e.find(e=>th(e)&&e.getKey()===i.tableNodeKey);if(th(t)){if(!t.getParent())return!1;t.remove()}}return!1}if(Df(n))return t&&(t.preventDefault(),t.stopPropagation()),i.clearText(),!0;if(bi(n)){const e=Aa(n.anchor.getNode(),e=>hf(e));if(!hf(e))return!1}return!1};function d(t){const n=e.getCordsFromCellNode(t,i.table);return e.getDOMCellFromCordsOrThrow(n.x,n.y,i.table)}return i.listenersToRemove.add(n.registerCommand(Ms,c,Ji)),i.listenersToRemove.add(n.registerCommand(As,c,Ji)),i.listenersToRemove.add(n.registerCommand(Zi,e=>{const t=hi();if(t){if(!Df(t)&&!bi(t))return!1;ou(n,sc(e,ClipboardEvent)?e:null,Qd(t));const r=c(e);return bi(t)&&t.removeText(),r}return!1},Ji)),i.listenersToRemove.add(n.registerCommand(us,t=>{const n=hi();if(!zf(n,e))return!1;if(Df(n))return i.formatCells(t),!0;if(bi(n)){const e=Aa(n.anchor.getNode(),e=>hf(e));if(!hf(e))return!1}return!1},Ji)),i.listenersToRemove.add(n.registerCommand(ds,t=>{const n=hi();if(!Df(n)||!zf(n,e))return!1;const r=n.anchor.getNode(),o=n.focus.getNode();if(!hf(r)||!hf(o))return!1;const[i,s,l]=bf(e,r,o),a=Math.max(s.startRow,l.startRow),c=Math.max(s.startColumn,l.startColumn),d=Math.min(s.startRow,l.startRow),u=Math.min(s.startColumn,l.startColumn);for(let e=d;e<=a;e++)for(let n=u;n<=c;n++){const r=i[e][n].cell;r.setFormat(t);const o=r.getChildren();for(let e=0;e<o.length;e++){const n=o[e];Ci(n)&&!n.isInline()&&n.setFormat(t)}}return!0},Ji)),i.listenersToRemove.add(n.registerCommand(qi,t=>{const r=hi();if(!zf(r,e))return!1;if(Df(r))return i.clearHighlight(),!1;if(bi(r)){const o=Aa(r.anchor.getNode(),e=>hf(e));if(!hf(o))return!1;if("string"==typeof t){const o=qf(n,r,e);if(o)return Vf(o,e,[ri(t)]),!0}}return!1},Ji)),r&&i.listenersToRemove.add(n.registerCommand(Ps,t=>{const n=hi();if(!bi(n)||!n.isCollapsed()||!zf(n,e))return!1;const r=Jf(n.anchor.getNode());if(null===r)return!1;Xf(t);const o=e.getCordsFromCellNode(r,i.table);return Wf(i,e,o.x,o.y,t.shiftKey?"backward":"forward"),!0},Ji)),i.listenersToRemove.add(n.registerCommand(cs,t=>e.isSelected(),Gi)),i.listenersToRemove.add(n.registerCommand(js,e=>{const{nodes:t,selection:n}=e,r=n.getStartEndPoints(),o=Df(n),i=bi(n)&&null!==Aa(n.anchor.getNode(),e=>hf(e))&&null!==Aa(n.focus.getNode(),e=>hf(e))||o;if(1!==t.length||!th(t[0])||!i||null===r)return!1;const[s]=r,l=t[0],a=l.getChildren(),c=l.getFirstChildOrThrow().getChildrenSize(),d=l.getChildrenSize(),u=Aa(s.getNode(),e=>hf(e)),f=u&&Aa(u,e=>Nf(e)),h=f&&Aa(f,e=>th(e));if(!hf(u)||!Nf(f)||!th(h))return!1;const g=f.getIndexWithinParent(),_=Math.min(h.getChildrenSize()-1,g+d-1),p=u.getIndexWithinParent(),m=Math.min(f.getChildrenSize()-1,p+c-1),N=Math.min(p,m),y=Math.min(g,_),C=Math.max(p,m),T=Math.max(g,_),E=h.getChildren();let S=0;for(let e=y;e<=T;e++){const t=E[e];if(!Nf(t))return!1;const n=a[S];if(!Nf(n))return!1;const r=t.getChildren(),o=n.getChildren();let i=0;for(let e=N;e<=C;e++){const t=r[e];if(!hf(t))return!1;const n=o[i];if(!hf(n))return!1;const s=t.getChildren();n.getChildren().forEach(e=>{if(Ai(e)){Qo().append(e),t.append(e)}else t.append(e)}),s.forEach(e=>e.remove()),i++}S++}return!0},Ji)),i.listenersToRemove.add(n.registerCommand(Js,()=>{const t=hi(),r=ui();if(bi(t)){const{anchor:r,focus:o}=t,a=r.getNode(),c=o.getNode(),u=Jf(a),f=Jf(c),h=!(!u||!e.is(jf(u))),g=!(!f||!e.is(jf(f))),_=h!==g,p=h&&g,m=t.isBackward();if(_){const r=t.clone();if(g){const[t]=bf(e,f,f),n=t[0][0].cell,o=t[t.length-1].at(-1).cell;r.focus.set(m?n.getKey():o.getKey(),m?n.getChildrenSize():o.getChildrenSize(),"element")}$i(r),Bf(n,i)}else p&&(u.is(f)||(i.setAnchorCellForSelection(d(u)),i.setFocusCellForSelection(d(f),!0),i.isSelecting||setTimeout(()=>{const{onMouseUp:e,onMouseMove:t}=l();i.isSelecting=!0,s.addEventListener("mouseup",e),s.addEventListener("mousemove",t)},0)))}else if(t&&Df(t)&&t.is(r)&&t.tableKey===e.getKey()){const r=Lf(n._window);if(r&&r.anchorNode&&r.focusNode){const o=li(r.focusNode),i=o&&!e.is(jf(o)),s=li(r.anchorNode),l=s&&e.is(jf(s));if(i&&l&&r.rangeCount>0){const o=ti(r,n);o&&(o.anchor.set(e.getKey(),t.isBackward()?e.getChildrenSize():0,"element"),r.removeAllRanges(),$i(o))}}}return t&&!t.is(r)&&(Df(t)||Df(r))&&i.tableSelection&&!i.tableSelection.is(r)?(Df(t)&&t.tableKey===i.tableNodeKey?i.updateTableTableSelection(t):!Df(t)&&Df(r)&&r.tableKey===i.tableNodeKey&&i.updateTableTableSelection(null),!1):(i.hasHijackedSelectionStyles&&!e.isSelected()?function(e,t){t.enableHighlightStyle(),Kf(t.table,t=>{const n=t.elem;t.highlighted=!1,Yf(e,t),n.getAttribute("style")||n.removeAttribute("style")})}(n,i):!i.hasHijackedSelectionStyles&&e.isSelected()&&Bf(n,i),!1)},Ji)),i.listenersToRemove.add(n.registerCommand(gs,()=>{const t=hi();if(!bi(t)||!t.isCollapsed()||!zf(t,e))return!1;const r=qf(n,t,e);return!!r&&(Vf(r,e),!0)},Ji)),i},getDOMCellFromTarget:Pf,getTableObserverFromTableElement:function(e){return e.__lexicalTableSelection}});Zs("INSERT_TABLE_COMMAND");!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}((function(e){const t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;const rh=nh,oh=rh.$computeTableMap,ih=rh.$computeTableMapSkipCellCheck,sh=rh.$createTableCellNode,lh=rh.$createTableNode,ah=rh.$createTableNodeWithDimensions,ch=rh.$createTableRowNode,dh=rh.$createTableSelection,uh=rh.$deleteTableColumn,fh=rh.$deleteTableColumn__EXPERIMENTAL,hh=rh.$deleteTableRow__EXPERIMENTAL,gh=rh.$findCellNode,_h=rh.$findTableNode,ph=rh.$getElementForTableNode,mh=rh.$getNodeTriplet,Nh=rh.$getTableCellNodeFromLexicalNode,yh=rh.$getTableCellNodeRect,Ch=rh.$getTableColumnIndexFromTableCellNode,Th=rh.$getTableNodeFromLexicalNodeOrThrow,Eh=rh.$getTableRowIndexFromTableCellNode,Sh=rh.$getTableRowNodeFromTableCellNodeOrThrow,xh=rh.$insertTableColumn,wh=rh.$insertTableColumn__EXPERIMENTAL,bh=rh.$insertTableRow,Oh=rh.$insertTableRow__EXPERIMENTAL,vh=rh.$isTableCellNode,Mh=rh.$isTableNode,Ah=rh.$isTableRowNode,Dh=rh.$isTableSelection,Rh=rh.$removeTableRowAtIndex,kh=rh.$unmergeCell,Ih=rh.INSERT_TABLE_COMMAND,Lh=rh.TableCellHeaderStates,Ph=rh.TableCellNode,$h=rh.TableNode,Fh=rh.TableObserver,Kh=rh.TableRowNode,Bh=rh.applyTableHandlers,Wh=rh.getDOMCellFromTarget,zh=rh.getTableObserverFromTableElement;var Hh=Object.freeze({$computeTableMap:oh,$computeTableMapSkipCellCheck:ih,$createTableCellNode:sh,$createTableNode:lh,$createTableNodeWithDimensions:ah,$createTableRowNode:ch,$createTableSelection:dh,$deleteTableColumn:uh,$deleteTableColumn__EXPERIMENTAL:fh,$deleteTableRow__EXPERIMENTAL:hh,$findCellNode:gh,$findTableNode:_h,$getElementForTableNode:ph,$getNodeTriplet:mh,$getTableCellNodeFromLexicalNode:Nh,$getTableCellNodeRect:yh,$getTableColumnIndexFromTableCellNode:Ch,$getTableNodeFromLexicalNodeOrThrow:Th,$getTableRowIndexFromTableCellNode:Eh,$getTableRowNodeFromTableCellNodeOrThrow:Sh,$insertTableColumn:xh,$insertTableColumn__EXPERIMENTAL:wh,$insertTableRow:bh,$insertTableRow__EXPERIMENTAL:Oh,$isTableCellNode:vh,$isTableNode:Mh,$isTableRowNode:Ah,$isTableSelection:Dh,$removeTableRowAtIndex:Rh,$unmergeCell:kh,INSERT_TABLE_COMMAND:Ih,TableCellHeaderStates:Lh,TableCellNode:Ph,TableNode:$h,TableObserver:Fh,TableRowNode:Kh,applyTableHandlers:Bh,getDOMCellFromTarget:Wh,getTableObserverFromTableElement:zh});e.Core=fl,e.Html=Nc,e.List=ud,e.Link=Id,e.Clipboard=su,e.Selection=Gl,e.History=hu,e.Utils=dc,e.Text=bu,e.RichText=lf,e.Table=Hh}(this.BX.UI.Lexical=this.BX.UI.Lexical||{});
