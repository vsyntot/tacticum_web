(function(){"use strict";BX.namespace("BX.Landing.UI.Button");BX.Landing.UI.Button.ColorAction=function(t,o){BX.Landing.UI.Button.EditorAction.apply(this,arguments);this.id=t;this.options=o;this.colorField=new BX.Landing.UI.Field.ColorField({subtype:"color"});this.loader=new BX.Loader({target:this.layout,size:30});const n=this.loader.layout;if(n){BX.Dom.style(n,"width","28px");BX.Dom.style(n,"height","42px")}BX.Landing.UI.Button.ColorAction.instances.push(this)};BX.Landing.UI.Button.ColorAction.instances=[];BX.Landing.UI.Button.ColorAction.hideAll=function(){};BX.Landing.UI.Button.ColorAction.prototype={constructor:BX.Landing.UI.Button.ColorAction,__proto__:BX.Landing.UI.Button.EditorAction.prototype,onClick:function(t){t.preventDefault();t.stopPropagation();BX.Dom.addClass(this.layout,"--wait");this.loader.show();let o=null;const n=BX.Landing.UI.Panel.EditorPanel.getInstance().currentElement;if(BX.Landing.PageObject.getRootWindow().document===n.ownerDocument){o=BX.Landing.UI.Panel.EditorPanel.getInstance().layout.ownerDocument.body}else{o=BX.Landing.PageObject.getEditorWindow()}this.colorField.createPopup({bindElement:BX.Landing.UI.Panel.EditorPanel.getInstance().layout,contentRoot:o,isNeedCalcPopupOffset:false,analytics:this.getAnalyticsParams()});this.colorField.colorPopup.subscribe("onPopupShow",(t=>{this.onPopupShow(t.data)}));this.colorField.colorPopup.subscribe("onPopupClose",(t=>{this.onPopupClose(t.data)}));this.colorField.colorPopup.subscribe("onHexColorPopupChange",(t=>{this.onColorSelected(t.data)}));const e=this.contextDocument.getSelection();if(e.rangeCount>0){this.savedRange=e.getRangeAt(0).cloneRange()}this.colorField.colorPopup.onPopupOpenClick(t,this.layout)},onColorSelected:function(t){if(this.savedRange){const t=this.contextDocument.getSelection();t.removeAllRanges();t.addRange(this.savedRange)}this.contextDocument.execCommand(this.id,false,t);const o=this.contextDocument.getSelection();if(o.rangeCount>0){this.savedRange=o.getRangeAt(0).cloneRange()}},onPopupShow:function(){this.loader.hide();BX.Dom.removeClass(this.layout,"--wait");setTimeout((()=>{BX.Landing.UI.Panel.EditorPanel.getInstance().resetPlacementType();BX.Landing.UI.Panel.EditorPanel.getInstance().enableSimpleScrollMode()}),100)},onPopupClose:function(){BX.Landing.UI.Panel.EditorPanel.getInstance().disableSimpleScrollMode()},setContextDocument:function(t){BX.Landing.UI.Button.EditorAction.prototype.setContextDocument.apply(this,arguments)},getAnalyticsParams:function(){let t=null;if(this.id==="foreColor"){t="text"}if(this.id==="hiliteColor"){t="backdrop"}return{category:"inline_editor",c_sub_section:t}}}})();
//# sourceMappingURL=color_button.map.js