<? namespace Bitrix\Main;$GLOBALS['____303275525']= array(base64_decode('Zml'.'sZ'.'V9leGlzdHM='),base64_decode('c3RydG91'.'cHBlc'.'g'.'=='),base64_decode('bW'.'Q1'),base64_decode('b'.'WQ1'),base64_decode('aW5fYXJyYXk='),base64_decode('aW5fY'.'XJyY'.'Xk='),base64_decode('Z'.'G'.'Vma'.'W5lZA=='),base64_decode('ZGVmaW5l'.'ZA=='),base64_decode(''.'ZGVmaW5lZA'.'=='),base64_decode('Zm'.'lsZV'.'9leG'.'lzdHM='),base64_decode('Zmls'.'ZV9'.'leGl'.'z'.'dH'.'M='),base64_decode('ZmlsZ'.'V9leGlzdHM='),base64_decode(''.'ZmlsZV'.'9leG'.'lzdHM='),base64_decode('ZXhwbG9'.'kZQ=='));if(!function_exists(__NAMESPACE__.'\\___903378701')){function ___903378701($_560790785){static $_2097561153= false; if($_2097561153 == false) $_2097561153=array('L2JpdHJpe'.'C9saWNlbnN'.'l'.'X2tleS5w'.'a'.'HA=','','','REVNTw'.'='.'=',''.'R'.'EV'.'NTw'.'==','QklUU'.'klY','TEl'.'D'.'RU5DRQ==','REVNTw==','L2'.'tleV91cGR'.'hdGUu'.'c'.'GhwP2'.'x'.'pY2V'.'uc2Vfa'.'2V5'.'PQ==','J'.'n'.'Rv'.'Y'.'mFza2V0P'.'Xkmb'.'GFuZz0=','aHR0cHM6Ly9kZXYuM'.'WMtYm'.'l0c'.'ml4LnJ1'.'L2'.'x'.'lYXJua'.'W'.'5'.'nL2NvdXJzZS9'.'pbmR'.'l'.'eC5waHA/Q'.'09VUlN'.'FX'.'0lEP'.'TEz'.'N'.'S'.'ZMRVNTT05fS'.'UQ9MjU'.'3MjA=','aHR0'.'cH'.'M6'.'L'.'y90cmFpb'.'m'.'l'.'uZy5'.'ia'.'XRya'.'XgyNC5jb20vc3VwcG9yd'.'C90cmFpbmluZy9jb'.'3Vyc2U'.'v'.'aW5kZ'.'Xg'.'ucG'.'h'.'w'.'P'.'0NPVVJTRV9JRD0x'.'N'.'zgm'.'TE'.'VT'.'U09'.'OX0lE'.'PTI1OTMy'.'JkxFU1NPTl9QQVRIPTE3NTIwLj'.'E3NTYyLjI1'.'OTMw'.'LjI1OTMy','cnU=','Ynk'.'=','a3o=',''.'ZGU'.'=',''.'Z'.'X'.'U=',''.'ZnI=','cGw'.'=','aXQ=','dWs=','Z'.'X'.'U=','Y29t','ZW4=','RE'.'V'.'N'.'T'.'w'.'==','W'.'Q==','VE'.'lNRUxJTUlUX0'.'VESV'.'RJT04=',''.'WQ==','RU5DT0'.'RF','WQ'.'==','U'.'2l0Z'.'UV4c'.'Gly'.'ZU'.'Rhd'.'GU=','b'.'WFpbg==','fnN1cH'.'BvcnRf'.'Zmlu'.'aX'.'N'.'oX2'.'R'.'h'.'dGU=','WS1'.'tLW'.'Q=',''.'W'.'S1tL'.'WQ=','Yml0cml4MjQ=','bWFp'.'bg==','flBB'.'U'.'kFNX0NMS'.'UVO'.'VF9MQU'.'5H','','a'.'W'.'50cmFu'.'Z'.'X'.'Q=','Z'.'W4'.'=','cnU=',''.'bWFp'.'bg==','dmVuZG9'.'y','Y'.'ml0cml'.'4X3BvcnRh'.'bA'.'==',''.'Yml'.'0cml4','ZW4=','M'.'WNfYml0cml4'.'X3B'.'v'.'c'.'nRhbA==','MWNf'.'Yml0cml4','cnU=','L2JpdH'.'J'.'peC9t'.'b2R'.'1b'.'GVzL21'.'haW4vb'.'GFu'.'Zy91YQ==','dWE=','L2J'.'pdHJpeC9tb2R'.'1b'.'GVzL'.'2'.'1h'.'aW4vbGFuZy'.'9ieQ==','Y'.'nk=','L2JpdH'.'JpeC9tb2R1bGVzL21'.'haW4v'.'bGFuZy9reg==','a3'.'o=','L'.'2JpdHJp'.'eC9'.'tb2R1bGV'.'zL2'.'1'.'haW4vbGFuZy9ydQ==','cnU=','bW'.'Fpbg='.'=','flBB'.'UkF'.'NX1BBU'.'lR'.'ORVJfSUQ=','bWFp'.'bg==','UE'.'FS'.'QU1f'.'TU'.'F'.'YX1VTRVJT','bW'.'Fpb'.'g==','fkN'.'PV'.'U'.'5UX0VY'.'V'.'FJ'.'B','Tg'.'==','WQ==','ZX'.'h0'.'cmFuZXQ=',''.'QU5EI'.'F'.'Uu'.'T'.'EFTVF9MT0'.'dJ'.'T'.'iA+'.'IA'.'==','QU5'.'EI'.'FUuTEFTV'.'F'.'9MT0d'.'J'.'Ti'.'BJ'.'U'.'yBO'.'T1QgTl'.'VM'.'TA==','aW50cm'.'Fu'.'ZXQ=','ZX'.'h'.'0cmFuZX'.'Q=','ZXh0cmFuZXRfZ3Jv'.'dXA=',''.'b'.'WFpbg==',''.'fmxpY2Vu'.'c2Vf'.'bmF'.'tZQ==','bWFpbg==','fmxpY'.'2Vu'.'c2V'.'fY29kZXM=','','LA'.'==');return base64_decode($_2097561153[$_560790785]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_1459789292= null; private?string $_1720484017= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; private const CIS=['ru' => 1, 'by' => 1, 'kz' => 1, 'uz' => 1, 'kg' => 1, 'am' => 1, 'az' => 1, 'ge' => 1]; public function getKey(): string{ if($this->_1459789292 === null){ $_1841746041= Loader::getDocumentRoot(). ___903378701(0); $LICENSE_KEY= ___903378701(1); if($GLOBALS['____303275525'][0]($_1841746041)){ include($_1841746041);} $this->_1459789292=($LICENSE_KEY == ___903378701(2) || $GLOBALS['____303275525'][1]($LICENSE_KEY) == ___903378701(3)? ___903378701(4): $LICENSE_KEY);} return $this->_1459789292;} public function getHashLicenseKey(): string{ return $GLOBALS['____303275525'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____303275525'][3](___903378701(5). $this->getKey(). ___903378701(6));} public function isDemoKey(): bool{ return $this->getKey() == ___903378701(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___903378701(8). $this->getHashLicenseKey(). ___903378701(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ if($this->isCis()){ return ___903378701(10);} return ___903378701(11);} public function getRenewalLink(): string{ $_1720484017= $this->getRegion(); if($GLOBALS['____303275525'][4]($_1720484017,[___903378701(12), ___903378701(13), ___903378701(14), ___903378701(15)])){ return self::URL_RENEWAL_LICENSE[$_1720484017];} if($GLOBALS['____303275525'][5]($_1720484017,[___903378701(16), ___903378701(17), ___903378701(18), ___903378701(19), ___903378701(20)])){ return self::URL_RENEWAL_LICENSE[___903378701(21)];} return self::URL_RENEWAL_LICENSE[___903378701(22)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___903378701(23)];} public function isDemo(): bool{ return $GLOBALS['____303275525'][6](___903378701(24)) && DEMO === ___903378701(25);} public function isTimeBound(): bool{ return $GLOBALS['____303275525'][7](___903378701(26)) && TIMELIMIT_EDITION === ___903378701(27);} public function isEncoded(): bool{ return $GLOBALS['____303275525'][8](___903378701(28)) && ENCODE === ___903378701(29);} public function getExpireDate():?Date{ $_36054120= (int)($GLOBALS[___903378701(30)] ??(1052/2-526)); if($_36054120>(1288/2-644)){ return Date::createFromTimestamp($_36054120);} return null;} public function getSupportExpireDate():?Date{ $_36054120= Option::get(___903378701(31), ___903378701(32)); if(Date::isCorrect($_36054120, ___903378701(33))){ return new Date($_36054120, ___903378701(34));} return null;} public function isCis(): bool{ return isset(self::CIS[$this->getRegion()]);} public function getRegion():?string{ if($this->_1720484017 === null){ if(Loader::includeModule(___903378701(35))){ $this->_1720484017= \CBitrix24::getPortalZone();} else{ $_1720484017= Option::get(___903378701(36), ___903378701(37)); if(empty($_1720484017)){ $_1720484017= $this->__1351860698(); if(empty($_1720484017)){ $_1720484017= $this->__1120353072();}} $this->_1720484017= $_1720484017 ?? ___903378701(38);}} return $this->_1720484017?: null;} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___903378701(39))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___903378701(40)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___903378701(41)];} private function __1351860698():?string{ $_677241083= Option::get(___903378701(42), ___903378701(43)); if($_677241083 === ___903378701(44) || $_677241083 === ___903378701(45)){ return ___903378701(46);} if($_677241083 === ___903378701(47) || $_677241083 === ___903378701(48)){ return ___903378701(49);} return null;} private function __1120353072():?string{ $_1809007164= Application::getDocumentRoot(); if($GLOBALS['____303275525'][9]($_1809007164. ___903378701(50))){ return ___903378701(51);} if($GLOBALS['____303275525'][10]($_1809007164. ___903378701(52))){ return ___903378701(53);} if($GLOBALS['____303275525'][11]($_1809007164. ___903378701(54))){ return ___903378701(55);} if($GLOBALS['____303275525'][12]($_1809007164. ___903378701(56))){ return ___903378701(57);} return null;} public function getPartnerId(): int{ return (int)Option::get(___903378701(58), ___903378701(59),(1012/2-506));} public function getMaxUsers(): int{ return (int)Option::get(___903378701(60), ___903378701(61),(1028/2-514));} public function isExtraCountable(): bool{ return Option::get(___903378701(62), ___903378701(63), ___903378701(64)) === ___903378701(65) && ModuleManager::isModuleInstalled(___903378701(66));} public function getActiveUsersCount(Date $_972327801= null): int{ $_1582616070= Application::getConnection(); $_478508408=(976-2*488); if($_972327801 !== null){  $_724645628= ___903378701(67).$_1582616070->getSqlHelper()->convertToDbDate($_972327801);} else{  $_724645628= ___903378701(68);} if(ModuleManager::isModuleInstalled(___903378701(69))){ $_828188584="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_724645628}
			"; $_478508408= (int)$_1582616070->queryScalar($_828188584); $_639389276= (int)Option::get(___903378701(70), ___903378701(71)); if($_639389276> min(94,0,31.333333333333) && $this->isExtraCountable()){ $_828188584="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_639389276}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_724645628}
							AND D.VALUE_ID IS NULL
					"; $_478508408 += (int)$_1582616070->queryScalar($_828188584);}} return $_478508408;}  public function getName(): string{ return Option::get(___903378701(72), ___903378701(73));}  public function getCodes(): array{ $_1133770213= Option::get(___903378701(74), ___903378701(75)); if($_1133770213 != ___903378701(76)){ return $GLOBALS['____303275525'][13](___903378701(77), $_1133770213);} return[];}}?>