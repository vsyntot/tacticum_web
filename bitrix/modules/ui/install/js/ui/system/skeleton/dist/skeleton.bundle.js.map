{"version":3,"file":"skeleton.bundle.js","sources":["../src/line.js","../src/circle.js","../src/render-skeleton.js"],"sourcesContent":["import { Tag } from 'main.core';\n\nimport './style.css';\n\nexport const Line = (width: number, height: number, radius: number): HTMLElement => {\n\tconst style = Object.entries({ width, height, radius })\n\t\t.map(([prop, value]) => (value ? `--${prop}: ${value}px;` : ''))\n\t;\n\n\treturn Tag.render`<div class=\"ui-skeleton\" style=\"${style.join('')}\"></div>`;\n};\n","import { Line } from './line';\n\nexport const Circle = (size: number = 18) => Line(size, size, 99);\n","import { Tag, localStorage } from 'main.core';\nimport { Circle } from './circle';\nimport { Line } from './line';\n\nconst map: Map<string, string> = new Map();\nlet css = null;\n\nexport async function renderSkeleton(path: string, root: HTMLElement): Promise<HTMLElement>\n{\n\tlet html = map.get(path);\n\tif (!html)\n\t{\n\t\thtml = (await fetch(path).then((r) => r.text()))\n\t\t\t.replaceAll(/(Circle|Line)\\((.*)\\)/g, (_, fn, args) => parse({ Line, Circle }[fn], args))\n\t\t\t.replaceAll(/{(.+)}/g, (_, key) => localStorage.get(key))\n\t\t;\n\n\t\tmap.set(path, html);\n\t}\n\n\tconst shadowRoot = root.attachShadow({ mode: 'open' });\n\tshadowRoot.append(Tag.render`<template>${html}</template>`.content);\n\n\tcss ??= [...document.styleSheets].find(({ href }) => href?.includes('ui/system/skeleton'))?.href;\n\tshadowRoot.append(Tag.render`<link rel=\"stylesheet\" href=\"${css}\">`);\n\n\treturn root;\n}\n\nconst parse = (func, args) => func(...args.split(',')\n\t.filter((it) => it)\n\t.map((value) => (value.trim() === 'null' ? null : value)))\n\t.outerHTML\n;\n"],"names":["Line","width","height","radius","style","Object","entries","map","prop","value","Tag","render","join","Circle","size","Map","css","renderSkeleton","path","root","html","get","fetch","then","r","text","replaceAll","_","fn","args","parse","key","localStorage","set","shadowRoot","attachShadow","mode","append","content","document","styleSheets","find","href","includes","func","split","filter","it","trim","outerHTML"],"mappings":";;;;;;;;AAAA,OAIaA,IAAI,GAAG,CAACC,KAAa,EAAEC,MAAc,EAAEC,MAAc,KAAkB;GACnF,MAAMC,KAAK,GAAGC,MAAM,CAACC,OAAO,CAAC;KAAEL,KAAK;KAAEC,MAAM;KAAEC;IAAQ,CAAC,CACrDI,GAAG,CAAC,CAAC,CAACC,IAAI,EAAEC,KAAK,CAAC,KAAMA,KAAK,GAAI,KAAID,IAAK,KAAIC,KAAM,KAAI,GAAG,EAAG,CAAC;GAGjE,OAAOC,aAAG,CAACC,MAAM,cAAC,mCAAgC,CAAiB,UAAQ,GAAvBP,KAAK,CAACQ,IAAI,CAAC,EAAE,CAAC;CACnE,CAAC;;OCRYC,MAAM,GAAG,CAACC,IAAY,GAAG,EAAE,KAAKd,IAAI,CAACc,IAAI,EAAEA,IAAI,EAAE,EAAE,CAAC;;;;;ACFjE,CAIA,MAAMP,GAAwB,GAAG,IAAIQ,GAAG,EAAE;CAC1C,IAAIC,GAAG,GAAG,IAAI;AAEd,CAAO,eAAeC,cAAc,CAACC,IAAY,EAAEC,IAAiB,EACpE;GAAA;GACC,IAAIC,IAAI,GAAGb,GAAG,CAACc,GAAG,CAACH,IAAI,CAAC;GACxB,IAAI,CAACE,IAAI,EACT;KACCA,IAAI,GAAG,CAAC,MAAME,KAAK,CAACJ,IAAI,CAAC,CAACK,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,EAAE,CAAC,EAC7CC,UAAU,CAAC,wBAAwB,EAAE,CAACC,CAAC,EAAEC,EAAE,EAAEC,IAAI,KAAKC,KAAK,CAAC;OAAE9B,IAAI;OAAEa;MAAQ,CAACe,EAAE,CAAC,EAAEC,IAAI,CAAC,CAAC,CACxFH,UAAU,CAAC,SAAS,EAAE,CAACC,CAAC,EAAEI,GAAG,KAAKC,sBAAY,CAACX,GAAG,CAACU,GAAG,CAAC,CAAC;KAG1DxB,GAAG,CAAC0B,GAAG,CAACf,IAAI,EAAEE,IAAI,CAAC;;GAGpB,MAAMc,UAAU,GAAGf,IAAI,CAACgB,YAAY,CAAC;KAAEC,IAAI,EAAE;IAAQ,CAAC;GACtDF,UAAU,CAACG,MAAM,CAAC3B,aAAG,CAACC,MAAM,mBAAC,aAAU,CAAO,aAAW,GAAhBS,IAAI,EAAckB,OAAO,CAAC;GAEnE,QAAAtB,GAAG,mBAAHA,GAAG,YAAK,CAAC,GAAGuB,QAAQ,CAACC,WAAW,CAAC,CAACC,IAAI,CAAC,CAAC;KAAEC;IAAM,KAAKA,IAAI,oBAAJA,IAAI,CAAEC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,qBAAlF,MAAoFD,IAAI;GAChGR,UAAU,CAACG,MAAM,CAAC3B,aAAG,CAACC,MAAM,iBAAC,gCAA6B,CAAM,IAAE,GAANK,GAAG,EAAK;GAEpE,OAAOG,IAAI;CACZ;CAEA,MAAMW,KAAK,GAAG,CAACc,IAAI,EAAEf,IAAI,KAAKe,IAAI,CAAC,GAAGf,IAAI,CAACgB,KAAK,CAAC,GAAG,CAAC,CACnDC,MAAM,CAAEC,EAAE,IAAKA,EAAE,CAAC,CAClBxC,GAAG,CAAEE,KAAK,IAAMA,KAAK,CAACuC,IAAI,EAAE,KAAK,MAAM,GAAG,IAAI,GAAGvC,KAAM,CAAC,CAAC,CACzDwC,SAAS;;;;;;;;;;"}