{"version":3,"file":"parser.bundle.map.js","names":["this","BX","UI","exports","ui_bbcode_astProcessor","ui_bbcode_encoder","ui_linkify","ui_bbcode_model","main_core","getByIndex","array","index","Type","isArray","TypeError","isInteger","preparedIndex","length","ParserScheme","BBCodeScheme","getTagScheme","tagName","BBCodeTagScheme","name","isAllowedTag","isChildAllowed","parent","child","TAG_REGEX_GS","LF","CRLF","TAB","isLinebreak","symbol","includes","isTab","BBCodeTokenizer","trimQuotes","value","source","String","test","slice","toLowerCase","isStringFilled","tokenize","bbcode","tokens","listNestingLevels","lastIndex","replace","fullTag","slash","attrs","textBetween","push","parseText","isOpeningTag","Boolean","startIndex","attributes","parseAttributes","lowerCaseTagName","type","Object","fromEntries","pop","nextContent","unclosed","remainingText","i","text","regex","matches","matchAll","textBuffer","match","char","content","sourceAttributes","result","startsWith","trim","split","filter","reduce","acc","item","key","parserScheme","BBCodeParser","constructor","options","allowedLinkify","scheme","setScheme","DefaultBBCodeScheme","isFunction","onUnknown","setOnUnknown","defaultOnUnknownHandler","encoder","BBCodeEncoder","setEncoder","isBoolean","linkify","setIsAllowedLinkify","getScheme","handler","onUnknownHandler","getOnUnknownHandler","getEncoder","isAllowedLinkify","canBeLinkified","node","getName","notAllowedNodeNames","inNotAllowedNode","some","AstProcessor","findParentNodeByName","getType","BBCodeNode","ELEMENT_NODE","nodeName","newNode","createElement","setChildren","getChildren","fragment","createFragment","children","openingTag","getOpeningTag","closingTag","getClosingTag","createText","decodeAttributes","isArrayFilled","map","decodeAttribute","parse","tokenizer","createRoot","stack","wasOpened","level","forEach","token","tagScheme","isVoidTag","isVoid","voidNode","appendChild","currentNode","openedTagIndex","indexOf","splice","decodeText","createNewLine","createTab","getFinalLineBreaksIndexes","skip","reduceRight","flattenAst","finalLinebreaksIndexes","toString","encode","MultiTokens","Linkify","nodes","t","toHref","runOnParseHandler","BBCode"],"sources":["parser.bundle.js"],"mappings":"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","ignoreList":[]}